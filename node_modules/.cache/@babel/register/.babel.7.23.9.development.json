{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar express = require(\"express\");\nvar session = require(\"express-session\");\nvar mysql = require(\"mysql\");\nvar cors = require(\"cors\");\nvar conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = express();\nvar corsOptions = {\n  origin: \"http://localhost:3001/videoIndex\",\n  methods: \"GET,HEAD,PUT,PATCH,POST,DELETE\",\n  credentials: true\n};\napp.use(cors(corsOptions));\n\n// app.use(cors());\n\napp.set(\"port\", process.env.PORT || 3001);\napp.set(\"views\", __dirname + \"/views\");\n// app.set(\"views\", path.join(__dirname, \"/views\"));\napp.set(\"view engine\", \"pug\");\napp.use(\"/public\", express[\"static\"](__dirname + \"/public\"));\n// app.use(\"/public\", express.static(path.join(__dirname, \"/public\")));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(session({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n// app.use((req, res, next) => {\n//   res.header(\"Access-Control-Allow-Origin\", \"*\"); // 모든 출처를 허용하려면 '*'를 사용합니다.\n//   res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n//   res.header(\n//     \"Access-Control-Allow-Headers\",\n//     \"Origin, X-Requested-With, Content-Type, Accept, Authorization\"\n//   );\n//   next();\n// });\n\napp.get(\"/\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\n\n//************** 화상 시작 **************/\napp.set(\"dummyDb2\", {\n  rooms: new Array()\n});\napp.get(\"/videoIndex\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\napp.post(\"/videoIndex\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\napp.post(\"/videoIndex/newRoom\", function (req, res) {\n  var _req$body = req.body,\n    title = _req$body.title,\n    auth = _req$body.auth,\n    user = _req$body.user;\n  var roomId = req.sessionID + Date.now();\n  var totalCount = 0;\n  var _app$get = app.get(\"dummyDb2\"),\n    rooms = _app$get.rooms;\n  if (auth == 0) {\n    totalCount += 1;\n  }\n  console.log(\"app.js / user :\" + user);\n  rooms.push({\n    title: title,\n    roomId: roomId,\n    totalCount: totalCount\n  });\n  console.log(\"app.js / newRoom : \" + rooms);\n  var sql = \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(1, ?, ?, now())\";\n  var value = [title, user];\n  conn.query(sql, value, function (err, result, fields) {\n    if (err) throw err;\n    console.log(result);\n  });\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"videoIndex\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/video/\".concat(roomId));\n});\napp.get(\"/video/:roomId\", function (req, res) {\n  var user = req.query.user;\n  console.log(\"/video/:roomId  >>> user : \" + user);\n  var _app$get$rooms$find = app.get(\"dummyDb2\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  console.log(\"app.js/title :\" + title);\n  res.locals.title = title;\n  var targetRoom = app.get(\"dummyDb2\").rooms.find(function (room) {\n    return room.roomId === req.params.roomId;\n  });\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\n  targetRoom.totalCount += 1;\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\n  var sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\n  var value = [user, title];\n  conn.query(sql, value, function (err, result, fields) {\n    if (err) throw err;\n    console.log(result);\n  });\n\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"video\");\n});\napp.post(\"/videoIndex/leave-room\", function (req, res) {\n  var _req$body2 = req.body,\n    title = _req$body2.title,\n    auth = _req$body2.auth;\n  console.log(\"app.js/title :\" + title);\n  console.log(\"app.js/auth :\" + auth);\n  var _app$get2 = app.get(\"dummyDb2\"),\n    rooms = _app$get2.rooms;\n  console.log(rooms);\n  console.log(\"--------------------\");\n\n  // rooms.totalCount += count;\n  // console.log(\"totalCount : \" + totalCount);\n\n  var foundRoom = rooms.find(function (room) {\n    return room.title === title;\n  });\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\n  if (foundRoom) {\n    if (auth == 1) {\n      foundRoom.totalCount -= 1;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    } else if (auth == 0) {\n      foundRoom.totalCount = 0;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    }\n    if (foundRoom.totalCount == 0) {\n      var index = rooms.indexOf(foundRoom);\n      console.log(\"app.js/index : \" + index);\n      if (index !== -1) {\n        rooms.splice(index, 1);\n        var sql = \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\n        var value = [title];\n        conn.query(sql, value, function (err, result, fields) {\n          if (err) throw err;\n          console.log(result);\n        });\n      }\n    }\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\n    console.log(rooms);\n  }\n  return res.render(\"videoIndex\", {\n    rooms: rooms\n  });\n});\n\n//************** 화상 끝 **************/\n\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"Listening on http://localhost:3001\");\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInNlc3Npb24iLCJteXNxbCIsImNvcnMiLCJjb25uIiwiY3JlYXRlQ29ubmVjdGlvbiIsImhvc3QiLCJwb3J0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJjb25uZWN0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiYXBwIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJtZXRob2RzIiwiY3JlZGVudGlhbHMiLCJ1c2UiLCJzZXQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsIl9fZGlybmFtZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJyZXNhdmUiLCJzYXZlVW5pbml0aWFsaXplZCIsInNlY3JldCIsIkNPT0tJRV9TRUNSRVQiLCJjb29raWUiLCJodHRwT25seSIsInNlY3VyZSIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciIsInJvb21zIiwiQXJyYXkiLCJwb3N0IiwiX3JlcSRib2R5IiwiYm9keSIsInRpdGxlIiwiYXV0aCIsInJvb21JZCIsInNlc3Npb25JRCIsIkRhdGUiLCJub3ciLCJ0b3RhbENvdW50IiwiX2FwcCRnZXQiLCJwdXNoIiwic3FsIiwidmFsdWUiLCJxdWVyeSIsInJlc3VsdCIsImZpZWxkcyIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwibG9jYXRpb24iLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVkaXJlY3QiLCJjb25jYXQiLCJfYXBwJGdldCRyb29tcyRmaW5kIiwiZmluZCIsInJvb20iLCJwYXJhbXMiLCJsb2NhbHMiLCJ0YXJnZXRSb29tIiwiX3JlcSRib2R5MiIsIl9hcHAkZ2V0MiIsImZvdW5kUm9vbSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIm5leHQiLCJtZXNzYWdlIiwiTk9ERV9FTlYiLCJzdGF0dXMiLCJleHByZXNzU2VydmVyIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFx2aWRlb1xcIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoXCJleHByZXNzXCIpO1xyXG5jb25zdCBzZXNzaW9uID0gcmVxdWlyZShcImV4cHJlc3Mtc2Vzc2lvblwiKTtcclxuY29uc3QgbXlzcWwgPSByZXF1aXJlKFwibXlzcWxcIik7XHJcbmNvbnN0IGNvcnMgPSByZXF1aXJlKFwiY29yc1wiKTtcclxuXHJcbmNvbnN0IGNvbm4gPSBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcclxuICBob3N0OiBcIjE3NS4xOTguMjA2LjEzN1wiLFxyXG4gIHBvcnQ6IDMzMDYsXHJcbiAgdXNlcjogXCJxXCIsXHJcbiAgcGFzc3dvcmQ6IFwicVwiLFxyXG4gIGRhdGFiYXNlOiBcImZvbGxhd1wiLFxyXG59KTtcclxuXHJcbmNvbm4uY29ubmVjdCgoZXJyKSA9PiB7XHJcbiAgaWYgKGVycikge1xyXG4gICAgY29uc29sZS5lcnJvcihcIk15U1FMIOyXsOqysCDsmKTrpZhcIik7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGNvbnNvbGUubG9nKFwiTXlTUUzsl5Ag7ISx6rO17KCB7Jy866GcIOyXsOqysOuQmOyXiOyKteuLiOuLpC5cIik7XHJcbn0pO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuY29uc3QgY29yc09wdGlvbnMgPSB7XHJcbiAgb3JpZ2luOiBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMS92aWRlb0luZGV4XCIsXHJcbiAgbWV0aG9kczogXCJHRVQsSEVBRCxQVVQsUEFUQ0gsUE9TVCxERUxFVEVcIixcclxuICBjcmVkZW50aWFsczogdHJ1ZSxcclxufTtcclxuXHJcbmFwcC51c2UoY29ycyhjb3JzT3B0aW9ucykpO1xyXG5cclxuLy8gYXBwLnVzZShjb3JzKCkpO1xyXG5cclxuYXBwLnNldChcInBvcnRcIiwgcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxKTtcclxuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3ZpZXdzXCIpO1xyXG4vLyBhcHAuc2V0KFwidmlld3NcIiwgcGF0aC5qb2luKF9fZGlybmFtZSwgXCIvdmlld3NcIikpO1xyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XHJcbmFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArIFwiL3B1YmxpY1wiKSk7XHJcbi8vIGFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiL3B1YmxpY1wiKSkpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKFxyXG4gIHNlc3Npb24oe1xyXG4gICAgcmVzYXZlOiBmYWxzZSxcclxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcclxuICAgIC8vQ09PS0lFX1NFQ1JFVCDtmZjqsr0g67OA7IiY6rCAIOyEpOygleuQmOyWtCDsnojri6TrqbQg6re4IOqwkuydhCDsgqzsmqntlZjqs6AsXHJcbiAgICAvL+yEpOygleuQmOyWtCDsnojsp4Ag7JWK64uk66m0IFwic2VjcmV0XCLsnbTrnbzripQg6riw67O46rCS7J2EIOyCrOyaqe2VmOyXrCDshLjshZgg642w7J207YSw66W8IOyVlO2YuO2ZlFxyXG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5DT09LSUVfU0VDUkVUIHx8IFwic2VjcmV0XCIsXHJcbiAgICBjb29raWU6IHtcclxuICAgICAgLy9odHRwT25seTogdHJ1ZeuKlCDtgbTrnbzsnbTslrjtirjsl5DshJwg7IS47IWYIOy/oO2CpOyXkCDsoJHqt7ztlaAg65WMIEphdmFTY3JpcHTrpbwg7Ya17ZWcIOygkeq3vOydhCDrp4nripQg7Ji17IWYXHJcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAvL3NlY3VyZTogZmFsc2XripQg7IS47IWYIOy/oO2CpOulvCDslYjsoITtlZwg7Jew6rKwKEhUVFBTKeydhCDthrXtlbTshJzrp4wg7KCE7Iah7ZW07JW8IO2VmOuKlOyngCDsl6zrtoDrpbwg7ISk7KCV7ZWY64qUIOyYteyFmFxyXG4gICAgICBzZWN1cmU6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG4pO1xyXG4vLyBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpOyAvLyDrqqjrk6Ag7Lac7LKY66W8IO2XiOyaqe2VmOugpOuptCAnKifrpbwg7IKs7Jqp7ZWp64uI64ukLlxyXG4vLyAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzXCIsIFwiR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OU1wiKTtcclxuLy8gICByZXMuaGVhZGVyKFxyXG4vLyAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbi8vICAgICBcIk9yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQsIEF1dGhvcml6YXRpb25cIlxyXG4vLyAgICk7XHJcbi8vICAgbmV4dCgpO1xyXG4vLyB9KTtcclxuXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJldHVybiByZXMucmVuZGVyKFwidmlkZW9JbmRleFwiKTtcclxufSk7XHJcblxyXG4vLyoqKioqKioqKioqKioqIO2ZlOyDgSDsi5zsnpEgKioqKioqKioqKioqKiovXHJcbmFwcC5zZXQoXCJkdW1teURiMlwiLCB7IHJvb21zOiBuZXcgQXJyYXkoKSB9KTtcclxuXHJcbmFwcC5nZXQoXCIvdmlkZW9JbmRleFwiLCAocmVxLCByZXMpID0+IHtcclxuICByZXR1cm4gcmVzLnJlbmRlcihcInZpZGVvSW5kZXhcIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleFwiLCAocmVxLCByZXMpID0+IHtcclxuICByZXR1cm4gcmVzLnJlbmRlcihcInZpZGVvSW5kZXhcIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleC9uZXdSb29tXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdGl0bGUsIGF1dGgsIHVzZXIgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHJvb21JZCA9IHJlcS5zZXNzaW9uSUQgKyBEYXRlLm5vdygpO1xyXG4gIGxldCB0b3RhbENvdW50ID0gMDtcclxuICBjb25zdCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYjJcIik7XHJcblxyXG4gIGlmIChhdXRoID09IDApIHtcclxuICAgIHRvdGFsQ291bnQgKz0gMTtcclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzIC8gdXNlciA6XCIgKyB1c2VyKTtcclxuXHJcbiAgcm9vbXMucHVzaCh7IHRpdGxlLCByb29tSWQsIHRvdGFsQ291bnQgfSk7XHJcbiAgY29uc29sZS5sb2coXCJhcHAuanMgLyBuZXdSb29tIDogXCIgKyByb29tcyk7XHJcblxyXG4gIGNvbnN0IHNxbCA9XHJcbiAgICBcIklOU0VSVCBJTlRPIGNoYXQoY2hhdF90eXBlLCBjaGF0X3RpdGxlLCB1c2VyX2lkLCBjaGF0X2NyZWF0ZWQpIFZBTFVFUygxLCA/LCA/LCBub3coKSlcIjtcclxuICBjb25zdCB2YWx1ZSA9IFt0aXRsZSwgdXNlcl07XHJcblxyXG4gIGNvbm4ucXVlcnkoc3FsLCB2YWx1ZSwgKGVyciwgcmVzdWx0LCBmaWVsZHMpID0+IHtcclxuICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSk7XHJcblxyXG4gIGFwcC5nZXQoXCJ3c3NcIikuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcclxuICAgIGlmIChjbGllbnQubG9jYXRpb24gPT09IFwidmlkZW9JbmRleFwiICYmIGNsaWVudC5yZWFkeVN0YXRlID09PSBjbGllbnQuT1BFTilcclxuICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkocm9vbXMpKTtcclxuICB9KTtcclxuICByZXR1cm4gcmVzLnJlZGlyZWN0KGAvdmlkZW8vJHtyb29tSWR9YCk7XHJcbn0pO1xyXG5cclxuYXBwLmdldChcIi92aWRlby86cm9vbUlkXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlciB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnNvbGUubG9nKFwiL3ZpZGVvLzpyb29tSWQgID4+PiB1c2VyIDogXCIgKyB1c2VyKTtcclxuICBjb25zdCB7IHRpdGxlIH0gPSBhcHBcclxuICAgIC5nZXQoXCJkdW1teURiMlwiKVxyXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XHJcblxyXG4gIC8vcmVzLmxvY2Fsc+uKlCDsnZHri7Ug6rCd7LK0KHJlcynsnZgg7IaN7ISx7Jy866GcLCDtlbTri7kg7J2R64u17JeQIOuMgO2VnCDroZzsu6wg67OA7IiY66W8IOyEpOygle2VmOqzoCDsgqzsmqntlaAg7IiYIOyeiOqyjCDtlbTspIxcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90aXRsZSA6XCIgKyB0aXRsZSk7XHJcbiAgcmVzLmxvY2Fscy50aXRsZSA9IHRpdGxlO1xyXG5cclxuICBjb25zdCB0YXJnZXRSb29tID0gYXBwXHJcbiAgICAuZ2V0KFwiZHVtbXlEYjJcIilcclxuICAgIC5yb29tcy5maW5kKChyb29tKSA9PiByb29tLnJvb21JZCA9PT0gcmVxLnBhcmFtcy5yb29tSWQpO1xyXG5cclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90YXJnZXRSb29tMSA6XCIgKyB0YXJnZXRSb29tLnRvdGFsQ291bnQpO1xyXG4gIHRhcmdldFJvb20udG90YWxDb3VudCArPSAxO1xyXG5cclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90YXJnZXRSb29tMiA6XCIgKyB0YXJnZXRSb29tLnRvdGFsQ291bnQpO1xyXG5cclxuICBjb25zdCBzcWwgPSBcIlVQREFURSBjaGF0IFNFVCBsYXd5ZXJfaWQ9PyBXSEVSRSBjaGF0X3RpdGxlID0gP1wiO1xyXG4gIGNvbnN0IHZhbHVlID0gW3VzZXIsIHRpdGxlXTtcclxuXHJcbiAgY29ubi5xdWVyeShzcWwsIHZhbHVlLCAoZXJyLCByZXN1bHQsIGZpZWxkcykgPT4ge1xyXG4gICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICB9KTtcclxuXHJcbiAgLy9jaGF0IO2MjOydvOydhCDroIzrjZTrp4HtlZjsl6wg7ZW064u5IO2MjOydvOyXkOyEnCB0aXRsZSDrs4DsiJjrpbwg7IKs7Jqp7ZWgIOyImCDsnojsnYxcclxuICByZXMucmVuZGVyKFwidmlkZW9cIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleC9sZWF2ZS1yb29tXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdGl0bGUsIGF1dGggfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RpdGxlIDpcIiArIHRpdGxlKTtcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy9hdXRoIDpcIiArIGF1dGgpO1xyXG4gIGxldCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYjJcIik7XHJcbiAgY29uc29sZS5sb2cocm9vbXMpO1xyXG4gIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XHJcblxyXG4gIC8vIHJvb21zLnRvdGFsQ291bnQgKz0gY291bnQ7XHJcbiAgLy8gY29uc29sZS5sb2coXCJ0b3RhbENvdW50IDogXCIgKyB0b3RhbENvdW50KTtcclxuXHJcbiAgY29uc3QgZm91bmRSb29tID0gcm9vbXMuZmluZCgocm9vbSkgPT4gcm9vbS50aXRsZSA9PT0gdGl0bGUpO1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL2ZvdW5kUm9vbS50b3RhbENvdW50IDpcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuXHJcbiAgaWYgKGZvdW5kUm9vbSkge1xyXG4gICAgaWYgKGF1dGggPT0gMSkge1xyXG4gICAgICBmb3VuZFJvb20udG90YWxDb3VudCAtPSAxO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImFwcC5qcy90b3RhbENvdW50MTExIDogXCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XHJcbiAgICB9IGVsc2UgaWYgKGF1dGggPT0gMCkge1xyXG4gICAgICBmb3VuZFJvb20udG90YWxDb3VudCA9IDA7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RvdGFsQ291bnQxMTEgOiBcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm91bmRSb29tLnRvdGFsQ291bnQgPT0gMCkge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHJvb21zLmluZGV4T2YoZm91bmRSb29tKTtcclxuICAgICAgY29uc29sZS5sb2coXCJhcHAuanMvaW5kZXggOiBcIiArIGluZGV4KTtcclxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIHJvb21zLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNxbCA9XHJcbiAgICAgICAgICBcIlVQREFURSBjaGF0IFNFVCBjaGF0dGluZ19jbG9zZWQ9bm93KCkgV0hFUkUgY2hhdF90aXRsZSA9ID9cIjtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IFt0aXRsZV07XHJcblxyXG4gICAgICAgIGNvbm4ucXVlcnkoc3FsLCB2YWx1ZSwgKGVyciwgcmVzdWx0LCBmaWVsZHMpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RvdGFsQ291bnQyMjIgOiBcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXMucmVuZGVyKFwidmlkZW9JbmRleFwiLCB7IHJvb21zIH0pO1xyXG59KTtcclxuXHJcbi8vKioqKioqKioqKioqKiog7ZmU7IOBIOuBnSAqKioqKioqKioqKioqKi9cclxuXHJcbmFwcC51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcclxuICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcclxuICByZXMubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVyciA6IHt9O1xyXG4gIHJlcy5zdGF0dXMoZXJyLnN0YXR1cyB8fCA1MDApLnJlbmRlcihcImVycm9yXCIpO1xyXG59KTtcclxuXHJcbmNvbnN0IGV4cHJlc3NTZXJ2ZXIgPSBhcHAubGlzdGVuKGFwcC5nZXQoXCJwb3J0XCIpLCAoKSA9PlxyXG4gIGNvbnNvbGUubG9nKGBMaXN0ZW5pbmcgb24gaHR0cDovL2xvY2FsaG9zdDozMDAxYClcclxuKTtcclxuXHJcbi8vIHNvY2tldFxyXG5yZXF1aXJlKFwiLi9zb2NrZXRcIikoZXhwcmVzc1NlcnZlciwgYXBwKTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxJQUFNQyxPQUFPLEdBQUdELE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUMxQyxJQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsSUFBTUcsSUFBSSxHQUFHSCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBRTVCLElBQU1JLElBQUksR0FBR0YsS0FBSyxDQUFDRyxnQkFBZ0IsQ0FBQztFQUNsQ0MsSUFBSSxFQUFFLGlCQUFpQjtFQUN2QkMsSUFBSSxFQUFFLElBQUk7RUFDVkMsSUFBSSxFQUFFLEdBQUc7RUFDVEMsUUFBUSxFQUFFLEdBQUc7RUFDYkMsUUFBUSxFQUFFO0FBQ1osQ0FBQyxDQUFDO0FBRUZOLElBQUksQ0FBQ08sT0FBTyxDQUFDLFVBQUNDLEdBQUcsRUFBSztFQUNwQixJQUFJQSxHQUFHLEVBQUU7SUFDUEMsT0FBTyxDQUFDQyxLQUFLLENBQUMsYUFBYSxDQUFDO0lBQzVCO0VBQ0Y7RUFDQUQsT0FBTyxDQUFDRSxHQUFHLENBQUMsdUJBQXVCLENBQUM7QUFDdEMsQ0FBQyxDQUFDO0FBRUYsSUFBTUMsR0FBRyxHQUFHakIsT0FBTyxDQUFDLENBQUM7QUFFckIsSUFBTWtCLFdBQVcsR0FBRztFQUNsQkMsTUFBTSxFQUFFLGtDQUFrQztFQUMxQ0MsT0FBTyxFQUFFLGdDQUFnQztFQUN6Q0MsV0FBVyxFQUFFO0FBQ2YsQ0FBQztBQUVESixHQUFHLENBQUNLLEdBQUcsQ0FBQ2xCLElBQUksQ0FBQ2MsV0FBVyxDQUFDLENBQUM7O0FBRTFCOztBQUVBRCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxNQUFNLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxJQUFJLElBQUksSUFBSSxDQUFDO0FBQ3pDVCxHQUFHLENBQUNNLEdBQUcsQ0FBQyxPQUFPLEVBQUVJLFNBQVMsR0FBRyxRQUFRLENBQUM7QUFDdEM7QUFDQVYsR0FBRyxDQUFDTSxHQUFHLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQztBQUM3Qk4sR0FBRyxDQUFDSyxHQUFHLENBQUMsU0FBUyxFQUFFdEIsT0FBTyxVQUFPLENBQUMyQixTQUFTLEdBQUcsU0FBUyxDQUFDLENBQUM7QUFDekQ7QUFDQVYsR0FBRyxDQUFDSyxHQUFHLENBQUN0QixPQUFPLENBQUM0QixJQUFJLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCWCxHQUFHLENBQUNLLEdBQUcsQ0FBQ3RCLE9BQU8sQ0FBQzZCLFVBQVUsQ0FBQztFQUFFQyxRQUFRLEVBQUU7QUFBTSxDQUFDLENBQUMsQ0FBQztBQUNoRGIsR0FBRyxDQUFDSyxHQUFHLENBQ0xwQixPQUFPLENBQUM7RUFDTjZCLE1BQU0sRUFBRSxLQUFLO0VBQ2JDLGlCQUFpQixFQUFFLEtBQUs7RUFDeEI7RUFDQTtFQUNBQyxNQUFNLEVBQUVULE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxhQUFhLElBQUksUUFBUTtFQUM3Q0MsTUFBTSxFQUFFO0lBQ047SUFDQUMsUUFBUSxFQUFFLElBQUk7SUFDZDtJQUNBQyxNQUFNLEVBQUU7RUFDVjtBQUNGLENBQUMsQ0FDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBcEIsR0FBRyxDQUFDcUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxVQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBSztFQUN6QixPQUFPQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDakMsQ0FBQyxDQUFDOztBQUVGO0FBQ0F4QixHQUFHLENBQUNNLEdBQUcsQ0FBQyxVQUFVLEVBQUU7RUFBRW1CLEtBQUssRUFBRSxJQUFJQyxLQUFLLENBQUM7QUFBRSxDQUFDLENBQUM7QUFFM0MxQixHQUFHLENBQUNxQixHQUFHLENBQUMsYUFBYSxFQUFFLFVBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQ25DLE9BQU9BLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLFlBQVksQ0FBQztBQUNqQyxDQUFDLENBQUM7QUFFRnhCLEdBQUcsQ0FBQzJCLElBQUksQ0FBQyxhQUFhLEVBQUUsVUFBQ0wsR0FBRyxFQUFFQyxHQUFHLEVBQUs7RUFDcEMsT0FBT0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsWUFBWSxDQUFDO0FBQ2pDLENBQUMsQ0FBQztBQUVGeEIsR0FBRyxDQUFDMkIsSUFBSSxDQUFDLHFCQUFxQixFQUFFLFVBQUNMLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQzVDLElBQUFLLFNBQUEsR0FBOEJOLEdBQUcsQ0FBQ08sSUFBSTtJQUE5QkMsS0FBSyxHQUFBRixTQUFBLENBQUxFLEtBQUs7SUFBRUMsSUFBSSxHQUFBSCxTQUFBLENBQUpHLElBQUk7SUFBRXZDLElBQUksR0FBQW9DLFNBQUEsQ0FBSnBDLElBQUk7RUFDekIsSUFBTXdDLE1BQU0sR0FBR1YsR0FBRyxDQUFDVyxTQUFTLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7RUFDekMsSUFBSUMsVUFBVSxHQUFHLENBQUM7RUFDbEIsSUFBQUMsUUFBQSxHQUFrQnJDLEdBQUcsQ0FBQ3FCLEdBQUcsQ0FBQyxVQUFVLENBQUM7SUFBN0JJLEtBQUssR0FBQVksUUFBQSxDQUFMWixLQUFLO0VBRWIsSUFBSU0sSUFBSSxJQUFJLENBQUMsRUFBRTtJQUNiSyxVQUFVLElBQUksQ0FBQztFQUNqQjtFQUVBdkMsT0FBTyxDQUFDRSxHQUFHLENBQUMsaUJBQWlCLEdBQUdQLElBQUksQ0FBQztFQUVyQ2lDLEtBQUssQ0FBQ2EsSUFBSSxDQUFDO0lBQUVSLEtBQUssRUFBTEEsS0FBSztJQUFFRSxNQUFNLEVBQU5BLE1BQU07SUFBRUksVUFBVSxFQUFWQTtFQUFXLENBQUMsQ0FBQztFQUN6Q3ZDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLHFCQUFxQixHQUFHMEIsS0FBSyxDQUFDO0VBRTFDLElBQU1jLEdBQUcsR0FDUCx1RkFBdUY7RUFDekYsSUFBTUMsS0FBSyxHQUFHLENBQUNWLEtBQUssRUFBRXRDLElBQUksQ0FBQztFQUUzQkosSUFBSSxDQUFDcUQsS0FBSyxDQUFDRixHQUFHLEVBQUVDLEtBQUssRUFBRSxVQUFDNUMsR0FBRyxFQUFFOEMsTUFBTSxFQUFFQyxNQUFNLEVBQUs7SUFDOUMsSUFBSS9DLEdBQUcsRUFBRSxNQUFNQSxHQUFHO0lBQ2xCQyxPQUFPLENBQUNFLEdBQUcsQ0FBQzJDLE1BQU0sQ0FBQztFQUNyQixDQUFDLENBQUM7RUFFRjFDLEdBQUcsQ0FBQ3FCLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQ3VCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDLFVBQUNDLE1BQU0sRUFBSztJQUN6QyxJQUFJQSxNQUFNLENBQUNDLFFBQVEsS0FBSyxZQUFZLElBQUlELE1BQU0sQ0FBQ0UsVUFBVSxLQUFLRixNQUFNLENBQUNHLElBQUksRUFDdkVILE1BQU0sQ0FBQ0ksSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQzNCLEtBQUssQ0FBQyxDQUFDO0VBQ3RDLENBQUMsQ0FBQztFQUNGLE9BQU9GLEdBQUcsQ0FBQzhCLFFBQVEsV0FBQUMsTUFBQSxDQUFXdEIsTUFBTSxDQUFFLENBQUM7QUFDekMsQ0FBQyxDQUFDO0FBRUZoQyxHQUFHLENBQUNxQixHQUFHLENBQUMsZ0JBQWdCLEVBQUUsVUFBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUs7RUFDdEMsSUFBUS9CLElBQUksR0FBSzhCLEdBQUcsQ0FBQ21CLEtBQUssQ0FBbEJqRCxJQUFJO0VBQ1pLLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLDZCQUE2QixHQUFHUCxJQUFJLENBQUM7RUFDakQsSUFBQStELG1CQUFBLEdBQWtCdkQsR0FBRyxDQUNsQnFCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FDZkksS0FBSyxDQUFDK0IsSUFBSSxDQUFDLFVBQUNDLElBQUk7TUFBQSxPQUFLQSxJQUFJLENBQUN6QixNQUFNLEtBQUtWLEdBQUcsQ0FBQ29DLE1BQU0sQ0FBQzFCLE1BQU07SUFBQSxFQUFDO0lBRmxERixLQUFLLEdBQUF5QixtQkFBQSxDQUFMekIsS0FBSzs7RUFJYjtFQUNBakMsT0FBTyxDQUFDRSxHQUFHLENBQUMsZ0JBQWdCLEdBQUcrQixLQUFLLENBQUM7RUFDckNQLEdBQUcsQ0FBQ29DLE1BQU0sQ0FBQzdCLEtBQUssR0FBR0EsS0FBSztFQUV4QixJQUFNOEIsVUFBVSxHQUFHNUQsR0FBRyxDQUNuQnFCLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FDZkksS0FBSyxDQUFDK0IsSUFBSSxDQUFDLFVBQUNDLElBQUk7SUFBQSxPQUFLQSxJQUFJLENBQUN6QixNQUFNLEtBQUtWLEdBQUcsQ0FBQ29DLE1BQU0sQ0FBQzFCLE1BQU07RUFBQSxFQUFDO0VBRTFEbkMsT0FBTyxDQUFDRSxHQUFHLENBQUMsc0JBQXNCLEdBQUc2RCxVQUFVLENBQUN4QixVQUFVLENBQUM7RUFDM0R3QixVQUFVLENBQUN4QixVQUFVLElBQUksQ0FBQztFQUUxQnZDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLHNCQUFzQixHQUFHNkQsVUFBVSxDQUFDeEIsVUFBVSxDQUFDO0VBRTNELElBQU1HLEdBQUcsR0FBRyxrREFBa0Q7RUFDOUQsSUFBTUMsS0FBSyxHQUFHLENBQUNoRCxJQUFJLEVBQUVzQyxLQUFLLENBQUM7RUFFM0IxQyxJQUFJLENBQUNxRCxLQUFLLENBQUNGLEdBQUcsRUFBRUMsS0FBSyxFQUFFLFVBQUM1QyxHQUFHLEVBQUU4QyxNQUFNLEVBQUVDLE1BQU0sRUFBSztJQUM5QyxJQUFJL0MsR0FBRyxFQUFFLE1BQU1BLEdBQUc7SUFDbEJDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDMkMsTUFBTSxDQUFDO0VBQ3JCLENBQUMsQ0FBQzs7RUFFRjtFQUNBbkIsR0FBRyxDQUFDQyxNQUFNLENBQUMsT0FBTyxDQUFDO0FBQ3JCLENBQUMsQ0FBQztBQUVGeEIsR0FBRyxDQUFDMkIsSUFBSSxDQUFDLHdCQUF3QixFQUFFLFVBQUNMLEdBQUcsRUFBRUMsR0FBRyxFQUFLO0VBQy9DLElBQUFzQyxVQUFBLEdBQXdCdkMsR0FBRyxDQUFDTyxJQUFJO0lBQXhCQyxLQUFLLEdBQUErQixVQUFBLENBQUwvQixLQUFLO0lBQUVDLElBQUksR0FBQThCLFVBQUEsQ0FBSjlCLElBQUk7RUFDbkJsQyxPQUFPLENBQUNFLEdBQUcsQ0FBQyxnQkFBZ0IsR0FBRytCLEtBQUssQ0FBQztFQUNyQ2pDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLGVBQWUsR0FBR2dDLElBQUksQ0FBQztFQUNuQyxJQUFBK0IsU0FBQSxHQUFnQjlELEdBQUcsQ0FBQ3FCLEdBQUcsQ0FBQyxVQUFVLENBQUM7SUFBN0JJLEtBQUssR0FBQXFDLFNBQUEsQ0FBTHJDLEtBQUs7RUFDWDVCLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDMEIsS0FBSyxDQUFDO0VBQ2xCNUIsT0FBTyxDQUFDRSxHQUFHLENBQUMsc0JBQXNCLENBQUM7O0VBRW5DO0VBQ0E7O0VBRUEsSUFBTWdFLFNBQVMsR0FBR3RDLEtBQUssQ0FBQytCLElBQUksQ0FBQyxVQUFDQyxJQUFJO0lBQUEsT0FBS0EsSUFBSSxDQUFDM0IsS0FBSyxLQUFLQSxLQUFLO0VBQUEsRUFBQztFQUM1RGpDLE9BQU8sQ0FBQ0UsR0FBRyxDQUFDLCtCQUErQixHQUFHZ0UsU0FBUyxDQUFDM0IsVUFBVSxDQUFDO0VBRW5FLElBQUkyQixTQUFTLEVBQUU7SUFDYixJQUFJaEMsSUFBSSxJQUFJLENBQUMsRUFBRTtNQUNiZ0MsU0FBUyxDQUFDM0IsVUFBVSxJQUFJLENBQUM7TUFDekJ2QyxPQUFPLENBQUNFLEdBQUcsQ0FBQyx5QkFBeUIsR0FBR2dFLFNBQVMsQ0FBQzNCLFVBQVUsQ0FBQztJQUMvRCxDQUFDLE1BQU0sSUFBSUwsSUFBSSxJQUFJLENBQUMsRUFBRTtNQUNwQmdDLFNBQVMsQ0FBQzNCLFVBQVUsR0FBRyxDQUFDO01BQ3hCdkMsT0FBTyxDQUFDRSxHQUFHLENBQUMseUJBQXlCLEdBQUdnRSxTQUFTLENBQUMzQixVQUFVLENBQUM7SUFDL0Q7SUFFQSxJQUFJMkIsU0FBUyxDQUFDM0IsVUFBVSxJQUFJLENBQUMsRUFBRTtNQUM3QixJQUFNNEIsS0FBSyxHQUFHdkMsS0FBSyxDQUFDd0MsT0FBTyxDQUFDRixTQUFTLENBQUM7TUFDdENsRSxPQUFPLENBQUNFLEdBQUcsQ0FBQyxpQkFBaUIsR0FBR2lFLEtBQUssQ0FBQztNQUN0QyxJQUFJQSxLQUFLLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDaEJ2QyxLQUFLLENBQUN5QyxNQUFNLENBQUNGLEtBQUssRUFBRSxDQUFDLENBQUM7UUFFdEIsSUFBTXpCLEdBQUcsR0FDUCw0REFBNEQ7UUFDOUQsSUFBTUMsS0FBSyxHQUFHLENBQUNWLEtBQUssQ0FBQztRQUVyQjFDLElBQUksQ0FBQ3FELEtBQUssQ0FBQ0YsR0FBRyxFQUFFQyxLQUFLLEVBQUUsVUFBQzVDLEdBQUcsRUFBRThDLE1BQU0sRUFBRUMsTUFBTSxFQUFLO1VBQzlDLElBQUkvQyxHQUFHLEVBQUUsTUFBTUEsR0FBRztVQUNsQkMsT0FBTyxDQUFDRSxHQUFHLENBQUMyQyxNQUFNLENBQUM7UUFDckIsQ0FBQyxDQUFDO01BQ0o7SUFDRjtJQUNBN0MsT0FBTyxDQUFDRSxHQUFHLENBQUMseUJBQXlCLEdBQUdnRSxTQUFTLENBQUMzQixVQUFVLENBQUM7SUFDN0R2QyxPQUFPLENBQUNFLEdBQUcsQ0FBQzBCLEtBQUssQ0FBQztFQUNwQjtFQUVBLE9BQU9GLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLFlBQVksRUFBRTtJQUFFQyxLQUFLLEVBQUxBO0VBQU0sQ0FBQyxDQUFDO0FBQzVDLENBQUMsQ0FBQzs7QUFFRjs7QUFFQXpCLEdBQUcsQ0FBQ0ssR0FBRyxDQUFDLFVBQUNULEdBQUcsRUFBRTBCLEdBQUcsRUFBRUMsR0FBRyxFQUFFNEMsSUFBSSxFQUFLO0VBQy9CNUMsR0FBRyxDQUFDb0MsTUFBTSxDQUFDUyxPQUFPLEdBQUd4RSxHQUFHLENBQUN3RSxPQUFPO0VBQ2hDN0MsR0FBRyxDQUFDb0MsTUFBTSxDQUFDN0QsS0FBSyxHQUFHUyxPQUFPLENBQUNDLEdBQUcsQ0FBQzZELFFBQVEsS0FBSyxhQUFhLEdBQUd6RSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0VBQ3BFMkIsR0FBRyxDQUFDK0MsTUFBTSxDQUFDMUUsR0FBRyxDQUFDMEUsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDOUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztBQUMvQyxDQUFDLENBQUM7QUFFRixJQUFNK0MsYUFBYSxHQUFHdkUsR0FBRyxDQUFDd0UsTUFBTSxDQUFDeEUsR0FBRyxDQUFDcUIsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFO0VBQUEsT0FDaER4QixPQUFPLENBQUNFLEdBQUcscUNBQXFDLENBQUM7QUFBQSxDQUNuRCxDQUFDOztBQUVEO0FBQ0FmLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQ3VGLGFBQWEsRUFBRXZFLEdBQUcsQ0FBQyJ9","map":{"version":3,"names":["express","require","session","mysql","cors","conn","createConnection","host","port","user","password","database","connect","err","console","error","log","app","corsOptions","origin","methods","credentials","use","set","process","env","PORT","__dirname","json","urlencoded","extended","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","get","req","res","render","rooms","Array","post","_req$body","body","title","auth","roomId","sessionID","Date","now","totalCount","_app$get","push","sql","value","query","result","fields","clients","forEach","client","location","readyState","OPEN","send","JSON","stringify","redirect","concat","_app$get$rooms$find","find","room","params","locals","targetRoom","_req$body2","_app$get2","foundRoom","index","indexOf","splice","next","message","NODE_ENV","status","expressServer","listen"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["app.js"],"sourcesContent":["const express = require(\"express\");\r\nconst session = require(\"express-session\");\r\nconst mysql = require(\"mysql\");\r\nconst cors = require(\"cors\");\r\n\r\nconst conn = mysql.createConnection({\r\n  host: \"175.198.206.137\",\r\n  port: 3306,\r\n  user: \"q\",\r\n  password: \"q\",\r\n  database: \"follaw\",\r\n});\r\n\r\nconn.connect((err) => {\r\n  if (err) {\r\n    console.error(\"MySQL 연결 오류\");\r\n    return;\r\n  }\r\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\r\n});\r\n\r\nconst app = express();\r\n\r\nconst corsOptions = {\r\n  origin: \"http://localhost:3001/videoIndex\",\r\n  methods: \"GET,HEAD,PUT,PATCH,POST,DELETE\",\r\n  credentials: true,\r\n};\r\n\r\napp.use(cors(corsOptions));\r\n\r\n// app.use(cors());\r\n\r\napp.set(\"port\", process.env.PORT || 3001);\r\napp.set(\"views\", __dirname + \"/views\");\r\n// app.set(\"views\", path.join(__dirname, \"/views\"));\r\napp.set(\"view engine\", \"pug\");\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\n// app.use(\"/public\", express.static(path.join(__dirname, \"/public\")));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(\r\n  session({\r\n    resave: false,\r\n    saveUninitialized: false,\r\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\r\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\r\n    secret: process.env.COOKIE_SECRET || \"secret\",\r\n    cookie: {\r\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\r\n      httpOnly: true,\r\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\r\n      secure: false,\r\n    },\r\n  })\r\n);\r\n// app.use((req, res, next) => {\r\n//   res.header(\"Access-Control-Allow-Origin\", \"*\"); // 모든 출처를 허용하려면 '*'를 사용합니다.\r\n//   res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\r\n//   res.header(\r\n//     \"Access-Control-Allow-Headers\",\r\n//     \"Origin, X-Requested-With, Content-Type, Accept, Authorization\"\r\n//   );\r\n//   next();\r\n// });\r\n\r\napp.get(\"/\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\n//************** 화상 시작 **************/\r\napp.set(\"dummyDb2\", { rooms: new Array() });\r\n\r\napp.get(\"/videoIndex\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\napp.post(\"/videoIndex\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\napp.post(\"/videoIndex/newRoom\", (req, res) => {\r\n  const { title, auth, user } = req.body;\r\n  const roomId = req.sessionID + Date.now();\r\n  let totalCount = 0;\r\n  const { rooms } = app.get(\"dummyDb2\");\r\n\r\n  if (auth == 0) {\r\n    totalCount += 1;\r\n  }\r\n\r\n  console.log(\"app.js / user :\" + user);\r\n\r\n  rooms.push({ title, roomId, totalCount });\r\n  console.log(\"app.js / newRoom : \" + rooms);\r\n\r\n  const sql =\r\n    \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(1, ?, ?, now())\";\r\n  const value = [title, user];\r\n\r\n  conn.query(sql, value, (err, result, fields) => {\r\n    if (err) throw err;\r\n    console.log(result);\r\n  });\r\n\r\n  app.get(\"wss\").clients.forEach((client) => {\r\n    if (client.location === \"videoIndex\" && client.readyState === client.OPEN)\r\n      client.send(JSON.stringify(rooms));\r\n  });\r\n  return res.redirect(`/video/${roomId}`);\r\n});\r\n\r\napp.get(\"/video/:roomId\", (req, res) => {\r\n  const { user } = req.query;\r\n  console.log(\"/video/:roomId  >>> user : \" + user);\r\n  const { title } = app\r\n    .get(\"dummyDb2\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\r\n  console.log(\"app.js/title :\" + title);\r\n  res.locals.title = title;\r\n\r\n  const targetRoom = app\r\n    .get(\"dummyDb2\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\r\n  targetRoom.totalCount += 1;\r\n\r\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\r\n\r\n  const sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\r\n  const value = [user, title];\r\n\r\n  conn.query(sql, value, (err, result, fields) => {\r\n    if (err) throw err;\r\n    console.log(result);\r\n  });\r\n\r\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\r\n  res.render(\"video\");\r\n});\r\n\r\napp.post(\"/videoIndex/leave-room\", (req, res) => {\r\n  const { title, auth } = req.body;\r\n  console.log(\"app.js/title :\" + title);\r\n  console.log(\"app.js/auth :\" + auth);\r\n  let { rooms } = app.get(\"dummyDb2\");\r\n  console.log(rooms);\r\n  console.log(\"--------------------\");\r\n\r\n  // rooms.totalCount += count;\r\n  // console.log(\"totalCount : \" + totalCount);\r\n\r\n  const foundRoom = rooms.find((room) => room.title === title);\r\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\r\n\r\n  if (foundRoom) {\r\n    if (auth == 1) {\r\n      foundRoom.totalCount -= 1;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    } else if (auth == 0) {\r\n      foundRoom.totalCount = 0;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    }\r\n\r\n    if (foundRoom.totalCount == 0) {\r\n      const index = rooms.indexOf(foundRoom);\r\n      console.log(\"app.js/index : \" + index);\r\n      if (index !== -1) {\r\n        rooms.splice(index, 1);\r\n\r\n        const sql =\r\n          \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\r\n        const value = [title];\r\n\r\n        conn.query(sql, value, (err, result, fields) => {\r\n          if (err) throw err;\r\n          console.log(result);\r\n        });\r\n      }\r\n    }\r\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\r\n    console.log(rooms);\r\n  }\r\n\r\n  return res.render(\"videoIndex\", { rooms });\r\n});\r\n\r\n//************** 화상 끝 **************/\r\n\r\napp.use((err, req, res, next) => {\r\n  res.locals.message = err.message;\r\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\r\n  res.status(err.status || 500).render(\"error\");\r\n});\r\n\r\nconst expressServer = app.listen(app.get(\"port\"), () =>\r\n  console.log(`Listening on http://localhost:3001`)\r\n);\r\n\r\n// socket\r\nrequire(\"./socket\")(expressServer, app);\r\n"],"mappings":"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"}},"mtime":1706787226614},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/videoIndex\") {\n      ws.location = \"videoIndex\";\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\n    } else if (req.url.startsWith(\"/video/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      console.log(\"socket >>> ws.location : \" + ws.location);\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) {\n            if (data.type === \"enter\") {\n              var welcome = data.data;\n              console.log(\"welcome *********************\");\n              console.log(welcome);\n              client.send(JSON.stringify({\n                type: \"enter\",\n                data: welcome\n              }));\n            } else if (data.type === \"name\") {\n              var clientName = data.data;\n              console.log(\"clientName ******************\");\n              console.log(clientName);\n              client.send(JSON.stringify({\n                type: \"name\",\n                data: clientName\n              }));\n            } else if (data.type === \"offer\") {\n              var offerA = data.data;\n              console.log(\"offerA ************************\");\n              console.log(offerA);\n              client.send(JSON.stringify({\n                type: \"offer\",\n                data: offerA\n              }));\n            } else if (data.type === \"answer\") {\n              var answer = data.data;\n              console.log(\"answer ************************\");\n              console.log(answer);\n              client.send(JSON.stringify({\n                type: \"answer\",\n                data: answer\n              }));\n            } else if (data.type === \"ice\") {\n              var ice = data.data;\n              console.log(\"ice ************************\");\n              console.log(ice);\n              client.send(JSON.stringify({\n                type: \"ice\",\n                data: ice\n              }));\n            } else if (data.type === \"chat\") {\n              var _message = data.data;\n              console.log(\"message ************************\");\n              console.log(_message);\n              client.send(JSON.stringify({\n                type: \"chat\",\n                data: _message\n              }));\n            } else if (data.type === \"delete\") {\n              var title = data.data;\n              console.log(\"title ************************\");\n              console.log(title);\n              client.send(JSON.stringify({\n                type: \"delete\",\n                data: title\n              }));\n            }\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJvZmZlckEiLCJhbnN3ZXIiLCJpY2UiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFx2aWRlb1xcIiwic291cmNlcyI6WyJzb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd3MgPSByZXF1aXJlKFwid3NcIik7XHJcblxyXG4vL21vZHVsZS5leHBvcnRzIDog66qo65OI7J2EIOuCtOuztOuCtOuKlCDrjbAg7IKs7Jqp65CY64qUIO2KueyImO2VnCDqsJ3ssrRcclxuLy/ri6Trpbgg7YyM7J287JeQ7IScIO2VtOuLuSDrqqjrk4jsnYQg6rCA7KC47JmAIOyCrOyaqSDqsIDriqUocmVxdWlyZSgpIOydtOyaqSlcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcclxuICAvL3dzIOuqqOuTiOydmCBTZXJ2ZXIg7YG0656Y7IqkKFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY6rOgIOq0gOumrCnrpbwg7IKs7Jqp7ZWY7JesIFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY64qUIOq1rOusuFxyXG4gIGNvbnN0IHdzcyA9IG5ldyB3cy5TZXJ2ZXIoeyBzZXJ2ZXIgfSk7XHJcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXHJcbiAgLy8gdXNlZCBhdCBhcHAucG9zdCgnbmV3cm9vbScpIG9uIGFwcC5qc1xyXG4gIGFwcC5zZXQoXCJ3c3NcIiwgd3NzKTtcclxuXHJcbiAgLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxuICB3c3Mub24oXCJjb25uZWN0aW9uXCIsICh3cywgcmVxKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIldlYlNvY2tldCBjb25uZWN0ZWQgdG86IFwiICsgcmVxLnVybCk7XHJcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvdmlkZW9JbmRleFwiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJ2aWRlb0luZGV4XCI7XHJcbiAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoYXBwLmdldChcImR1bW15RGIyXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi92aWRlby9cIikpIHtcclxuICAgICAgd3MubG9jYXRpb24gPSByZXEudXJsLnNwbGl0KFwiL1wiKVsyXTtcclxuICAgICAgY29uc29sZS5sb2coXCJzb2NrZXQgPj4+IHdzLmxvY2F0aW9uIDogXCIgKyB3cy5sb2NhdGlvbik7XHJcbiAgICAgIHdzLm9uKFwibWVzc2FnZVwiLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UpO1xyXG4gICAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb25cclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcImVudGVyXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCB3ZWxjb21lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2VsY29tZSAqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cod2VsY29tZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImVudGVyXCIsIGRhdGE6IHdlbGNvbWUgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJuYW1lXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBjbGllbnROYW1lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2xpZW50TmFtZSAqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coY2xpZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm5hbWVcIiwgZGF0YTogY2xpZW50TmFtZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcIm9mZmVyXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBvZmZlckEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvZmZlckEgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9mZmVyQSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm9mZmVyXCIsIGRhdGE6IG9mZmVyQSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImFuc3dlclwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYW5zd2VyICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbnN3ZXIpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJhbnN3ZXJcIiwgZGF0YTogYW5zd2VyIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiaWNlXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpY2UgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpY2UgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGljZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImljZVwiLCBkYXRhOiBpY2UgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjaGF0XCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWVzc2FnZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImRlbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aXRsZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdzLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICBhcHAubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVycm9yIDoge307XHJcbiAgICAgIGFwcC5yZW5kZXIoXCJlcnJvclwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9uKFwiY2xvc2VcIiwgKCkgPT4gY29uc29sZS5sb2coYCR7cmVxLnVybH0gY29ubmVjdGlvbiBjbG9zZWApKTtcclxuICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEI7QUFDQTtBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxNQUFNLEVBQUVDLEdBQUcsRUFBSztFQUNoQztFQUNBLElBQU1DLEdBQUcsR0FBRyxJQUFJTixFQUFFLENBQUNPLE1BQU0sQ0FBQztJQUFFSCxNQUFNLEVBQU5BO0VBQU8sQ0FBQyxDQUFDO0VBQ3JDO0VBQ0E7RUFDQUMsR0FBRyxDQUFDRyxHQUFHLENBQUMsS0FBSyxFQUFFRixHQUFHLENBQUM7O0VBRW5CO0VBQ0FBLEdBQUcsQ0FBQ0csRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFDVCxFQUFFLEVB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","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","offerA","answer","ice","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/videoIndex\") {\r\n      ws.location = \"videoIndex\";\r\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\r\n    } else if (req.url.startsWith(\"/video/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      console.log(\"socket >>> ws.location : \" + ws.location);\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location\r\n          ) {\r\n            if (data.type === \"enter\") {\r\n              const welcome = data.data;\r\n              console.log(\"welcome *********************\");\r\n              console.log(welcome);\r\n              client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n            } else if (data.type === \"name\") {\r\n              const clientName = data.data;\r\n              console.log(\"clientName ******************\");\r\n              console.log(clientName);\r\n              client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n            } else if (data.type === \"offer\") {\r\n              const offerA = data.data;\r\n              console.log(\"offerA ************************\");\r\n              console.log(offerA);\r\n              client.send(JSON.stringify({ type: \"offer\", data: offerA }));\r\n            } else if (data.type === \"answer\") {\r\n              const answer = data.data;\r\n              console.log(\"answer ************************\");\r\n              console.log(answer);\r\n              client.send(JSON.stringify({ type: \"answer\", data: answer }));\r\n            } else if (data.type === \"ice\") {\r\n              const ice = data.data;\r\n              console.log(\"ice ************************\");\r\n              console.log(ice);\r\n              client.send(JSON.stringify({ type: \"ice\", data: ice }));\r\n            } else if (data.type === \"chat\") {\r\n              const message = data.data;\r\n              console.log(\"message ************************\");\r\n              console.log(message);\r\n              client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n            } else if (data.type === \"delete\") {\r\n              const title = data.data;\r\n              console.log(\"title ************************\");\r\n              console.log(title);\r\n              client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706753379645},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/videoIndex\") {\n      ws.location = \"videoIndex\";\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\n    } else if (req.url.startsWith(\"/video/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      console.log(\"socket >>> ws.location : \" + ws.location);\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) {\n            if (data.type === \"enter\") {\n              var welcome = data.data;\n              console.log(\"welcome *********************\");\n              console.log(welcome);\n              client.send(JSON.stringify({\n                type: \"enter\",\n                data: welcome\n              }));\n            } else if (data.type === \"name\") {\n              var clientName = data.data;\n              console.log(\"clientName ******************\");\n              console.log(clientName);\n              client.send(JSON.stringify({\n                type: \"name\",\n                data: clientName\n              }));\n            } else if (data.type === \"offer\") {\n              var offerA = data.data;\n              console.log(\"offerA ************************\");\n              console.log(offerA);\n              client.send(JSON.stringify({\n                type: \"offer\",\n                data: offerA\n              }));\n            } else if (data.type === \"answer\") {\n              var answer = data.data;\n              console.log(\"answer ************************\");\n              console.log(answer);\n              client.send(JSON.stringify({\n                type: \"answer\",\n                data: answer\n              }));\n            } else if (data.type === \"ice\") {\n              var ice = data.data;\n              console.log(\"ice ************************\");\n              console.log(ice);\n              client.send(JSON.stringify({\n                type: \"ice\",\n                data: ice\n              }));\n            } else if (data.type === \"chat\") {\n              var _message = data.data;\n              console.log(\"message ************************\");\n              console.log(_message);\n              client.send(JSON.stringify({\n                type: \"chat\",\n                data: _message\n              }));\n            } else if (data.type === \"delete\") {\n              var title = data.data;\n              console.log(\"title ************************\");\n              console.log(title);\n              client.send(JSON.stringify({\n                type: \"delete\",\n                data: title\n              }));\n            }\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJvZmZlckEiLCJhbnN3ZXIiLCJpY2UiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFx2aWRlb1xcIiwic291cmNlcyI6WyJzb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd3MgPSByZXF1aXJlKFwid3NcIik7XHJcblxyXG4vL21vZHVsZS5leHBvcnRzIDog66qo65OI7J2EIOuCtOuztOuCtOuKlCDrjbAg7IKs7Jqp65CY64qUIO2KueyImO2VnCDqsJ3ssrRcclxuLy/ri6Trpbgg7YyM7J287JeQ7IScIO2VtOuLuSDrqqjrk4jsnYQg6rCA7KC47JmAIOyCrOyaqSDqsIDriqUocmVxdWlyZSgpIOydtOyaqSlcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcclxuICAvL3dzIOuqqOuTiOydmCBTZXJ2ZXIg7YG0656Y7IqkKFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY6rOgIOq0gOumrCnrpbwg7IKs7Jqp7ZWY7JesIFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY64qUIOq1rOusuFxyXG4gIGNvbnN0IHdzcyA9IG5ldyB3cy5TZXJ2ZXIoeyBzZXJ2ZXIgfSk7XHJcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXHJcbiAgLy8gdXNlZCBhdCBhcHAucG9zdCgnbmV3cm9vbScpIG9uIGFwcC5qc1xyXG4gIGFwcC5zZXQoXCJ3c3NcIiwgd3NzKTtcclxuXHJcbiAgLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxuICB3c3Mub24oXCJjb25uZWN0aW9uXCIsICh3cywgcmVxKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIldlYlNvY2tldCBjb25uZWN0ZWQgdG86IFwiICsgcmVxLnVybCk7XHJcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvdmlkZW9JbmRleFwiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJ2aWRlb0luZGV4XCI7XHJcbiAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoYXBwLmdldChcImR1bW15RGIyXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi92aWRlby9cIikpIHtcclxuICAgICAgd3MubG9jYXRpb24gPSByZXEudXJsLnNwbGl0KFwiL1wiKVsyXTtcclxuICAgICAgY29uc29sZS5sb2coXCJzb2NrZXQgPj4+IHdzLmxvY2F0aW9uIDogXCIgKyB3cy5sb2NhdGlvbik7XHJcbiAgICAgIHdzLm9uKFwibWVzc2FnZVwiLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UpO1xyXG4gICAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb25cclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcImVudGVyXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCB3ZWxjb21lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwid2VsY29tZSAqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cod2VsY29tZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImVudGVyXCIsIGRhdGE6IHdlbGNvbWUgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJuYW1lXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBjbGllbnROYW1lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2xpZW50TmFtZSAqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coY2xpZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm5hbWVcIiwgZGF0YTogY2xpZW50TmFtZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcIm9mZmVyXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBvZmZlckEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvZmZlckEgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9mZmVyQSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm9mZmVyXCIsIGRhdGE6IG9mZmVyQSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImFuc3dlclwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYW5zd2VyICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbnN3ZXIpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJhbnN3ZXJcIiwgZGF0YTogYW5zd2VyIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiaWNlXCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBpY2UgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpY2UgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGljZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImljZVwiLCBkYXRhOiBpY2UgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjaGF0XCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWVzc2FnZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImRlbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aXRsZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdzLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICBhcHAubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVycm9yIDoge307XHJcbiAgICAgIGFwcC5yZW5kZXIoXCJlcnJvclwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9uKFwiY2xvc2VcIiwgKCkgPT4gY29uc29sZS5sb2coYCR7cmVxLnVybH0gY29ubmVjdGlvbiBjbG9zZWApKTtcclxuICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEI7QUFDQTtBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxNQUFNLEVBQUVDLEdBQUcsRUFBSztFQUNoQztFQUNBLElBQU1DLEdBQUcsR0FBRyxJQUFJTixFQUFFLENBQUNPLE1BQU0sQ0FBQztJQUFFSCxNQUFNLEVBQU5BO0VBQU8sQ0FBQyxDQUFDO0VBQ3JDO0VBQ0E7RUFDQUMsR0FBRyxDQUFDRyxHQUFHLENBQUMsS0FBSyxFQUFFRixHQUFHLENBQUM7O0VBRW5CO0VBQ0FBLEdBQUcsQ0FBQ0csRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFDVCxFQUFFLEVBQUVVLEdBQUcsRUFBSztJQUNoQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCLEdBQUdGLEdBQUcsQ0FBQ0csR0FBRyxDQUFDO0lBQ2pELElBQUlILEdBQUcsQ0FBQ0csR0FBRyxLQUFLLGFBQWEsRUFBRTtNQUM3QmIsRUFBRSxDQUFDYyxRQUFRLEdBQUcsWUFBWTtNQUMxQmQsRUFBRSxDQUFDZSxJQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDWixHQUFHLENBQUNhLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQ0MsS0FBSyxDQUFDLENBQUM7SUFDcEQsQ0FBQyxNQUFNLElBQUlULEdBQUcsQ0FBQ0csR0FBRyxDQUFDTyxVQUFVLENBQUMsU0FBUyxDQUFDLEVBQUU7TUFDeENwQixFQUFFLENBQUNjLFFBQVEsR0FBR0osR0FBRyxDQUFDRyxHQUFHLENBQUNRLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDbkNWLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDJCQUEyQixHQUFHWixFQUFFLENBQUNjLFFBQVEsQ0FBQztNQUN0RGQsRUFBRSxDQUFDUyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQUNhLE9BQU8sRUFBSztRQUM1QixJQUFNQyxJQUFJLEdBQUdQLElBQUksQ0FBQ1EsS0FBSyxDQUFDRixPQUFPLENBQUM7UUFDaENoQixHQUFHLENBQUNtQixPQUFPLENBQUNDLE9BQU8sQ0FBQyxVQUFDQyxNQUFNLEVBQUs7VUFDOUIsSUFDRUEsTUFBTSxLQUFLM0IsRUFBRSxJQUNiMkIsTUFBTSxDQUFDQyxVQUFVLEtBQUs1QixFQUFFLENBQUM2QixJQUFJLElBQzdCRixNQUFNLENBQUNiLFFBQVEsS0FBS2QsRUFBRSxDQUFDYyxRQUFRLEVBQy9CO1lBQ0EsSUFBSVMsSUFBSSxDQUFDTyxJQUFJLEtBQUssT0FBTyxFQUFFO2NBQ3pCLElBQU1DLE9BQU8sR0FBR1IsSUFBSSxDQUFDQSxJQUFJO2NBQ3pCWixPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztjQUM1Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNtQixPQUFPLENBQUM7Y0FDcEJKLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLE9BQU87Z0JBQUVQLElBQUksRUFBRVE7Y0FBUSxDQUFDLENBQUMsQ0FBQztZQUMvRCxDQUFDLE1BQU0sSUFBSVIsSUFBSSxDQUFDTyxJQUFJLEtBQUssTUFBTSxFQUFFO2NBQy9CLElBQU1FLFVBQVUsR0FBR1QsSUFBSSxDQUFDQSxJQUFJO2NBQzVCWixPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztjQUM1Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNvQixVQUFVLENBQUM7Y0FDdkJMLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLE1BQU07Z0JBQUVQLElBQUksRUFBRVM7Y0FBVyxDQUFDLENBQUMsQ0FBQztZQUNqRSxDQUFDLE1BQU0sSUFBSVQsSUFBSSxDQUFDTyxJQUFJLEtBQUssT0FBTyxFQUFFO2NBQ2hDLElBQU1HLE1BQU0sR0FBR1YsSUFBSSxDQUFDQSxJQUFJO2NBQ3hCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQztjQUM5Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNxQixNQUFNLENBQUM7Y0FDbkJOLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLE9BQU87Z0JBQUVQLElBQUksRUFBRVU7Y0FBTyxDQUFDLENBQUMsQ0FBQztZQUM5RCxDQUFDLE1BQU0sSUFBSVYsSUFBSSxDQUFDTyxJQUFJLEtBQUssUUFBUSxFQUFFO2NBQ2pDLElBQU1JLE1BQU0sR0FBR1gsSUFBSSxDQUFDQSxJQUFJO2NBQ3hCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQztjQUM5Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNzQixNQUFNLENBQUM7Y0FDbkJQLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLFFBQVE7Z0JBQUVQLElBQUksRUFBRVc7Y0FBTyxDQUFDLENBQUMsQ0FBQztZQUMvRCxDQUFDLE1BQU0sSUFBSVgsSUFBSSxDQUFDTyxJQUFJLEtBQUssS0FBSyxFQUFFO2NBQzlCLElBQU1LLEdBQUcsR0FBR1osSUFBSSxDQUFDQSxJQUFJO2NBQ3JCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQztjQUMzQ0QsT0FBTyxDQUFDQyxHQUFHLENBQUN1QixHQUFHLENBQUM7Y0FDaEJSLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLEtBQUs7Z0JBQUVQLElBQUksRUFBRVk7Y0FBSSxDQUFDLENBQUMsQ0FBQztZQUN6RCxDQUFDLE1BQU0sSUFBSVosSUFBSSxDQUFDTyxJQUFJLEtBQUssTUFBTSxFQUFFO2NBQy9CLElBQU1SLFFBQU8sR0FBR0MsSUFBSSxDQUFDQSxJQUFJO2NBQ3pCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztjQUMvQ0QsT0FBTyxDQUFDQyxHQUFHLENBQUNVLFFBQU8sQ0FBQztjQUNwQkssTUFBTSxDQUFDWixJQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2dCQUFFYSxJQUFJLEVBQUUsTUFBTTtnQkFBRVAsSUFBSSxFQUFFRDtjQUFRLENBQUMsQ0FBQyxDQUFDO1lBQzlELENBQUMsTUFBTSxJQUFJQyxJQUFJLENBQUNPLElBQUksS0FBSyxRQUFRLEVBQUU7Y0FDakMsSUFBTU0sS0FBSyxHQUFHYixJQUFJLENBQUNBLElBQUk7Y0FDdkJaLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO2NBQzdDRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ3dCLEtBQUssQ0FBQztjQUNsQlQsTUFBTSxDQUFDWixJQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2dCQUFFYSxJQUFJLEVBQUUsUUFBUTtnQkFBRVAsSUFBSSxFQUFFYTtjQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzlEO1VBQ0Y7UUFDRixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7SUFDSjtJQUVBcEMsRUFBRSxDQUFDUyxFQUFFLENBQUMsT0FBTyxFQUFFLFVBQUM0QixLQUFLLEVBQUs7TUFDeEIxQixPQUFPLENBQUMwQixLQUFLLENBQUNBLEtBQUssQ0FBQztNQUNwQmhDLEdBQUcsQ0FBQ2lDLE1BQU0sQ0FBQ2hCLE9BQU8sR0FBR2UsS0FBSyxDQUFDZixPQUFPO01BQ2xDakIsR0FBRyxDQUFDaUMsTUFBTSxDQUFDRCxLQUFLLEdBQUdFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHSixLQUFLLEdBQUcsQ0FBQyxDQUFDO01BQ3RFaEMsR0FBRyxDQUFDcUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNyQixDQUFDLENBQUM7SUFFRjFDLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRTtNQUFBLE9BQU1FLE9BQU8sQ0FBQ0MsR0FBRyxJQUFBK0IsTUFBQSxDQUFJakMsR0FBRyxDQUFDRyxHQUFHLHNCQUFtQixDQUFDO0lBQUEsRUFBQztFQUNsRSxDQUFDLENBQUM7QUFDSixDQUFDIn0=","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","offerA","answer","ice","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/videoIndex\") {\r\n      ws.location = \"videoIndex\";\r\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\r\n    } else if (req.url.startsWith(\"/video/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      console.log(\"socket >>> ws.location : \" + ws.location);\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location\r\n          ) {\r\n            if (data.type === \"enter\") {\r\n              const welcome = data.data;\r\n              console.log(\"welcome *********************\");\r\n              console.log(welcome);\r\n              client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n            } else if (data.type === \"name\") {\r\n              const clientName = data.data;\r\n              console.log(\"clientName ******************\");\r\n              console.log(clientName);\r\n              client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n            } else if (data.type === \"offer\") {\r\n              const offerA = data.data;\r\n              console.log(\"offerA ************************\");\r\n              console.log(offerA);\r\n              client.send(JSON.stringify({ type: \"offer\", data: offerA }));\r\n            } else if (data.type === \"answer\") {\r\n              const answer = data.data;\r\n              console.log(\"answer ************************\");\r\n              console.log(answer);\r\n              client.send(JSON.stringify({ type: \"answer\", data: answer }));\r\n            } else if (data.type === \"ice\") {\r\n              const ice = data.data;\r\n              console.log(\"ice ************************\");\r\n              console.log(ice);\r\n              client.send(JSON.stringify({ type: \"ice\", data: ice }));\r\n            } else if (data.type === \"chat\") {\r\n              const message = data.data;\r\n              console.log(\"message ************************\");\r\n              console.log(message);\r\n              client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n            } else if (data.type === \"delete\") {\r\n              const title = data.data;\r\n              console.log(\"title ************************\");\r\n              console.log(title);\r\n              client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706753379645},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw new Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw new Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\nvar express = require(\"express\");\nvar session = require(\"express-session\");\nvar cors = require(\"cors\");\nvar mysql = require(\"mysql\");\nvar conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = express();\n\n// CORS 설정\n// const corsOptions = {\n//   origin: [\"http://175.198.206.137:3000\", \"http://localhost:8080\"],\n//   methods: \"GET,HEAD,PUT,PATCH,POST,DELETE\",\n//   credentials: true,\n// };\n// app.use(cors(corsOptions));\n\napp.use(cors());\napp.set(\"port\", process.env.PORT || 3000);\napp.set(\"views\", __dirname + \"/views\");\napp.set(\"view engine\", \"pug\");\napp.use(\"/public\", express[\"static\"](__dirname + \"/public\"));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(session({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n// app.use((req, res, next) => {\n//   res.header(\"Access-Control-Allow-Origin\", \"*\");\n//   res.header(\n//     \"Access-Control-Allow-Headers\",\n//     \"Origin, X-Requested-With, Content-Type, Accept\"\n//   );\n//   next();\n// });\n\n//************** 채팅 시작 **************/\napp.set(\"dummyDb\", {\n  rooms: new Array()\n});\napp.get(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.post(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.post(\"/newRoom\", function (req, res) {\n  var _req$body = req.body,\n    title = _req$body.title,\n    auth = _req$body.auth,\n    user = _req$body.user;\n  var roomId = req.sessionID + Date.now();\n  var totalCount = 0;\n  var _app$get = app.get(\"dummyDb\"),\n    rooms = _app$get.rooms;\n  if (auth == 0) {\n    totalCount += 1;\n  }\n  console.log(\"app.js / user :\" + user);\n  rooms.push({\n    title: title,\n    roomId: roomId,\n    totalCount: totalCount\n  });\n  console.log(\"app.js / newRoom >>> title : \" + title);\n  var sql = \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(0, ?, ?, now())\";\n  var value = [title, user];\n  var fs = require(\"fs\").promises; // 프로미스 기반의 fs 모듈 사용\n\n  var executeQuery = function executeQuery(sql, values) {\n    return new Promise(function (resolve, reject) {\n      conn.query(sql, values, function (err, result, fields) {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(result);\n        }\n      });\n    });\n  };\n  var saveChatHistory = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(title, user) {\n      var result, getChatIdx, chatResult, chat_idx, getChatFolderPathQuery, folderPathResult, chatLogPath, today, year, month, day, dateInfo, data, jsonData, fileName, filePath, insert_chat_history_sql, insertValues;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return executeQuery(sql, value);\n          case 3:\n            result = _context.sent;\n            console.log(result);\n            getChatIdx = \"select * from chat where chat_title = ? and chatting_closed is null order by chat_idx desc limit 1\";\n            _context.next = 8;\n            return executeQuery(getChatIdx, title);\n          case 8:\n            chatResult = _context.sent;\n            console.log(chatResult);\n            chat_idx = chatResult[0][\"chat_idx\"];\n            console.log(\"\\uAC00\\uC838\\uC628 chat_idx : \".concat(chat_idx));\n            getChatFolderPathQuery = \"select * from system where system_name = 'chat_log'\";\n            _context.next = 15;\n            return executeQuery(getChatFolderPathQuery);\n          case 15:\n            folderPathResult = _context.sent;\n            chatLogPath = folderPathResult[0][\"system_path\"];\n            console.log(chatLogPath);\n            today = new Date();\n            year = today.getFullYear();\n            month = String(today.getMonth() + 1).padStart(2, \"0\");\n            day = String(today.getDate()).padStart(2, \"0\");\n            dateInfo = \"\".concat(year).concat(month).concat(day);\n            data = {\n              created: today,\n              user: user\n            };\n            jsonData = JSON.stringify(data);\n            fileName = \"\".concat(dateInfo, \"_\").concat(chat_idx, \".json\");\n            filePath = \"\".concat(chatLogPath, \"/\").concat(fileName);\n            _context.next = 29;\n            return fs.writeFile(filePath, jsonData, \"utf8\");\n          case 29:\n            console.log(\"Json 파일이 생성되었습니다.\");\n            insert_chat_history_sql = \"insert into chat_history (chat_history_file, chat_history_path, chat_idx) VALUES (?, ?, ?)\";\n            insertValues = [fileName, chatLogPath, chat_idx];\n            _context.next = 34;\n            return executeQuery(insert_chat_history_sql, insertValues);\n          case 34:\n            console.log(\"DB에 chat_history 테이블과 연동되었습니다.\");\n            _context.next = 40;\n            break;\n          case 37:\n            _context.prev = 37;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n          case 40:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 37]]);\n    }));\n    return function saveChatHistory(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  saveChatHistory(title, user);\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"index\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/chat/\".concat(roomId));\n});\napp.get(\"/chat/:roomId\", function (req, res) {\n  var user = req.query.user;\n  console.log(\"/chat/:roomId >>> user : \" + user);\n  var _app$get$rooms$find = app.get(\"dummyDb\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  console.log(\"app.js/title :\" + title);\n  res.locals.title = title;\n  var targetRoom = app.get(\"dummyDb\").rooms.find(function (room) {\n    return room.roomId === req.params.roomId;\n  });\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\n  targetRoom.totalCount += 1;\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\n  var sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\n  var value = [user, title];\n  conn.query(sql, value, function (err, result, fields) {\n    if (err) throw err;\n    console.log(result);\n  });\n\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\n// let totalCount = 0;\n\napp.post(\"/leave-room\", function (req, res) {\n  var _req$body2 = req.body,\n    title = _req$body2.title,\n    auth = _req$body2.auth;\n  console.log(\"app.js/title :\" + title);\n  console.log(\"app.js/auth :\" + auth);\n  var _app$get2 = app.get(\"dummyDb\"),\n    rooms = _app$get2.rooms;\n  console.log(rooms);\n  console.log(\"--------------------\");\n\n  // rooms.totalCount += count;\n  // console.log(\"totalCount : \" + totalCount);\n\n  var foundRoom = rooms.find(function (room) {\n    return room.title === title;\n  });\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\n  if (foundRoom) {\n    if (auth == 1) {\n      foundRoom.totalCount -= 1;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    } else if (auth == 0) {\n      foundRoom.totalCount = 0;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    }\n    if (foundRoom.totalCount == 0) {\n      var index = rooms.indexOf(foundRoom);\n      console.log(\"app.js/index : \" + index);\n      if (index !== -1) {\n        rooms.splice(index, 1);\n        var sql = \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\n        var value = [title];\n        conn.query(sql, value, function (err, result, fields) {\n          if (err) throw err;\n          console.log(result);\n        });\n      }\n    }\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\n    console.log(rooms);\n  }\n  return res.render(\"index\", {\n    rooms: rooms\n  });\n});\n\n//************** 채팅 끝 **************/\n\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"Listening on http://localhost:3000\");\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVnZW5lcmF0b3JSdW50aW1lIiwiZSIsInQiLCJyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwibiIsImhhc093blByb3BlcnR5IiwibyIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJpIiwiU3ltYm9sIiwiYSIsIml0ZXJhdG9yIiwiYyIsImFzeW5jSXRlcmF0b3IiLCJ1IiwidG9TdHJpbmdUYWciLCJkZWZpbmUiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ3cmFwIiwiR2VuZXJhdG9yIiwiY3JlYXRlIiwiQ29udGV4dCIsIm1ha2VJbnZva2VNZXRob2QiLCJ0cnlDYXRjaCIsInR5cGUiLCJhcmciLCJjYWxsIiwiaCIsImwiLCJmIiwicyIsInkiLCJHZW5lcmF0b3JGdW5jdGlvbiIsIkdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlIiwicCIsImQiLCJnZXRQcm90b3R5cGVPZiIsInYiLCJ2YWx1ZXMiLCJnIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiZm9yRWFjaCIsIl9pbnZva2UiLCJBc3luY0l0ZXJhdG9yIiwiaW52b2tlIiwiX3R5cGVvZiIsInJlc29sdmUiLCJfX2F3YWl0IiwidGhlbiIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwiRXJyb3IiLCJkb25lIiwibWV0aG9kIiwiZGVsZWdhdGUiLCJtYXliZUludm9rZURlbGVnYXRlIiwic2VudCIsIl9zZW50IiwiZGlzcGF0Y2hFeGNlcHRpb24iLCJhYnJ1cHQiLCJUeXBlRXJyb3IiLCJyZXN1bHROYW1lIiwibmV4dCIsIm5leHRMb2MiLCJwdXNoVHJ5RW50cnkiLCJ0cnlMb2MiLCJjYXRjaExvYyIsImZpbmFsbHlMb2MiLCJhZnRlckxvYyIsInRyeUVudHJpZXMiLCJwdXNoIiwicmVzZXRUcnlFbnRyeSIsImNvbXBsZXRpb24iLCJyZXNldCIsImlzTmFOIiwibGVuZ3RoIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiY29uc3RydWN0b3IiLCJuYW1lIiwibWFyayIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiYXdyYXAiLCJhc3luYyIsIlByb21pc2UiLCJrZXlzIiwicmV2ZXJzZSIsInBvcCIsInByZXYiLCJjaGFyQXQiLCJzbGljZSIsInN0b3AiLCJydmFsIiwiaGFuZGxlIiwiY29tcGxldGUiLCJmaW5pc2giLCJfY2F0Y2giLCJkZWxlZ2F0ZVlpZWxkIiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwicmVqZWN0IiwiX25leHQiLCJfdGhyb3ciLCJrZXkiLCJpbmZvIiwiZXJyb3IiLCJfYXN5bmNUb0dlbmVyYXRvciIsImZuIiwic2VsZiIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVyciIsInVuZGVmaW5lZCIsImV4cHJlc3MiLCJyZXF1aXJlIiwic2Vzc2lvbiIsImNvcnMiLCJteXNxbCIsImNvbm4iLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3QiLCJjb25zb2xlIiwibG9nIiwiYXBwIiwidXNlIiwic2V0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJfX2Rpcm5hbWUiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzZWNyZXQiLCJDT09LSUVfU0VDUkVUIiwiY29va2llIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJyb29tcyIsIkFycmF5IiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicG9zdCIsIl9yZXEkYm9keSIsImJvZHkiLCJ0aXRsZSIsImF1dGgiLCJyb29tSWQiLCJzZXNzaW9uSUQiLCJEYXRlIiwibm93IiwidG90YWxDb3VudCIsIl9hcHAkZ2V0Iiwic3FsIiwiZnMiLCJwcm9taXNlcyIsImV4ZWN1dGVRdWVyeSIsInF1ZXJ5IiwicmVzdWx0IiwiZmllbGRzIiwic2F2ZUNoYXRIaXN0b3J5IiwiX3JlZiIsIl9jYWxsZWUiLCJnZXRDaGF0SWR4IiwiY2hhdFJlc3VsdCIsImNoYXRfaWR4IiwiZ2V0Q2hhdEZvbGRlclBhdGhRdWVyeSIsImZvbGRlclBhdGhSZXN1bHQiLCJjaGF0TG9nUGF0aCIsInRvZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiZGF0ZUluZm8iLCJkYXRhIiwianNvbkRhdGEiLCJmaWxlTmFtZSIsImZpbGVQYXRoIiwiaW5zZXJ0X2NoYXRfaGlzdG9yeV9zcWwiLCJpbnNlcnRWYWx1ZXMiLCJfY2FsbGVlJCIsIl9jb250ZXh0IiwiY29uY2F0IiwiZ2V0RnVsbFllYXIiLCJTdHJpbmciLCJnZXRNb250aCIsInBhZFN0YXJ0IiwiZ2V0RGF0ZSIsImNyZWF0ZWQiLCJKU09OIiwic3RyaW5naWZ5Iiwid3JpdGVGaWxlIiwidDAiLCJfeCIsIl94MiIsImNsaWVudHMiLCJjbGllbnQiLCJsb2NhdGlvbiIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsInJlZGlyZWN0IiwiX2FwcCRnZXQkcm9vbXMkZmluZCIsImZpbmQiLCJyb29tIiwicGFyYW1zIiwibG9jYWxzIiwidGFyZ2V0Um9vbSIsIl9yZXEkYm9keTIiLCJfYXBwJGdldDIiLCJmb3VuZFJvb20iLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJtZXNzYWdlIiwiTk9ERV9FTlYiLCJzdGF0dXMiLCJleHByZXNzU2VydmVyIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFxvcGVuLWNoYXRzXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XHJcbmNvbnN0IHNlc3Npb24gPSByZXF1aXJlKFwiZXhwcmVzcy1zZXNzaW9uXCIpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XHJcblxyXG5jb25zdCBteXNxbCA9IHJlcXVpcmUoXCJteXNxbFwiKTtcclxuY29uc3QgY29ubiA9IG15c3FsLmNyZWF0ZUNvbm5lY3Rpb24oe1xyXG4gIGhvc3Q6IFwiMTc1LjE5OC4yMDYuMTM3XCIsXHJcbiAgcG9ydDogMzMwNixcclxuICB1c2VyOiBcInFcIixcclxuICBwYXNzd29yZDogXCJxXCIsXHJcbiAgZGF0YWJhc2U6IFwiZm9sbGF3XCIsXHJcbn0pO1xyXG5cclxuY29ubi5jb25uZWN0KChlcnIpID0+IHtcclxuICBpZiAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiTXlTUUwg7Jew6rKwIOyYpOulmFwiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY29uc29sZS5sb2coXCJNeVNRTOyXkCDshLHqs7XsoIHsnLzroZwg7Jew6rKw65CY7JeI7Iq164uI64ukLlwiKTtcclxufSk7XHJcblxyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG4vLyBDT1JTIOyEpOyglVxyXG4vLyBjb25zdCBjb3JzT3B0aW9ucyA9IHtcclxuLy8gICBvcmlnaW46IFtcImh0dHA6Ly8xNzUuMTk4LjIwNi4xMzc6MzAwMFwiLCBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MFwiXSxcclxuLy8gICBtZXRob2RzOiBcIkdFVCxIRUFELFBVVCxQQVRDSCxQT1NULERFTEVURVwiLFxyXG4vLyAgIGNyZWRlbnRpYWxzOiB0cnVlLFxyXG4vLyB9O1xyXG4vLyBhcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKTtcclxuXHJcbmFwcC51c2UoY29ycygpKTtcclxuXHJcbmFwcC5zZXQoXCJwb3J0XCIsIHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMCk7XHJcbmFwcC5zZXQoXCJ2aWV3c1wiLCBfX2Rpcm5hbWUgKyBcIi92aWV3c1wiKTtcclxuYXBwLnNldChcInZpZXcgZW5naW5lXCIsIFwicHVnXCIpO1xyXG5hcHAudXNlKFwiL3B1YmxpY1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyBcIi9wdWJsaWNcIikpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKFxyXG4gIHNlc3Npb24oe1xyXG4gICAgcmVzYXZlOiBmYWxzZSxcclxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcclxuICAgIC8vQ09PS0lFX1NFQ1JFVCDtmZjqsr0g67OA7IiY6rCAIOyEpOygleuQmOyWtCDsnojri6TrqbQg6re4IOqwkuydhCDsgqzsmqntlZjqs6AsXHJcbiAgICAvL+yEpOygleuQmOyWtCDsnojsp4Ag7JWK64uk66m0IFwic2VjcmV0XCLsnbTrnbzripQg6riw67O46rCS7J2EIOyCrOyaqe2VmOyXrCDshLjshZgg642w7J207YSw66W8IOyVlO2YuO2ZlFxyXG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5DT09LSUVfU0VDUkVUIHx8IFwic2VjcmV0XCIsXHJcbiAgICBjb29raWU6IHtcclxuICAgICAgLy9odHRwT25seTogdHJ1ZeuKlCDtgbTrnbzsnbTslrjtirjsl5DshJwg7IS47IWYIOy/oO2CpOyXkCDsoJHqt7ztlaAg65WMIEphdmFTY3JpcHTrpbwg7Ya17ZWcIOygkeq3vOydhCDrp4nripQg7Ji17IWYXHJcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAvL3NlY3VyZTogZmFsc2XripQg7IS47IWYIOy/oO2CpOulvCDslYjsoITtlZwg7Jew6rKwKEhUVFBTKeydhCDthrXtlbTshJzrp4wg7KCE7Iah7ZW07JW8IO2VmOuKlOyngCDsl6zrtoDrpbwg7ISk7KCV7ZWY64qUIOyYteyFmFxyXG4gICAgICBzZWN1cmU6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG4pO1xyXG4vLyBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xyXG4vLyAgIHJlcy5oZWFkZXIoXHJcbi8vICAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcclxuLy8gICAgIFwiT3JpZ2luLCBYLVJlcXVlc3RlZC1XaXRoLCBDb250ZW50LVR5cGUsIEFjY2VwdFwiXHJcbi8vICAgKTtcclxuLy8gICBuZXh0KCk7XHJcbi8vIH0pO1xyXG5cclxuLy8qKioqKioqKioqKioqKiDssYTtjIUg7Iuc7J6RICoqKioqKioqKioqKioqL1xyXG5hcHAuc2V0KFwiZHVtbXlEYlwiLCB7IHJvb21zOiBuZXcgQXJyYXkoKSB9KTtcclxuXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIC8vIFRPRE86IGFkZCB1c2VyXHJcbiAgcmV0dXJuIHJlcy5yZW5kZXIoXCJpbmRleFwiKTtcclxufSk7XHJcblxyXG5hcHAucG9zdChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgLy8gVE9ETzogYWRkIHVzZXJcclxuICByZXR1cm4gcmVzLnJlbmRlcihcImluZGV4XCIpO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KFwiL25ld1Jvb21cIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyB0aXRsZSwgYXV0aCwgdXNlciB9ID0gcmVxLmJvZHk7XHJcbiAgY29uc3Qgcm9vbUlkID0gcmVxLnNlc3Npb25JRCArIERhdGUubm93KCk7XHJcbiAgbGV0IHRvdGFsQ291bnQgPSAwO1xyXG4gIGNvbnN0IHsgcm9vbXMgfSA9IGFwcC5nZXQoXCJkdW1teURiXCIpO1xyXG5cclxuICBpZiAoYXV0aCA9PSAwKSB7XHJcbiAgICB0b3RhbENvdW50ICs9IDE7XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZyhcImFwcC5qcyAvIHVzZXIgOlwiICsgdXNlcik7XHJcblxyXG4gIHJvb21zLnB1c2goeyB0aXRsZSwgcm9vbUlkLCB0b3RhbENvdW50IH0pO1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzIC8gbmV3Um9vbSA+Pj4gdGl0bGUgOiBcIiArIHRpdGxlKTtcclxuXHJcbiAgY29uc3Qgc3FsID1cclxuICAgIFwiSU5TRVJUIElOVE8gY2hhdChjaGF0X3R5cGUsIGNoYXRfdGl0bGUsIHVzZXJfaWQsIGNoYXRfY3JlYXRlZCkgVkFMVUVTKDAsID8sID8sIG5vdygpKVwiO1xyXG4gIGNvbnN0IHZhbHVlID0gW3RpdGxlLCB1c2VyXTtcclxuXHJcbiAgY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIikucHJvbWlzZXM7IC8vIO2UhOuhnOuvuOyKpCDquLDrsJjsnZggZnMg66qo65OIIOyCrOyaqVxyXG5cclxuICBjb25zdCBleGVjdXRlUXVlcnkgPSAoc3FsLCB2YWx1ZXMpID0+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbm4ucXVlcnkoc3FsLCB2YWx1ZXMsIChlcnIsIHJlc3VsdCwgZmllbGRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgcmVqZWN0KGVycik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2F2ZUNoYXRIaXN0b3J5ID0gYXN5bmMgKHRpdGxlLCB1c2VyKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkoc3FsLCB2YWx1ZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcblxyXG4gICAgICBjb25zdCBnZXRDaGF0SWR4ID1cclxuICAgICAgICBcInNlbGVjdCAqIGZyb20gY2hhdCB3aGVyZSBjaGF0X3RpdGxlID0gPyBhbmQgY2hhdHRpbmdfY2xvc2VkIGlzIG51bGwgb3JkZXIgYnkgY2hhdF9pZHggZGVzYyBsaW1pdCAxXCI7XHJcbiAgICAgIGNvbnN0IGNoYXRSZXN1bHQgPSBhd2FpdCBleGVjdXRlUXVlcnkoZ2V0Q2hhdElkeCwgdGl0bGUpO1xyXG4gICAgICBjb25zb2xlLmxvZyhjaGF0UmVzdWx0KTtcclxuICAgICAgY29uc3QgY2hhdF9pZHggPSBjaGF0UmVzdWx0WzBdW1wiY2hhdF9pZHhcIl07XHJcbiAgICAgIGNvbnNvbGUubG9nKGDqsIDsoLjsmKggY2hhdF9pZHggOiAke2NoYXRfaWR4fWApO1xyXG5cclxuICAgICAgY29uc3QgZ2V0Q2hhdEZvbGRlclBhdGhRdWVyeSA9XHJcbiAgICAgICAgXCJzZWxlY3QgKiBmcm9tIHN5c3RlbSB3aGVyZSBzeXN0ZW1fbmFtZSA9ICdjaGF0X2xvZydcIjtcclxuICAgICAgY29uc3QgZm9sZGVyUGF0aFJlc3VsdCA9IGF3YWl0IGV4ZWN1dGVRdWVyeShnZXRDaGF0Rm9sZGVyUGF0aFF1ZXJ5KTtcclxuICAgICAgY29uc3QgY2hhdExvZ1BhdGggPSBmb2xkZXJQYXRoUmVzdWx0WzBdW1wic3lzdGVtX3BhdGhcIl07XHJcbiAgICAgIGNvbnNvbGUubG9nKGNoYXRMb2dQYXRoKTtcclxuXHJcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcclxuICAgICAgY29uc3QgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCBcIjBcIik7XHJcbiAgICAgIGNvbnN0IGRheSA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcclxuICAgICAgY29uc3QgZGF0ZUluZm8gPSBgJHt5ZWFyfSR7bW9udGh9JHtkYXl9YDtcclxuXHJcbiAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgY3JlYXRlZDogdG9kYXksXHJcbiAgICAgICAgdXNlcjogdXNlcixcclxuICAgICAgfTtcclxuICAgICAgY29uc3QganNvbkRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcclxuICAgICAgY29uc3QgZmlsZU5hbWUgPSBgJHtkYXRlSW5mb31fJHtjaGF0X2lkeH0uanNvbmA7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gYCR7Y2hhdExvZ1BhdGh9LyR7ZmlsZU5hbWV9YDtcclxuXHJcbiAgICAgIGF3YWl0IGZzLndyaXRlRmlsZShmaWxlUGF0aCwganNvbkRhdGEsIFwidXRmOFwiKTtcclxuICAgICAgY29uc29sZS5sb2coXCJKc29uIO2MjOydvOydtCDsg53shLHrkJjsl4jsirXri4jri6QuXCIpO1xyXG5cclxuICAgICAgY29uc3QgaW5zZXJ0X2NoYXRfaGlzdG9yeV9zcWwgPVxyXG4gICAgICAgIFwiaW5zZXJ0IGludG8gY2hhdF9oaXN0b3J5IChjaGF0X2hpc3RvcnlfZmlsZSwgY2hhdF9oaXN0b3J5X3BhdGgsIGNoYXRfaWR4KSBWQUxVRVMgKD8sID8sID8pXCI7XHJcbiAgICAgIGNvbnN0IGluc2VydFZhbHVlcyA9IFtmaWxlTmFtZSwgY2hhdExvZ1BhdGgsIGNoYXRfaWR4XTtcclxuICAgICAgYXdhaXQgZXhlY3V0ZVF1ZXJ5KGluc2VydF9jaGF0X2hpc3Rvcnlfc3FsLCBpbnNlcnRWYWx1ZXMpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIkRC7JeQIGNoYXRfaGlzdG9yeSDthYzsnbTruJTqs7wg7Jew64+Z65CY7JeI7Iq164uI64ukLlwiKTtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2F2ZUNoYXRIaXN0b3J5KHRpdGxlLCB1c2VyKTtcclxuXHJcbiAgLy8g7LGE7YyF67CpIOyDiOuhnCDsg53shLHsi5wg7ZmI7JeQIOyeiOuKlCDsgqzrnozrk6Tsl5Dqsowg7IOI66Gc7J2AIOuwqSDrqqnroZ0g7KCE7IahXHJcbiAgLy8gUT86IOuzuOyduOydgCDsmZwg7KCc7Jm465Cg6rmMP1xyXG4gIC8vIEEhOiDrgpjripQg7ZiE7J6sIOyXsOqysOuQnCDshozsvJPsnbQg7JeG64qU7IOB7YOc7J6EIGhvbWXsl5DshJwgbmV3cm9vbSDsnLzroZwg6rCI65WMIGNvbm5lY3Rpb27snbQg64GK7Ja07KeA6rOgXHJcbiAgLy8gICAgIHJlZGlyZWN066GcIC9jaGF0Lzpyb29tSWTroZwg67O064K07KC47JW8IGNoYXQuanPsl5DshJwgY29ubmVjdGlvbuydhCDsl7DqsrDtlahcclxuICBhcHAuZ2V0KFwid3NzXCIpLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XHJcbiAgICBpZiAoY2xpZW50LmxvY2F0aW9uID09PSBcImluZGV4XCIgJiYgY2xpZW50LnJlYWR5U3RhdGUgPT09IGNsaWVudC5PUEVOKVxyXG4gICAgICBjbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShyb29tcykpO1xyXG4gIH0pO1xyXG4gIHJldHVybiByZXMucmVkaXJlY3QoYC9jaGF0LyR7cm9vbUlkfWApO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoXCIvY2hhdC86cm9vbUlkXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlciB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnNvbGUubG9nKFwiL2NoYXQvOnJvb21JZCA+Pj4gdXNlciA6IFwiICsgdXNlcik7XHJcbiAgY29uc3QgeyB0aXRsZSB9ID0gYXBwXHJcbiAgICAuZ2V0KFwiZHVtbXlEYlwiKVxyXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XHJcblxyXG4gIC8vcmVzLmxvY2Fsc+uKlCDsnZHri7Ug6rCd7LK0KHJlcynsnZgg7IaN7ISx7Jy866GcLCDtlbTri7kg7J2R64u17JeQIOuMgO2VnCDroZzsu6wg67OA7IiY66W8IOyEpOygle2VmOqzoCDsgqzsmqntlaAg7IiYIOyeiOqyjCDtlbTspIxcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90aXRsZSA6XCIgKyB0aXRsZSk7XHJcbiAgcmVzLmxvY2Fscy50aXRsZSA9IHRpdGxlO1xyXG5cclxuICBjb25zdCB0YXJnZXRSb29tID0gYXBwXHJcbiAgICAuZ2V0KFwiZHVtbXlEYlwiKVxyXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RhcmdldFJvb20xIDpcIiArIHRhcmdldFJvb20udG90YWxDb3VudCk7XHJcbiAgdGFyZ2V0Um9vbS50b3RhbENvdW50ICs9IDE7XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RhcmdldFJvb20yIDpcIiArIHRhcmdldFJvb20udG90YWxDb3VudCk7XHJcblxyXG4gIGNvbnN0IHNxbCA9IFwiVVBEQVRFIGNoYXQgU0VUIGxhd3llcl9pZD0/IFdIRVJFIGNoYXRfdGl0bGUgPSA/XCI7XHJcbiAgY29uc3QgdmFsdWUgPSBbdXNlciwgdGl0bGVdO1xyXG5cclxuICBjb25uLnF1ZXJ5KHNxbCwgdmFsdWUsIChlcnIsIHJlc3VsdCwgZmllbGRzKSA9PiB7XHJcbiAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XHJcbiAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gIH0pO1xyXG5cclxuICAvL2NoYXQg7YyM7J287J2EIOugjOuNlOunge2VmOyXrCDtlbTri7kg7YyM7J287JeQ7IScIHRpdGxlIOuzgOyImOulvCDsgqzsmqntlaAg7IiYIOyeiOydjFxyXG4gIHJlcy5yZW5kZXIoXCJjaGF0XCIpO1xyXG59KTtcclxuXHJcbi8vIGxldCB0b3RhbENvdW50ID0gMDtcclxuXHJcbmFwcC5wb3N0KFwiL2xlYXZlLXJvb21cIiwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgY29uc3QgeyB0aXRsZSwgYXV0aCB9ID0gcmVxLmJvZHk7XHJcbiAgY29uc29sZS5sb2coXCJhcHAuanMvdGl0bGUgOlwiICsgdGl0bGUpO1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL2F1dGggOlwiICsgYXV0aCk7XHJcbiAgbGV0IHsgcm9vbXMgfSA9IGFwcC5nZXQoXCJkdW1teURiXCIpO1xyXG4gIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xyXG5cclxuICAvLyByb29tcy50b3RhbENvdW50ICs9IGNvdW50O1xyXG4gIC8vIGNvbnNvbGUubG9nKFwidG90YWxDb3VudCA6IFwiICsgdG90YWxDb3VudCk7XHJcblxyXG4gIGNvbnN0IGZvdW5kUm9vbSA9IHJvb21zLmZpbmQoKHJvb20pID0+IHJvb20udGl0bGUgPT09IHRpdGxlKTtcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy9mb3VuZFJvb20udG90YWxDb3VudCA6XCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XHJcblxyXG4gIGlmIChmb3VuZFJvb20pIHtcclxuICAgIGlmIChhdXRoID09IDEpIHtcclxuICAgICAgZm91bmRSb29tLnRvdGFsQ291bnQgLT0gMTtcclxuICAgICAgY29uc29sZS5sb2coXCJhcHAuanMvdG90YWxDb3VudDExMSA6IFwiICsgZm91bmRSb29tLnRvdGFsQ291bnQpO1xyXG4gICAgfSBlbHNlIGlmIChhdXRoID09IDApIHtcclxuICAgICAgZm91bmRSb29tLnRvdGFsQ291bnQgPSAwO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImFwcC5qcy90b3RhbENvdW50MTExIDogXCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGZvdW5kUm9vbS50b3RhbENvdW50ID09IDApIHtcclxuICAgICAgY29uc3QgaW5kZXggPSByb29tcy5pbmRleE9mKGZvdW5kUm9vbSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL2luZGV4IDogXCIgKyBpbmRleCk7XHJcbiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICByb29tcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cclxuICAgICAgICBjb25zdCBzcWwgPVxyXG4gICAgICAgICAgXCJVUERBVEUgY2hhdCBTRVQgY2hhdHRpbmdfY2xvc2VkPW5vdygpIFdIRVJFIGNoYXRfdGl0bGUgPSA/XCI7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBbdGl0bGVdO1xyXG5cclxuICAgICAgICBjb25uLnF1ZXJ5KHNxbCwgdmFsdWUsIChlcnIsIHJlc3VsdCwgZmllbGRzKSA9PiB7XHJcbiAgICAgICAgICBpZiAoZXJyKSB0aHJvdyBlcnI7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zb2xlLmxvZyhcImFwcC5qcy90b3RhbENvdW50MjIyIDogXCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XHJcbiAgICBjb25zb2xlLmxvZyhyb29tcyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzLnJlbmRlcihcImluZGV4XCIsIHsgcm9vbXMgfSk7XHJcbn0pO1xyXG5cclxuLy8qKioqKioqKioqKioqKiDssYTtjIUg64GdICoqKioqKioqKioqKioqL1xyXG5cclxuYXBwLnVzZSgoZXJyLCByZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xyXG4gIHJlcy5sb2NhbHMuZXJyb3IgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCIgcHJvZHVjdGlvblwiID8gZXJyIDoge307XHJcbiAgcmVzLnN0YXR1cyhlcnIuc3RhdHVzIHx8IDUwMCkucmVuZGVyKFwiZXJyb3JcIik7XHJcbn0pO1xyXG5cclxuY29uc3QgZXhwcmVzc1NlcnZlciA9IGFwcC5saXN0ZW4oYXBwLmdldChcInBvcnRcIiksICgpID0+XHJcbiAgY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBgKVxyXG4pO1xyXG5cclxuLy8gc29ja2V0XHJcbnJlcXVpcmUoXCIuL3NvY2tldFwiKShleHByZXNzU2VydmVyLCBhcHApO1xyXG4iXSwibWFwcGluZ3MiOiI7OzsrQ0FDQSxxSkFBQUEsbUJBQUEsWUFBQUEsb0JBQUEsV0FBQUMsQ0FBQSxTQUFBQyxDQUFBLEVBQUFELENBQUEsT0FBQUUsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLFNBQUEsRUFBQUMsQ0FBQSxHQUFBSCxDQUFBLENBQUFJLGNBQUEsRUFBQUMsQ0FBQSxHQUFBSixNQUFBLENBQUFLLGNBQUEsY0FBQVAsQ0FBQSxFQUFB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","map":{"version":3,"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","_catch","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","express","require","session","cors","mysql","conn","createConnection","host","port","user","password","database","connect","console","log","app","use","set","process","env","PORT","__dirname","json","urlencoded","extended","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","rooms","Array","get","req","res","render","post","_req$body","body","title","auth","roomId","sessionID","Date","now","totalCount","_app$get","sql","fs","promises","executeQuery","query","result","fields","saveChatHistory","_ref","_callee","getChatIdx","chatResult","chat_idx","getChatFolderPathQuery","folderPathResult","chatLogPath","today","year","month","day","dateInfo","data","jsonData","fileName","filePath","insert_chat_history_sql","insertValues","_callee$","_context","concat","getFullYear","String","getMonth","padStart","getDate","created","JSON","stringify","writeFile","t0","_x","_x2","clients","client","location","readyState","OPEN","send","redirect","_app$get$rooms$find","find","room","params","locals","targetRoom","_req$body2","_app$get2","foundRoom","index","indexOf","splice","message","NODE_ENV","status","expressServer","listen"],"sourceRoot":"D:\\Final_Project\\src\\open-chats\\","sources":["app.js"],"sourcesContent":["const express = require(\"express\");\r\nconst session = require(\"express-session\");\r\nconst cors = require(\"cors\");\r\n\r\nconst mysql = require(\"mysql\");\r\nconst conn = mysql.createConnection({\r\n  host: \"175.198.206.137\",\r\n  port: 3306,\r\n  user: \"q\",\r\n  password: \"q\",\r\n  database: \"follaw\",\r\n});\r\n\r\nconn.connect((err) => {\r\n  if (err) {\r\n    console.error(\"MySQL 연결 오류\");\r\n    return;\r\n  }\r\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\r\n});\r\n\r\nconst app = express();\r\n\r\n// CORS 설정\r\n// const corsOptions = {\r\n//   origin: [\"http://175.198.206.137:3000\", \"http://localhost:8080\"],\r\n//   methods: \"GET,HEAD,PUT,PATCH,POST,DELETE\",\r\n//   credentials: true,\r\n// };\r\n// app.use(cors(corsOptions));\r\n\r\napp.use(cors());\r\n\r\napp.set(\"port\", process.env.PORT || 3000);\r\napp.set(\"views\", __dirname + \"/views\");\r\napp.set(\"view engine\", \"pug\");\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(\r\n  session({\r\n    resave: false,\r\n    saveUninitialized: false,\r\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\r\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\r\n    secret: process.env.COOKIE_SECRET || \"secret\",\r\n    cookie: {\r\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\r\n      httpOnly: true,\r\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\r\n      secure: false,\r\n    },\r\n  })\r\n);\r\n// app.use((req, res, next) => {\r\n//   res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n//   res.header(\r\n//     \"Access-Control-Allow-Headers\",\r\n//     \"Origin, X-Requested-With, Content-Type, Accept\"\r\n//   );\r\n//   next();\r\n// });\r\n\r\n//************** 채팅 시작 **************/\r\napp.set(\"dummyDb\", { rooms: new Array() });\r\n\r\napp.get(\"/\", (req, res) => {\r\n  // TODO: add user\r\n  return res.render(\"index\");\r\n});\r\n\r\napp.post(\"/\", (req, res) => {\r\n  // TODO: add user\r\n  return res.render(\"index\");\r\n});\r\n\r\napp.post(\"/newRoom\", (req, res) => {\r\n  const { title, auth, user } = req.body;\r\n  const roomId = req.sessionID + Date.now();\r\n  let totalCount = 0;\r\n  const { rooms } = app.get(\"dummyDb\");\r\n\r\n  if (auth == 0) {\r\n    totalCount += 1;\r\n  }\r\n\r\n  console.log(\"app.js / user :\" + user);\r\n\r\n  rooms.push({ title, roomId, totalCount });\r\n  console.log(\"app.js / newRoom >>> title : \" + title);\r\n\r\n  const sql =\r\n    \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(0, ?, ?, now())\";\r\n  const value = [title, user];\r\n\r\n  const fs = require(\"fs\").promises; // 프로미스 기반의 fs 모듈 사용\r\n\r\n  const executeQuery = (sql, values) => {\r\n    return new Promise((resolve, reject) => {\r\n      conn.query(sql, values, (err, result, fields) => {\r\n        if (err) {\r\n          reject(err);\r\n        } else {\r\n          resolve(result);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  const saveChatHistory = async (title, user) => {\r\n    try {\r\n      const result = await executeQuery(sql, value);\r\n      console.log(result);\r\n\r\n      const getChatIdx =\r\n        \"select * from chat where chat_title = ? and chatting_closed is null order by chat_idx desc limit 1\";\r\n      const chatResult = await executeQuery(getChatIdx, title);\r\n      console.log(chatResult);\r\n      const chat_idx = chatResult[0][\"chat_idx\"];\r\n      console.log(`가져온 chat_idx : ${chat_idx}`);\r\n\r\n      const getChatFolderPathQuery =\r\n        \"select * from system where system_name = 'chat_log'\";\r\n      const folderPathResult = await executeQuery(getChatFolderPathQuery);\r\n      const chatLogPath = folderPathResult[0][\"system_path\"];\r\n      console.log(chatLogPath);\r\n\r\n      const today = new Date();\r\n      const year = today.getFullYear();\r\n      const month = String(today.getMonth() + 1).padStart(2, \"0\");\r\n      const day = String(today.getDate()).padStart(2, \"0\");\r\n      const dateInfo = `${year}${month}${day}`;\r\n\r\n      const data = {\r\n        created: today,\r\n        user: user,\r\n      };\r\n      const jsonData = JSON.stringify(data);\r\n      const fileName = `${dateInfo}_${chat_idx}.json`;\r\n      const filePath = `${chatLogPath}/${fileName}`;\r\n\r\n      await fs.writeFile(filePath, jsonData, \"utf8\");\r\n      console.log(\"Json 파일이 생성되었습니다.\");\r\n\r\n      const insert_chat_history_sql =\r\n        \"insert into chat_history (chat_history_file, chat_history_path, chat_idx) VALUES (?, ?, ?)\";\r\n      const insertValues = [fileName, chatLogPath, chat_idx];\r\n      await executeQuery(insert_chat_history_sql, insertValues);\r\n      console.log(\"DB에 chat_history 테이블과 연동되었습니다.\");\r\n    } catch (err) {\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  saveChatHistory(title, user);\r\n\r\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\r\n  // Q?: 본인은 왜 제외될까?\r\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\r\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\r\n  app.get(\"wss\").clients.forEach((client) => {\r\n    if (client.location === \"index\" && client.readyState === client.OPEN)\r\n      client.send(JSON.stringify(rooms));\r\n  });\r\n  return res.redirect(`/chat/${roomId}`);\r\n});\r\n\r\napp.get(\"/chat/:roomId\", (req, res) => {\r\n  const { user } = req.query;\r\n  console.log(\"/chat/:roomId >>> user : \" + user);\r\n  const { title } = app\r\n    .get(\"dummyDb\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\r\n  console.log(\"app.js/title :\" + title);\r\n  res.locals.title = title;\r\n\r\n  const targetRoom = app\r\n    .get(\"dummyDb\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\r\n  targetRoom.totalCount += 1;\r\n\r\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\r\n\r\n  const sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\r\n  const value = [user, title];\r\n\r\n  conn.query(sql, value, (err, result, fields) => {\r\n    if (err) throw err;\r\n    console.log(result);\r\n  });\r\n\r\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\r\n  res.render(\"chat\");\r\n});\r\n\r\n// let totalCount = 0;\r\n\r\napp.post(\"/leave-room\", (req, res) => {\r\n  const { title, auth } = req.body;\r\n  console.log(\"app.js/title :\" + title);\r\n  console.log(\"app.js/auth :\" + auth);\r\n  let { rooms } = app.get(\"dummyDb\");\r\n  console.log(rooms);\r\n  console.log(\"--------------------\");\r\n\r\n  // rooms.totalCount += count;\r\n  // console.log(\"totalCount : \" + totalCount);\r\n\r\n  const foundRoom = rooms.find((room) => room.title === title);\r\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\r\n\r\n  if (foundRoom) {\r\n    if (auth == 1) {\r\n      foundRoom.totalCount -= 1;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    } else if (auth == 0) {\r\n      foundRoom.totalCount = 0;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    }\r\n\r\n    if (foundRoom.totalCount == 0) {\r\n      const index = rooms.indexOf(foundRoom);\r\n      console.log(\"app.js/index : \" + index);\r\n      if (index !== -1) {\r\n        rooms.splice(index, 1);\r\n\r\n        const sql =\r\n          \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\r\n        const value = [title];\r\n\r\n        conn.query(sql, value, (err, result, fields) => {\r\n          if (err) throw err;\r\n          console.log(result);\r\n        });\r\n      }\r\n    }\r\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\r\n    console.log(rooms);\r\n  }\r\n\r\n  return res.render(\"index\", { rooms });\r\n});\r\n\r\n//************** 채팅 끝 **************/\r\n\r\napp.use((err, req, res, next) => {\r\n  res.locals.message = err.message;\r\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\r\n  res.status(err.status || 500).render(\"error\");\r\n});\r\n\r\nconst expressServer = app.listen(app.get(\"port\"), () =>\r\n  console.log(`Listening on http://localhost:3000`)\r\n);\r\n\r\n// socket\r\nrequire(\"./socket\")(expressServer, app);\r\n"],"mappings":";;;+CACA,qJAAAA,mBAAA,YAAAA,oBAAA,WAAAC,CAAA,SAAAC,CAAA,EAAAD,CAAA,OAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,EAAAC,CAAA,GAAAH,CAAA,CAAAI,cAAA,EAAAC,CAAA,GAAAJ,MAAA,CAAAK,cAAA,cAAAP,CAAA,EAAAD,CAAA,EAAAE,CAAA,IAAAD,CAAA,CAAAD,CAAA,IAAAE,CAAA,CAAAO,KAAA,KAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,aAAA,uBAAAC,CAAA,GAAAN,CAAA,CAAAO,WAAA,8BAAAC,OAAAjB,CAAA,EAAAD,CAAA,EAAAE,CAAA,WAAAC,MAAA,CAAAK,cAAA,CAAAP,CAAA,EAAAD,CAAA,IAAAS,KAAA,EAAAP,CAAA,EAAAiB,UAAA,MAAAC,YAAA,MAAAC,QAAA,SAAApB,CAAA,CAAAD,CAAA,WAAAkB,MAAA,mBAAAjB,CAAA,IAAAiB,MAAA,YAAAA,OAAAjB,CAAA,EAAAD,CAAA,EAAAE,CAAA,WAAAD,CAAA,CAAAD,CAAA,IAAAE,CAAA,gBAAAoB,KAAArB,CAAA,EAAAD,CAAA,EAAAE,CAAA,EAAAG,CAAA,QAAAK,CAAA,GAAAV,CAAA,IAAAA,CAAA,CAAAI,SAAA,YAAAmB,SAAA,GAAAvB,CAAA,GAAAuB,SAAA,EAAAX,CAAA,GAAAT,MAAA,CAAAqB,MAAA,CAAAd,CAAA,CAAAN,SAAA,GAAAU,CAAA,OAAAW,OAAA,CAAApB,CAAA,gBAAAE,CAAA,CAAAK,CAAA,eAAAH,KAAA,EAAAiB,gBAAA,CAAAzB,CAAA,EAAAC,CAAA,EAAAY,CAAA,MAAAF,CAAA,aAAAe,SAAA1B,CAAA,EAAAD,CAAA,EAAAE,CAAA,mBAAA0B,IAAA,YAAAC,GAAA,EAAA5B,CAAA,CAAA6B,IAAA,CAAA9B,CAAA,EAAAE,CAAA,cAAAD,CAAA,aAAA2B,IAAA,WAAAC,GAAA,EAAA5B,CAAA,QAAAD,CAAA,CAAAsB,IAAA,GAAAA,IAAA,MAAAS,CAAA,qBAAAC,CAAA,qBAAAC,CAAA,gBAAAC,CAAA,gBAAAC,CAAA,gBAAAZ,UAAA,cAAAa,kBAAA,cAAAC,2BAAA,SAAAC,CAAA,OAAApB,MAAA,CAAAoB,CAAA,EAAA1B,CAAA,qCAAA2B,CAAA,GAAApC,MAAA,CAAAqC,cAAA,EAAAC,CAAA,GAAAF,CAAA,IAAAA,CAAA,CAAAA,CAAA,CAAAG,MAAA,QAAAD,CAAA,IAAAA,CAAA,KAAAvC,CAAA,IAAAG,CAAA,CAAAyB,IAAA,CAAAW,CAAA,EAAA7B,CAAA,MAAA0B,CAAA,GAAAG,CAAA,OAAAE,CAAA,GAAAN,0BAAA,CAAAjC,SAAA,GAAAmB,SAAA,CAAAnB,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAc,CAAA,YAAAM,sBAAA3C,CAAA,gCAAA4C,OAAA,WAAA7C,CAAA,IAAAkB,MAAA,CAAAjB,CAAA,EAAAD,CAAA,YAAAC,CAAA,gBAAA6C,OAAA,CAAA9C,CAAA,EAAAC,CAAA,sBAAA8C,cAAA9C,CAAA,EAAAD,CAAA,aAAAgD,OAAA9C,CAAA,EAAAK,CAAA,EAAAG,CAAA,EAAAE,CAAA,QAAAE,CAAA,GAAAa,QAAA,CAAA1B,CAAA,CAAAC,CAAA,GAAAD,CAAA,EAAAM,CAAA,mBAAAO,CAAA,CAAAc,IAAA,QAAAZ,CAAA,GAAAF,CAAA,CAAAe,GAAA,EAAAE,CAAA,GAAAf,CAAA,CAAAP,KAAA,SAAAsB,CAAA,gBAAAkB,OAAA,CAAAlB,CAAA,KAAA1B,CAAA,CAAAyB,IAAA,CAAAC,CAAA,eAAA/B,CAAA,CAAAkD,OAAA,CAAAnB,CAAA,CAAAoB,OAAA,EAAAC,IAAA,WAAAnD,CAAA,IAAA+C,MAAA,SAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,gBAAAX,CAAA,IAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,QAAAZ,CAAA,CAAAkD,OAAA,CAAAnB,CAAA,EAAAqB,IAAA,WAAAnD,CAAA,IAAAe,CAAA,CAAAP,KAAA,GAAAR,CAAA,EAAAS,CAAA,CAAAM,CAAA,gBAAAf,CAAA,WAAA+C,MAAA,UAAA/C,CAAA,EAAAS,CAAA,EAAAE,CAAA,SAAAA,CAAA,CAAAE,CAAA,CAAAe,GAAA,SAAA3B,CAAA,EAAAK,CAAA,oBAAAE,KAAA,WAAAA,MAAAR,CAAA,EAAAI,CAAA,aAAAgD,2BAAA,eAAArD,CAAA,WAAAA,CAAA,EAAAE,CAAA,IAAA8C,MAAA,CAAA/C,CAAA,EAAAI,CAAA,EAAAL,CAAA,EAAAE,CAAA,gBAAAA,CAAA,GAAAA,CAAA,GAAAA,CAAA,CAAAkD,IAAA,CAAAC,0BAAA,EAAAA,0BAAA,IAAAA,0BAAA,qBAAA3B,iBAAA1B,CAAA,EAAAE,CAAA,EAAAG,CAAA,QAAAE,CAAA,GAAAwB,CAAA,mBAAArB,CAAA,EAAAE,CAAA,QAAAL,CAAA,KAAA0B,CAAA,YAAAqB,KAAA,sCAAA/C,CAAA,KAAA2B,CAAA,oBAAAxB,CAAA,QAAAE,CAAA,WAAAH,KAAA,EAAAR,CAAA,EAAAsD,IAAA,eAAAlD,CAAA,CAAAmD,MAAA,GAAA9C,CAAA,EAAAL,CAAA,CAAAwB,GAAA,GAAAjB,CAAA,UAAAE,CAAA,GAAAT,CAAA,CAAAoD,QAAA,MAAA3C,CAAA,QAAAE,CAAA,GAAA0C,mBAAA,CAAA5C,CAAA,EAAAT,CAAA,OAAAW,CAAA,QAAAA,CAAA,KAAAmB,CAAA,mBAAAnB,CAAA,qBAAAX,CAAA,CAAAmD,MAAA,EAAAnD,CAAA,CAAAsD,IAAA,GAAAtD,CAAA,CAAAuD,KAAA,GAAAvD,CAAA,CAAAwB,GAAA,sBAAAxB,CAAA,CAAAmD,MAAA,QAAAjD,CAAA,KAAAwB,CAAA,QAAAxB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAwB,GAAA,EAAAxB,CAAA,CAAAwD,iBAAA,CAAAxD,CAAA,CAAAwB,GAAA,uBAAAxB,CAAA,CAAAmD,MAAA,IAAAnD,CAAA,CAAAyD,MAAA,WAAAzD,CAAA,CAAAwB,GAAA,GAAAtB,CAAA,GAAA0B,CAAA,MAAAK,CAAA,GAAAX,QAAA,CAAA3B,CAAA,EAAAE,CAAA,EAAAG,CAAA,oBAAAiC,CAAA,CAAAV,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAkD,IAAA,GAAArB,CAAA,GAAAF,CAAA,EAAAM,CAAA,CAAAT,GAAA,KAAAM,CAAA,qBAAA1B,KAAA,EAAA6B,CAAA,CAAAT,GAAA,EAAA0B,IAAA,EAAAlD,CAAA,CAAAkD,IAAA,kBAAAjB,CAAA,CAAAV,IAAA,KAAArB,CAAA,GAAA2B,CAAA,EAAA7B,CAAA,CAAAmD,MAAA,YAAAnD,CAAA,CAAAwB,GAAA,GAAAS,CAAA,CAAAT,GAAA,mBAAA6B,oBAAA1D,CAAA,EAAAE,CAAA,QAAAG,CAAA,GAAAH,CAAA,CAAAsD,MAAA,EAAAjD,CAAA,GAAAP,CAAA,CAAAa,QAAA,CAAAR,CAAA,OAAAE,CAAA,KAAAN,CAAA,SAAAC,CAAA,CAAAuD,QAAA,qBAAApD,CAAA,IAAAL,CAAA,CAAAa,QAAA,eAAAX,CAAA,CAAAsD,MAAA,aAAAtD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,EAAAyD,mBAAA,CAAA1D,CAAA,EAAAE,CAAA,eAAAA,CAAA,CAAAsD,MAAA,kBAAAnD,CAAA,KAAAH,CAAA,CAAAsD,MAAA,YAAAtD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,uCAAA1D,CAAA,iBAAA8B,CAAA,MAAAzB,CAAA,GAAAiB,QAAA,CAAApB,CAAA,EAAAP,CAAA,CAAAa,QAAA,EAAAX,CAAA,CAAA2B,GAAA,mBAAAnB,CAAA,CAAAkB,IAAA,SAAA1B,CAAA,CAAAsD,MAAA,YAAAtD,CAAA,CAAA2B,GAAA,GAAAnB,CAAA,CAAAmB,GAAA,EAAA3B,CAAA,CAAAuD,QAAA,SAAAtB,CAAA,MAAAvB,CAAA,GAAAF,CAAA,CAAAmB,GAAA,SAAAjB,CAAA,GAAAA,CAAA,CAAA2C,IAAA,IAAArD,CAAA,CAAAF,CAAA,CAAAgE,UAAA,IAAApD,CAAA,CAAAH,KAAA,EAAAP,CAAA,CAAA+D,IAAA,GAAAjE,CAAA,CAAAkE,OAAA,eAAAhE,CAAA,CAAAsD,MAAA,KAAAtD,CAAA,CAAAsD,MAAA,WAAAtD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,GAAAC,CAAA,CAAAuD,QAAA,SAAAtB,CAAA,IAAAvB,CAAA,IAAAV,CAAA,CAAAsD,MAAA,YAAAtD,CAAA,CAAA2B,GAAA,OAAAkC,SAAA,sCAAA7D,CAAA,CAAAuD,QAAA,SAAAtB,CAAA,cAAAgC,aAAAlE,CAAA,QAAAD,CAAA,KAAAoE,MAAA,EAAAnE,CAAA,YAAAA,CAAA,KAAAD,CAAA,CAAAqE,QAAA,GAAApE,CAAA,WAAAA,CAAA,KAAAD,CAAA,CAAAsE,UAAA,GAAArE,CAAA,KAAAD,CAAA,CAAAuE,QAAA,GAAAtE,CAAA,WAAAuE,UAAA,CAAAC,IAAA,CAAAzE,CAAA,cAAA0E,cAAAzE,CAAA,QAAAD,CAAA,GAAAC,CAAA,CAAA0E,UAAA,QAAA3E,CAAA,CAAA4B,IAAA,oBAAA5B,CAAA,CAAA6B,GAAA,EAAA5B,CAAA,CAAA0E,UAAA,GAAA3E,CAAA,aAAAyB,QAAAxB,CAAA,SAAAuE,UAAA,MAAAJ,MAAA,aAAAnE,CAAA,CAAA4C,OAAA,CAAAsB,YAAA,cAAAS,KAAA,iBAAAlC,OAAA1C,CAAA,QAAAA,CAAA,WAAAA,CAAA,QAAAE,CAAA,GAAAF,CAAA,CAAAY,CAAA,OAAAV,CAAA,SAAAA,CAAA,CAAA4B,IAAA,CAAA9B,CAAA,4BAAAA,CAAA,CAAAiE,IAAA,SAAAjE,CAAA,OAAA6E,KAAA,CAAA7E,CAAA,CAAA8E,MAAA,SAAAvE,CAAA,OAAAG,CAAA,YAAAuD,KAAA,aAAA1D,CAAA,GAAAP,CAAA,CAAA8E,MAAA,OAAAzE,CAAA,CAAAyB,IAAA,CAAA9B,CAAA,EAAAO,CAAA,UAAA0D,IAAA,CAAAxD,KAAA,GAAAT,CAAA,CAAAO,CAAA,GAAA0D,IAAA,CAAAV,IAAA,OAAAU,IAAA,SAAAA,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAV,IAAA,OAAAU,IAAA,YAAAvD,CAAA,CAAAuD,IAAA,GAAAvD,CAAA,gBAAAqD,SAAA,CAAAd,OAAA,CAAAjD,CAAA,kCAAAoC,iBAAA,CAAAhC,SAAA,GAAAiC,0BAAA,EAAA9B,CAAA,CAAAoC,CAAA,mBAAAlC,KAAA,EAAA4B,0BAAA,EAAAjB,YAAA,SAAAb,CAAA,CAAA8B,0BAAA,mBAAA5B,KAAA,EAAA2B,iBAAA,EAAAhB,YAAA,SAAAgB,iBAAA,CAAA2C,WAAA,GAAA7D,MAAA,CAAAmB,0BAAA,EAAArB,CAAA,wBAAAhB,CAAA,CAAAgF,mBAAA,aAAA/E,CAAA,QAAAD,CAAA,wBAAAC,CAAA,IAAAA,CAAA,CAAAgF,WAAA,WAAAjF,CAAA,KAAAA,CAAA,KAAAoC,iBAAA,6BAAApC,CAAA,CAAA+E,WAAA,IAAA/E,CAAA,CAAAkF,IAAA,OAAAlF,CAAA,CAAAmF,IAAA,aAAAlF,CAAA,WAAAE,MAAA,CAAAiF,cAAA,GAAAjF,MAAA,CAAAiF,cAAA,CAAAnF,CAAA,EAAAoC,0BAAA,KAAApC,CAAA,CAAAoF,SAAA,GAAAhD,0BAAA,EAAAnB,MAAA,CAAAjB,CAAA,EAAAe,CAAA,yBAAAf,CAAA,CAAAG,SAAA,GAAAD,MAAA,CAAAqB,MAAA,CAAAmB,CAAA,GAAA1C,CAAA,KAAAD,CAAA,CAAAsF,KAAA,aAAArF,CAAA,aAAAkD,OAAA,EAAAlD,CAAA,OAAA2C,qBAAA,CAAAG,aAAA,CAAA3C,SAAA,GAAAc,MAAA,CAAA6B,aAAA,CAAA3C,SAAA,EAAAU,CAAA,iCAAAd,CAAA,CAAA+C,aAAA,GAAAA,aAAA,EAAA/C,CAAA,CAAAuF,KAAA,aAAAtF,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,EAAAG,CAAA,eAAAA,CAAA,KAAAA,CAAA,GAAA8E,OAAA,OAAA5E,CAAA,OAAAmC,aAAA,CAAAzB,IAAA,CAAArB,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAE,CAAA,GAAAG,CAAA,UAAAV,CAAA,CAAAgF,mBAAA,CAAA9E,CAAA,IAAAU,CAAA,GAAAA,CAAA,CAAAqD,IAAA,GAAAb,IAAA,WAAAnD,CAAA,WAAAA,CAAA,CAAAsD,IAAA,GAAAtD,CAAA,CAAAQ,KAAA,GAAAG,CAAA,CAAAqD,IAAA,WAAArB,qBAAA,CAAAD,CAAA,GAAAzB,MAAA,CAAAyB,CAAA,EAAA3B,CAAA,gBAAAE,MAAA,CAAAyB,CAAA,EAAA/B,CAAA,iCAAAM,MAAA,CAAAyB,CAAA,6DAAA3C,CAAA,CAAAyF,IAAA,aAAAxF,CAAA,QAAAD,CAAA,GAAAG,MAAA,CAAAF,CAAA,GAAAC,CAAA,gBAAAG,CAAA,IAAAL,CAAA,EAAAE,CAAA,CAAAuE,IAAA,CAAApE,CAAA,UAAAH,CAAA,CAAAwF,OAAA,aAAAzB,KAAA,WAAA/D,CAAA,CAAA4E,MAAA,SAAA7E,CAAA,GAAAC,CAAA,CAAAyF,GAAA,QAAA1F,CAAA,IAAAD,CAAA,SAAAiE,IAAA,CAAAxD,KAAA,GAAAR,CAAA,EAAAgE,IAAA,CAAAV,IAAA,OAAAU,IAAA,WAAAA,IAAA,CAAAV,IAAA,OAAAU,IAAA,QAAAjE,CAAA,CAAA0C,MAAA,GAAAA,MAAA,EAAAjB,OAAA,CAAArB,SAAA,KAAA6E,WAAA,EAAAxD,OAAA,EAAAmD,KAAA,WAAAA,MAAA5E,CAAA,aAAA4F,IAAA,WAAA3B,IAAA,WAAAN,IAAA,QAAAC,KAAA,GAAA3D,CAAA,OAAAsD,IAAA,YAAAE,QAAA,cAAAD,MAAA,gBAAA3B,GAAA,GAAA5B,CAAA,OAAAuE,UAAA,CAAA3B,OAAA,CAAA6B,aAAA,IAAA1E,CAAA,WAAAE,CAAA,kBAAAA,CAAA,CAAA2F,MAAA,OAAAxF,CAAA,CAAAyB,IAAA,OAAA5B,CAAA,MAAA2E,KAAA,EAAA3E,CAAA,CAAA4F,KAAA,cAAA5F,CAAA,IAAAD,CAAA,MAAA8F,IAAA,WAAAA,KAAA,SAAAxC,IAAA,WAAAtD,CAAA,QAAAuE,UAAA,IAAAG,UAAA,kBAAA1E,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,cAAAmE,IAAA,KAAAnC,iBAAA,WAAAA,kBAAA7D,CAAA,aAAAuD,IAAA,QAAAvD,CAAA,MAAAE,CAAA,kBAAA+F,OAAA5F,CAAA,EAAAE,CAAA,WAAAK,CAAA,CAAAgB,IAAA,YAAAhB,CAAA,CAAAiB,GAAA,GAAA7B,CAAA,EAAAE,CAAA,CAAA+D,IAAA,GAAA5D,CAAA,EAAAE,CAAA,KAAAL,CAAA,CAAAsD,MAAA,WAAAtD,CAAA,CAAA2B,GAAA,GAAA5B,CAAA,KAAAM,CAAA,aAAAA,CAAA,QAAAiE,UAAA,CAAAM,MAAA,MAAAvE,CAAA,SAAAA,CAAA,QAAAG,CAAA,QAAA8D,UAAA,CAAAjE,CAAA,GAAAK,CAAA,GAAAF,CAAA,CAAAiE,UAAA,iBAAAjE,CAAA,CAAA0D,MAAA,SAAA6B,MAAA,aAAAvF,CAAA,CAAA0D,MAAA,SAAAwB,IAAA,QAAA9E,CAAA,GAAAT,CAAA,CAAAyB,IAAA,CAAApB,CAAA,eAAAM,CAAA,GAAAX,CAAA,CAAAyB,IAAA,CAAApB,CAAA,qBAAAI,CAAA,IAAAE,CAAA,aAAA4E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,gBAAAuB,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,cAAAxD,CAAA,aAAA8E,IAAA,GAAAlF,CAAA,CAAA2D,QAAA,SAAA4B,MAAA,CAAAvF,CAAA,CAAA2D,QAAA,qBAAArD,CAAA,YAAAsC,KAAA,qDAAAsC,IAAA,GAAAlF,CAAA,CAAA4D,UAAA,SAAA2B,MAAA,CAAAvF,CAAA,CAAA4D,UAAA,YAAAR,MAAA,WAAAA,OAAA7D,CAAA,EAAAD,CAAA,aAAAE,CAAA,QAAAsE,UAAA,CAAAM,MAAA,MAAA5E,CAAA,SAAAA,CAAA,QAAAK,CAAA,QAAAiE,UAAA,CAAAtE,CAAA,OAAAK,CAAA,CAAA6D,MAAA,SAAAwB,IAAA,IAAAvF,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,wBAAAqF,IAAA,GAAArF,CAAA,CAAA+D,UAAA,QAAA5D,CAAA,GAAAH,CAAA,aAAAG,CAAA,iBAAAT,CAAA,mBAAAA,CAAA,KAAAS,CAAA,CAAA0D,MAAA,IAAApE,CAAA,IAAAA,CAAA,IAAAU,CAAA,CAAA4D,UAAA,KAAA5D,CAAA,cAAAE,CAAA,GAAAF,CAAA,GAAAA,CAAA,CAAAiE,UAAA,cAAA/D,CAAA,CAAAgB,IAAA,GAAA3B,CAAA,EAAAW,CAAA,CAAAiB,GAAA,GAAA7B,CAAA,EAAAU,CAAA,SAAA8C,MAAA,gBAAAS,IAAA,GAAAvD,CAAA,CAAA4D,UAAA,EAAAnC,CAAA,SAAA+D,QAAA,CAAAtF,CAAA,MAAAsF,QAAA,WAAAA,SAAAjG,CAAA,EAAAD,CAAA,oBAAAC,CAAA,CAAA2B,IAAA,QAAA3B,CAAA,CAAA4B,GAAA,qBAAA5B,CAAA,CAAA2B,IAAA,mBAAA3B,CAAA,CAAA2B,IAAA,QAAAqC,IAAA,GAAAhE,CAAA,CAAA4B,GAAA,gBAAA5B,CAAA,CAAA2B,IAAA,SAAAoE,IAAA,QAAAnE,GAAA,GAAA5B,CAAA,CAAA4B,GAAA,OAAA2B,MAAA,kBAAAS,IAAA,yBAAAhE,CAAA,CAAA2B,IAAA,IAAA5B,CAAA,UAAAiE,IAAA,GAAAjE,CAAA,GAAAmC,CAAA,KAAAgE,MAAA,WAAAA,OAAAlG,CAAA,aAAAD,CAAA,QAAAwE,UAAA,CAAAM,MAAA,MAAA9E,CAAA,SAAAA,CAAA,QAAAE,CAAA,QAAAsE,UAAA,CAAAxE,CAAA,OAAAE,CAAA,CAAAoE,UAAA,KAAArE,CAAA,cAAAiG,QAAA,CAAAhG,CAAA,CAAAyE,UAAA,EAAAzE,CAAA,CAAAqE,QAAA,GAAAG,aAAA,CAAAxE,CAAA,GAAAiC,CAAA,yBAAAiE,OAAAnG,CAAA,aAAAD,CAAA,QAAAwE,UAAA,CAAAM,MAAA,MAAA9E,CAAA,SAAAA,CAAA,QAAAE,CAAA,QAAAsE,UAAA,CAAAxE,CAAA,OAAAE,CAAA,CAAAkE,MAAA,KAAAnE,CAAA,QAAAI,CAAA,GAAAH,CAAA,CAAAyE,UAAA,kBAAAtE,CAAA,CAAAuB,IAAA,QAAArB,CAAA,GAAAF,CAAA,CAAAwB,GAAA,EAAA6C,aAAA,CAAAxE,CAAA,YAAAK,CAAA,gBAAA+C,KAAA,8BAAA+C,aAAA,WAAAA,cAAArG,CAAA,EAAAE,CAAA,EAAAG,CAAA,gBAAAoD,QAAA,KAAA5C,QAAA,EAAA6B,MAAA,CAAA1C,CAAA,GAAAgE,UAAA,EAAA9D,CAAA,EAAAgE,OAAA,EAAA7D,CAAA,oBAAAmD,MAAA,UAAA3B,GAAA,GAAA5B,CAAA,GAAAkC,CAAA,OAAAnC,CAAA;AAAA,SAAAsG,mBAAAC,GAAA,EAAArD,OAAA,EAAAsD,MAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,GAAA,EAAA9E,GAAA,cAAA+E,IAAA,GAAAL,GAAA,CAAAI,GAAA,EAAA9E,GAAA,OAAApB,KAAA,GAAAmG,IAAA,CAAAnG,KAAA,WAAAoG,KAAA,IAAAL,MAAA,CAAAK,KAAA,iBAAAD,IAAA,CAAArD,IAAA,IAAAL,OAAA,CAAAzC,KAAA,YAAA+E,OAAA,CAAAtC,OAAA,CAAAzC,KAAA,EAAA2C,IAAA,CAAAqD,KAAA,EAAAC,MAAA;AAAA,SAAAI,kBAAAC,EAAA,6BAAAC,IAAA,SAAAC,IAAA,GAAAC,SAAA,aAAA1B,OAAA,WAAAtC,OAAA,EAAAsD,MAAA,QAAAD,GAAA,GAAAQ,EAAA,CAAAI,KAAA,CAAAH,IAAA,EAAAC,IAAA,YAAAR,MAAAhG,KAAA,IAAA6F,kBAAA,CAAAC,GAAA,EAAArD,OAAA,EAAAsD,MAAA,EAAAC,KAAA,EAAAC,MAAA,UAAAjG,KAAA,cAAAiG,OAAAU,GAAA,IAAAd,kBAAA,CAAAC,GAAA,EAAArD,OAAA,EAAAsD,MAAA,EAAAC,KAAA,EAAAC,MAAA,WAAAU,GAAA,KAAAX,KAAA,CAAAY,SAAA;AADA,IAAMC,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,OAAO,GAAGD,OAAO,CAAC,iBAAiB,CAAC;AAC1C,IAAME,IAAI,GAAGF,OAAO,CAAC,MAAM,CAAC;AAE5B,IAAMG,KAAK,GAAGH,OAAO,CAAC,OAAO,CAAC;AAC9B,IAAMI,IAAI,GAAGD,KAAK,CAACE,gBAAgB,CAAC;EAClCC,IAAI,EAAE,iBAAiB;EACvBC,IAAI,EAAE,IAAI;EACVC,IAAI,EAAE,GAAG;EACTC,QAAQ,EAAE,GAAG;EACbC,QAAQ,EAAE;AACZ,CAAC,CAAC;AAEFN,IAAI,CAACO,OAAO,CAAC,UAACd,GAAG,EAAK;EACpB,IAAIA,GAAG,EAAE;IACPe,OAAO,CAACtB,KAAK,CAAC,aAAa,CAAC;IAC5B;EACF;EACAsB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;AACtC,CAAC,CAAC;AAEF,IAAMC,GAAG,GAAGf,OAAO,CAAC,CAAC;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAe,GAAG,CAACC,GAAG,CAACb,IAAI,CAAC,CAAC,CAAC;AAEfY,GAAG,CAACE,GAAG,CAAC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,IAAI,IAAI,IAAI,CAAC;AACzCL,GAAG,CAACE,GAAG,CAAC,OAAO,EAAEI,SAAS,GAAG,QAAQ,CAAC;AACtCN,GAAG,CAACE,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC;AAC7BF,GAAG,CAACC,GAAG,CAAC,SAAS,EAAEhB,OAAO,UAAO,CAACqB,SAAS,GAAG,SAAS,CAAC,CAAC;AACzDN,GAAG,CAACC,GAAG,CAAChB,OAAO,CAACsB,IAAI,CAAC,CAAC,CAAC;AACvBP,GAAG,CAACC,GAAG,CAAChB,OAAO,CAACuB,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAM,CAAC,CAAC,CAAC;AAChDT,GAAG,CAACC,GAAG,CACLd,OAAO,CAAC;EACNuB,MAAM,EAAE,KAAK;EACbC,iBAAiB,EAAE,KAAK;EACxB;EACA;EACAC,MAAM,EAAET,OAAO,CAACC,GAAG,CAACS,aAAa,IAAI,QAAQ;EAC7CC,MAAM,EAAE;IACN;IACAC,QAAQ,EAAE,IAAI;IACd;IACAC,MAAM,EAAE;EACV;AACF,CAAC,CACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAhB,GAAG,CAACE,GAAG,CAAC,SAAS,EAAE;EAAEe,KAAK,EAAE,IAAIC,KAAK,CAAC;AAAE,CAAC,CAAC;AAE1ClB,GAAG,CAACmB,GAAG,CAAC,GAAG,EAAE,UAACC,GAAG,EAAEC,GAAG,EAAK;EACzB;EACA,OAAOA,GAAG,CAACC,MAAM,CAAC,OAAO,CAAC;AAC5B,CAAC,CAAC;AAEFtB,GAAG,CAACuB,IAAI,CAAC,GAAG,EAAE,UAACH,GAAG,EAAEC,GAAG,EAAK;EAC1B;EACA,OAAOA,GAAG,CAACC,MAAM,CAAC,OAAO,CAAC;AAC5B,CAAC,CAAC;AAEFtB,GAAG,CAACuB,IAAI,CAAC,UAAU,EAAE,UAACH,GAAG,EAAEC,GAAG,EAAK;EACjC,IAAAG,SAAA,GAA8BJ,GAAG,CAACK,IAAI;IAA9BC,KAAK,GAAAF,SAAA,CAALE,KAAK;IAAEC,IAAI,GAAAH,SAAA,CAAJG,IAAI;IAAEjC,IAAI,GAAA8B,SAAA,CAAJ9B,IAAI;EACzB,IAAMkC,MAAM,GAAGR,GAAG,CAACS,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EACzC,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAAC,QAAA,GAAkBjC,GAAG,CAACmB,GAAG,CAAC,SAAS,CAAC;IAA5BF,KAAK,GAAAgB,QAAA,CAALhB,KAAK;EAEb,IAAIU,IAAI,IAAI,CAAC,EAAE;IACbK,UAAU,IAAI,CAAC;EACjB;EAEAlC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGL,IAAI,CAAC;EAErCuB,KAAK,CAAC7E,IAAI,CAAC;IAAEsF,KAAK,EAALA,KAAK;IAAEE,MAAM,EAANA,MAAM;IAAEI,UAAU,EAAVA;EAAW,CAAC,CAAC;EACzClC,OAAO,CAACC,GAAG,CAAC,+BAA+B,GAAG2B,KAAK,CAAC;EAEpD,IAAMQ,GAAG,GACP,uFAAuF;EACzF,IAAM9J,KAAK,GAAG,CAACsJ,KAAK,EAAEhC,IAAI,CAAC;EAE3B,IAAMyC,EAAE,GAAGjD,OAAO,CAAC,IAAI,CAAC,CAACkD,QAAQ,CAAC,CAAC;;EAEnC,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIH,GAAG,EAAE7H,MAAM,EAAK;IACpC,OAAO,IAAI8C,OAAO,CAAC,UAACtC,OAAO,EAAEsD,MAAM,EAAK;MACtCmB,IAAI,CAACgD,KAAK,CAACJ,GAAG,EAAE7H,MAAM,EAAE,UAAC0E,GAAG,EAAEwD,MAAM,EAAEC,MAAM,EAAK;QAC/C,IAAIzD,GAAG,EAAE;UACPZ,MAAM,CAACY,GAAG,CAAC;QACb,CAAC,MAAM;UACLlE,OAAO,CAAC0H,MAAM,CAAC;QACjB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC;EAED,IAAME,eAAe;IAAA,IAAAC,IAAA,GAAAjE,iBAAA,eAAA/G,mBAAA,GAAAoF,IAAA,CAAG,SAAA6F,QAAOjB,KAAK,EAAEhC,IAAI;MAAA,IAAA6C,MAAA,EAAAK,UAAA,EAAAC,UAAA,EAAAC,QAAA,EAAAC,sBAAA,EAAAC,gBAAA,EAAAC,WAAA,EAAAC,KAAA,EAAAC,IAAA,EAAAC,KAAA,EAAAC,GAAA,EAAAC,QAAA,EAAAC,IAAA,EAAAC,QAAA,EAAAC,QAAA,EAAAC,QAAA,EAAAC,uBAAA,EAAAC,YAAA;MAAA,OAAAlM,mBAAA,GAAAuB,IAAA,UAAA4K,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAvG,IAAA,GAAAuG,QAAA,CAAAlI,IAAA;UAAA;YAAAkI,QAAA,CAAAvG,IAAA;YAAAuG,QAAA,CAAAlI,IAAA;YAAA,OAEjByG,YAAY,CAACH,GAAG,EAAE9J,KAAK,CAAC;UAAA;YAAvCmK,MAAM,GAAAuB,QAAA,CAAAxI,IAAA;YACZwE,OAAO,CAACC,GAAG,CAACwC,MAAM,CAAC;YAEbK,UAAU,GACd,oGAAoG;YAAAkB,QAAA,CAAAlI,IAAA;YAAA,OAC7EyG,YAAY,CAACO,UAAU,EAAElB,KAAK,CAAC;UAAA;YAAlDmB,UAAU,GAAAiB,QAAA,CAAAxI,IAAA;YAChBwE,OAAO,CAACC,GAAG,CAAC8C,UAAU,CAAC;YACjBC,QAAQ,GAAGD,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,CAAC;YAC1C/C,OAAO,CAACC,GAAG,kCAAAgE,MAAA,CAAmBjB,QAAQ,CAAE,CAAC;YAEnCC,sBAAsB,GAC1B,qDAAqD;YAAAe,QAAA,CAAAlI,IAAA;YAAA,OACxByG,YAAY,CAACU,sBAAsB,CAAC;UAAA;YAA7DC,gBAAgB,GAAAc,QAAA,CAAAxI,IAAA;YAChB2H,WAAW,GAAGD,gBAAgB,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC;YACtDlD,OAAO,CAACC,GAAG,CAACkD,WAAW,CAAC;YAElBC,KAAK,GAAG,IAAIpB,IAAI,CAAC,CAAC;YAClBqB,IAAI,GAAGD,KAAK,CAACc,WAAW,CAAC,CAAC;YAC1BZ,KAAK,GAAGa,MAAM,CAACf,KAAK,CAACgB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;YACrDd,GAAG,GAAGY,MAAM,CAACf,KAAK,CAACkB,OAAO,CAAC,CAAC,CAAC,CAACD,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;YAC9Cb,QAAQ,MAAAS,MAAA,CAAMZ,IAAI,EAAAY,MAAA,CAAGX,KAAK,EAAAW,MAAA,CAAGV,GAAG;YAEhCE,IAAI,GAAG;cACXc,OAAO,EAAEnB,KAAK;cACdxD,IAAI,EAAEA;YACR,CAAC;YACK8D,QAAQ,GAAGc,IAAI,CAACC,SAAS,CAAChB,IAAI,CAAC;YAC/BE,QAAQ,MAAAM,MAAA,CAAMT,QAAQ,OAAAS,MAAA,CAAIjB,QAAQ;YAClCY,QAAQ,MAAAK,MAAA,CAAMd,WAAW,OAAAc,MAAA,CAAIN,QAAQ;YAAAK,QAAA,CAAAlI,IAAA;YAAA,OAErCuG,EAAE,CAACqC,SAAS,CAACd,QAAQ,EAAEF,QAAQ,EAAE,MAAM,CAAC;UAAA;YAC9C1D,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC;YAE1B4D,uBAAuB,GAC3B,4FAA4F;YACxFC,YAAY,GAAG,CAACH,QAAQ,EAAER,WAAW,EAAEH,QAAQ,CAAC;YAAAgB,QAAA,CAAAlI,IAAA;YAAA,OAChDyG,YAAY,CAACsB,uBAAuB,EAAEC,YAAY,CAAC;UAAA;YACzD9D,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;YAAC+D,QAAA,CAAAlI,IAAA;YAAA;UAAA;YAAAkI,QAAA,CAAAvG,IAAA;YAAAuG,QAAA,CAAAW,EAAA,GAAAX,QAAA;YAE9ChE,OAAO,CAACtB,KAAK,CAAAsF,QAAA,CAAAW,EAAI,CAAC;UAAC;UAAA;YAAA,OAAAX,QAAA,CAAApG,IAAA;QAAA;MAAA,GAAAiF,OAAA;IAAA,CAEtB;IAAA,gBA3CKF,eAAeA,CAAAiC,EAAA,EAAAC,GAAA;MAAA,OAAAjC,IAAA,CAAA5D,KAAA,OAAAD,SAAA;IAAA;EAAA,GA2CpB;EAED4D,eAAe,CAACf,KAAK,EAAEhC,IAAI,CAAC;;EAE5B;EACA;EACA;EACA;EACAM,GAAG,CAACmB,GAAG,CAAC,KAAK,CAAC,CAACyD,OAAO,CAACpK,OAAO,CAAC,UAACqK,MAAM,EAAK;IACzC,IAAIA,MAAM,CAACC,QAAQ,KAAK,OAAO,IAAID,MAAM,CAACE,UAAU,KAAKF,MAAM,CAACG,IAAI,EAClEH,MAAM,CAACI,IAAI,CAACX,IAAI,CAACC,SAAS,CAACtD,KAAK,CAAC,CAAC;EACtC,CAAC,CAAC;EACF,OAAOI,GAAG,CAAC6D,QAAQ,UAAAnB,MAAA,CAAUnC,MAAM,CAAE,CAAC;AACxC,CAAC,CAAC;AAEF5B,GAAG,CAACmB,GAAG,CAAC,eAAe,EAAE,UAACC,GAAG,EAAEC,GAAG,EAAK;EACrC,IAAQ3B,IAAI,GAAK0B,GAAG,CAACkB,KAAK,CAAlB5C,IAAI;EACZI,OAAO,CAACC,GAAG,CAAC,2BAA2B,GAAGL,IAAI,CAAC;EAC/C,IAAAyF,mBAAA,GAAkBnF,GAAG,CAClBmB,GAAG,CAAC,SAAS,CAAC,CACdF,KAAK,CAACmE,IAAI,CAAC,UAACC,IAAI;MAAA,OAAKA,IAAI,CAACzD,MAAM,KAAKR,GAAG,CAACkE,MAAM,CAAC1D,MAAM;IAAA,EAAC;IAFlDF,KAAK,GAAAyD,mBAAA,CAALzD,KAAK;;EAIb;EACA5B,OAAO,CAACC,GAAG,CAAC,gBAAgB,GAAG2B,KAAK,CAAC;EACrCL,GAAG,CAACkE,MAAM,CAAC7D,KAAK,GAAGA,KAAK;EAExB,IAAM8D,UAAU,GAAGxF,GAAG,CACnBmB,GAAG,CAAC,SAAS,CAAC,CACdF,KAAK,CAACmE,IAAI,CAAC,UAACC,IAAI;IAAA,OAAKA,IAAI,CAACzD,MAAM,KAAKR,GAAG,CAACkE,MAAM,CAAC1D,MAAM;EAAA,EAAC;EAE1D9B,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGyF,UAAU,CAACxD,UAAU,CAAC;EAC3DwD,UAAU,CAACxD,UAAU,IAAI,CAAC;EAE1BlC,OAAO,CAACC,GAAG,CAAC,sBAAsB,GAAGyF,UAAU,CAACxD,UAAU,CAAC;EAE3D,IAAME,GAAG,GAAG,kDAAkD;EAC9D,IAAM9J,KAAK,GAAG,CAACsH,IAAI,EAAEgC,KAAK,CAAC;EAE3BpC,IAAI,CAACgD,KAAK,CAACJ,GAAG,EAAE9J,KAAK,EAAE,UAAC2G,GAAG,EAAEwD,MAAM,EAAEC,MAAM,EAAK;IAC9C,IAAIzD,GAAG,EAAE,MAAMA,GAAG;IAClBe,OAAO,CAACC,GAAG,CAACwC,MAAM,CAAC;EACrB,CAAC,CAAC;;EAEF;EACAlB,GAAG,CAACC,MAAM,CAAC,MAAM,CAAC;AACpB,CAAC,CAAC;;AAEF;;AAEAtB,GAAG,CAACuB,IAAI,CAAC,aAAa,EAAE,UAACH,GAAG,EAAEC,GAAG,EAAK;EACpC,IAAAoE,UAAA,GAAwBrE,GAAG,CAACK,IAAI;IAAxBC,KAAK,GAAA+D,UAAA,CAAL/D,KAAK;IAAEC,IAAI,GAAA8D,UAAA,CAAJ9D,IAAI;EACnB7B,OAAO,CAACC,GAAG,CAAC,gBAAgB,GAAG2B,KAAK,CAAC;EACrC5B,OAAO,CAACC,GAAG,CAAC,eAAe,GAAG4B,IAAI,CAAC;EACnC,IAAA+D,SAAA,GAAgB1F,GAAG,CAACmB,GAAG,CAAC,SAAS,CAAC;IAA5BF,KAAK,GAAAyE,SAAA,CAALzE,KAAK;EACXnB,OAAO,CAACC,GAAG,CAACkB,KAAK,CAAC;EAClBnB,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;;EAEnC;EACA;;EAEA,IAAM4F,SAAS,GAAG1E,KAAK,CAACmE,IAAI,CAAC,UAACC,IAAI;IAAA,OAAKA,IAAI,CAAC3D,KAAK,KAAKA,KAAK;EAAA,EAAC;EAC5D5B,OAAO,CAACC,GAAG,CAAC,+BAA+B,GAAG4F,SAAS,CAAC3D,UAAU,CAAC;EAEnE,IAAI2D,SAAS,EAAE;IACb,IAAIhE,IAAI,IAAI,CAAC,EAAE;MACbgE,SAAS,CAAC3D,UAAU,IAAI,CAAC;MACzBlC,OAAO,CAACC,GAAG,CAAC,yBAAyB,GAAG4F,SAAS,CAAC3D,UAAU,CAAC;IAC/D,CAAC,MAAM,IAAIL,IAAI,IAAI,CAAC,EAAE;MACpBgE,SAAS,CAAC3D,UAAU,GAAG,CAAC;MACxBlC,OAAO,CAACC,GAAG,CAAC,yBAAyB,GAAG4F,SAAS,CAAC3D,UAAU,CAAC;IAC/D;IAEA,IAAI2D,SAAS,CAAC3D,UAAU,IAAI,CAAC,EAAE;MAC7B,IAAM4D,KAAK,GAAG3E,KAAK,CAAC4E,OAAO,CAACF,SAAS,CAAC;MACtC7F,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAG6F,KAAK,CAAC;MACtC,IAAIA,KAAK,KAAK,CAAC,CAAC,EAAE;QAChB3E,KAAK,CAAC6E,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;QAEtB,IAAM1D,GAAG,GACP,4DAA4D;QAC9D,IAAM9J,KAAK,GAAG,CAACsJ,KAAK,CAAC;QAErBpC,IAAI,CAACgD,KAAK,CAACJ,GAAG,EAAE9J,KAAK,EAAE,UAAC2G,GAAG,EAAEwD,MAAM,EAAEC,MAAM,EAAK;UAC9C,IAAIzD,GAAG,EAAE,MAAMA,GAAG;UAClBe,OAAO,CAACC,GAAG,CAACwC,MAAM,CAAC;QACrB,CAAC,CAAC;MACJ;IACF;IACAzC,OAAO,CAACC,GAAG,CAAC,yBAAyB,GAAG4F,SAAS,CAAC3D,UAAU,CAAC;IAC7DlC,OAAO,CAACC,GAAG,CAACkB,KAAK,CAAC;EACpB;EAEA,OAAOI,GAAG,CAACC,MAAM,CAAC,OAAO,EAAE;IAAEL,KAAK,EAALA;EAAM,CAAC,CAAC;AACvC,CAAC,CAAC;;AAEF;;AAEAjB,GAAG,CAACC,GAAG,CAAC,UAAClB,GAAG,EAAEqC,GAAG,EAAEC,GAAG,EAAEzF,IAAI,EAAK;EAC/ByF,GAAG,CAACkE,MAAM,CAACQ,OAAO,GAAGhH,GAAG,CAACgH,OAAO;EAChC1E,GAAG,CAACkE,MAAM,CAAC/G,KAAK,GAAG2B,OAAO,CAACC,GAAG,CAAC4F,QAAQ,KAAK,aAAa,GAAGjH,GAAG,GAAG,CAAC,CAAC;EACpEsC,GAAG,CAAC4E,MAAM,CAAClH,GAAG,CAACkH,MAAM,IAAI,GAAG,CAAC,CAAC3E,MAAM,CAAC,OAAO,CAAC;AAC/C,CAAC,CAAC;AAEF,IAAM4E,aAAa,GAAGlG,GAAG,CAACmG,MAAM,CAACnG,GAAG,CAACmB,GAAG,CAAC,MAAM,CAAC,EAAE;EAAA,OAChDrB,OAAO,CAACC,GAAG,qCAAqC,CAAC;AAAA,CACnD,CAAC;;AAED;AACAb,OAAO,CAAC,UAAU,CAAC,CAACgH,aAAa,EAAElG,GAAG,CAAC"}},"mtime":1706834618606},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) {\n            if (data.type === \"enter\") {\n              var welcome = data.data;\n              console.log(\"welcome *********************\");\n              console.log(welcome);\n              client.send(JSON.stringify({\n                type: \"enter\",\n                data: welcome\n              }));\n            } else if (data.type === \"name\") {\n              var clientName = data.data;\n              console.log(\"clientName ******************\");\n              console.log(clientName);\n              client.send(JSON.stringify({\n                type: \"name\",\n                data: clientName\n              }));\n            } else if (data.type === \"chat\") {\n              var _message = data.data;\n              console.log(\"message ************************\");\n              console.log(_message);\n              client.send(JSON.stringify({\n                type: \"chat\",\n                data: _message\n              }));\n            } else if (data.type === \"delete\") {\n              var title = data.data;\n              console.log(\"title ************************\");\n              console.log(title);\n              client.send(JSON.stringify({\n                type: \"delete\",\n                data: title\n              }));\n            }\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFxvcGVuLWNoYXRzXFwiLCJzb3VyY2VzIjpbInNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3cyA9IHJlcXVpcmUoXCJ3c1wiKTtcclxuXHJcbi8vbW9kdWxlLmV4cG9ydHMgOiDrqqjrk4jsnYQg64K067O064K064qUIOuNsCDsgqzsmqnrkJjripQg7Yq57IiY7ZWcIOqwneyytFxyXG4vL+uLpOuluCDtjIzsnbzsl5DshJwg7ZW064u5IOuqqOuTiOydhCDqsIDsoLjsmYAg7IKs7JqpIOqwgOuKpShyZXF1aXJlKCkg7J207JqpKVxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXJ2ZXIsIGFwcCkgPT4ge1xyXG4gIC8vd3Mg66qo65OI7J2YIFNlcnZlciDtgbTrnpjsiqQoV2ViU29ja2V0IOyEnOuyhOulvCDsg53shLHtlZjqs6Ag6rSA66asKeulvCDsgqzsmqntlZjsl6wgV2ViU29ja2V0IOyEnOuyhOulvCDsg53shLHtlZjripQg6rWs66y4XHJcbiAgY29uc3Qgd3NzID0gbmV3IHdzLlNlcnZlcih7IHNlcnZlciB9KTtcclxuICAvLyBmb3Igc2VuZGluZyBhIHJvb21zIGRhdGEgd2hlbiBhIG5ldyByb29tIGlzIGNyZWF0ZWRcclxuICAvLyB1c2VkIGF0IGFwcC5wb3N0KCduZXdyb29tJykgb24gYXBwLmpzXHJcbiAgYXBwLnNldChcIndzc1wiLCB3c3MpO1xyXG5cclxuICAvLyBCYWNrZW5k7JeQ7IScIHNvY2tldOydhCDsgqzsmqntlaAg7KSA67mEIOyZhOujjFxyXG4gIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHdzLCByZXEpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiV2ViU29ja2V0IGNvbm5lY3RlZCB0bzogXCIgKyByZXEudXJsKTtcclxuICAgIGlmIChyZXEudXJsID09PSBcIi9yb29tc1wiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJpbmRleFwiO1xyXG4gICAgICAvLyBnZXQgYSBkYXRhIHdoZW4gaW50byBpbmRleFxyXG4gICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGFwcC5nZXQoXCJkdW1teURiXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi9jaGF0L1wiKSkge1xyXG4gICAgICB3cy5sb2NhdGlvbiA9IHJlcS51cmwuc3BsaXQoXCIvXCIpWzJdO1xyXG4gICAgICB3cy5vbihcIm1lc3NhZ2VcIiwgKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlKTtcclxuICAgICAgICB3c3MuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gXCJlbnRlclwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgd2VsY29tZSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIndlbGNvbWUgKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHdlbGNvbWUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJlbnRlclwiLCBkYXRhOiB3ZWxjb21lIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwibmFtZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2xpZW50TmFtZSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudE5hbWUgKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsaWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJuYW1lXCIsIGRhdGE6IGNsaWVudE5hbWUgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjaGF0XCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWVzc2FnZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImRlbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aXRsZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdzLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICBhcHAubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVycm9yIDoge307XHJcbiAgICAgIGFwcC5yZW5kZXIoXCJlcnJvclwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9uKFwiY2xvc2VcIiwgKCkgPT4gY29uc29sZS5sb2coYCR7cmVxLnVybH0gY29ubmVjdGlvbiBjbG9zZWApKTtcclxuICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEI7QUFDQTtBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxNQUFNLEVBQUVDLEdBQUcsRUFBSztFQUNoQztFQUNBLElBQU1DLEdBQUcsR0FBRyxJQUFJTixFQUFFLENBQUNPLE1BQU0sQ0FBQztJQUFFSCxNQUFNLEVBQU5BO0VBQU8sQ0FBQyxDQUFDO0VBQ3JDO0VBQ0E7RUFDQUMsR0FBRyxDQUFDRyxHQUFHLENBQUMsS0FBSyxFQUFFRixHQUFHLENBQUM7O0VBRW5CO0VBQ0FBLEdBQUcsQ0FBQ0csRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFD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","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\open-chats\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/rooms\") {\r\n      ws.location = \"index\";\r\n      // get a data when into index\r\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\r\n    } else if (req.url.startsWith(\"/chat/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location\r\n          ) {\r\n            if (data.type === \"enter\") {\r\n              const welcome = data.data;\r\n              console.log(\"welcome *********************\");\r\n              console.log(welcome);\r\n              client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n            } else if (data.type === \"name\") {\r\n              const clientName = data.data;\r\n              console.log(\"clientName ******************\");\r\n              console.log(clientName);\r\n              client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n            } else if (data.type === \"chat\") {\r\n              const message = data.data;\r\n              console.log(\"message ************************\");\r\n              console.log(message);\r\n              client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n            } else if (data.type === \"delete\") {\r\n              const title = data.data;\r\n              console.log(\"title ************************\");\r\n              console.log(title);\r\n              client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706794198748},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\open-chats\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) {\n            if (data.type === \"enter\") {\n              var welcome = data.data;\n              console.log(\"welcome *********************\");\n              console.log(welcome);\n              client.send(JSON.stringify({\n                type: \"enter\",\n                data: welcome\n              }));\n            } else if (data.type === \"name\") {\n              var clientName = data.data;\n              console.log(\"clientName ******************\");\n              console.log(clientName);\n              client.send(JSON.stringify({\n                type: \"name\",\n                data: clientName\n              }));\n            } else if (data.type === \"chat\") {\n              var _message = data.data;\n              console.log(\"message ************************\");\n              console.log(_message);\n              client.send(JSON.stringify({\n                type: \"chat\",\n                data: _message\n              }));\n            } else if (data.type === \"delete\") {\n              var title = data.data;\n              console.log(\"title ************************\");\n              console.log(title);\n              client.send(JSON.stringify({\n                type: \"delete\",\n                data: title\n              }));\n            }\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFxvcGVuLWNoYXRzXFwiLCJzb3VyY2VzIjpbInNvY2tldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3cyA9IHJlcXVpcmUoXCJ3c1wiKTtcclxuXHJcbi8vbW9kdWxlLmV4cG9ydHMgOiDrqqjrk4jsnYQg64K067O064K064qUIOuNsCDsgqzsmqnrkJjripQg7Yq57IiY7ZWcIOqwneyytFxyXG4vL+uLpOuluCDtjIzsnbzsl5DshJwg7ZW064u5IOuqqOuTiOydhCDqsIDsoLjsmYAg7IKs7JqpIOqwgOuKpShyZXF1aXJlKCkg7J207JqpKVxyXG5tb2R1bGUuZXhwb3J0cyA9IChzZXJ2ZXIsIGFwcCkgPT4ge1xyXG4gIC8vd3Mg66qo65OI7J2YIFNlcnZlciDtgbTrnpjsiqQoV2ViU29ja2V0IOyEnOuyhOulvCDsg53shLHtlZjqs6Ag6rSA66asKeulvCDsgqzsmqntlZjsl6wgV2ViU29ja2V0IOyEnOuyhOulvCDsg53shLHtlZjripQg6rWs66y4XHJcbiAgY29uc3Qgd3NzID0gbmV3IHdzLlNlcnZlcih7IHNlcnZlciB9KTtcclxuICAvLyBmb3Igc2VuZGluZyBhIHJvb21zIGRhdGEgd2hlbiBhIG5ldyByb29tIGlzIGNyZWF0ZWRcclxuICAvLyB1c2VkIGF0IGFwcC5wb3N0KCduZXdyb29tJykgb24gYXBwLmpzXHJcbiAgYXBwLnNldChcIndzc1wiLCB3c3MpO1xyXG5cclxuICAvLyBCYWNrZW5k7JeQ7IScIHNvY2tldOydhCDsgqzsmqntlaAg7KSA67mEIOyZhOujjFxyXG4gIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHdzLCByZXEpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKFwiV2ViU29ja2V0IGNvbm5lY3RlZCB0bzogXCIgKyByZXEudXJsKTtcclxuICAgIGlmIChyZXEudXJsID09PSBcIi9yb29tc1wiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJpbmRleFwiO1xyXG4gICAgICAvLyBnZXQgYSBkYXRhIHdoZW4gaW50byBpbmRleFxyXG4gICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KGFwcC5nZXQoXCJkdW1teURiXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi9jaGF0L1wiKSkge1xyXG4gICAgICB3cy5sb2NhdGlvbiA9IHJlcS51cmwuc3BsaXQoXCIvXCIpWzJdO1xyXG4gICAgICB3cy5vbihcIm1lc3NhZ2VcIiwgKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlKTtcclxuICAgICAgICB3c3MuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcclxuICAgICAgICAgIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gXCJlbnRlclwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3Qgd2VsY29tZSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIndlbGNvbWUgKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHdlbGNvbWUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJlbnRlclwiLCBkYXRhOiB3ZWxjb21lIH0pKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwibmFtZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgY2xpZW50TmFtZSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudE5hbWUgKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsaWVudE5hbWUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJuYW1lXCIsIGRhdGE6IGNsaWVudE5hbWUgfSkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gXCJjaGF0XCIpIHtcclxuICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibWVzc2FnZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSBcImRlbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJ0aXRsZSAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUpO1xyXG4gICAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdzLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICBhcHAubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVycm9yIDoge307XHJcbiAgICAgIGFwcC5yZW5kZXIoXCJlcnJvclwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHdzLm9uKFwiY2xvc2VcIiwgKCkgPT4gY29uc29sZS5sb2coYCR7cmVxLnVybH0gY29ubmVjdGlvbiBjbG9zZWApKTtcclxuICB9KTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEI7QUFDQTtBQUNBQyxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxNQUFNLEVBQUVDLEdBQUcsRUFBSztFQUNoQztFQUNBLElBQU1DLEdBQUcsR0FBRyxJQUFJTixFQUFFLENBQUNPLE1BQU0sQ0FBQztJQUFFSCxNQUFNLEVBQU5BO0VBQU8sQ0FBQyxDQUFDO0VBQ3JDO0VBQ0E7RUFDQUMsR0FBRyxDQUFDRyxHQUFHLENBQUMsS0FBSyxFQUFFRixHQUFHLENBQUM7O0VBRW5CO0VBQ0FBLEdBQUcsQ0FBQ0csRUFBRSxDQUFDLFlBQVksRUFBRSxVQUFDVCxFQUFFLEVBQUVVLEdBQUcsRUFBSztJQUNoQ0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsMEJBQTBCLEdBQUdGLEdBQUcsQ0FBQ0csR0FBRyxDQUFDO0lBQ2pELElBQUlILEdBQUcsQ0FBQ0csR0FBRyxLQUFLLFFBQVEsRUFBRTtNQUN4QmIsRUFBRSxDQUFDYyxRQUFRLEdBQUcsT0FBTztNQUNyQjtNQUNBZCxFQUFFLENBQUNlLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNaLEdBQUcsQ0FBQ2EsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxLQUFLLENBQUMsQ0FBQztJQUNuRCxDQUFDLE1BQU0sSUFBSVQsR0FBRyxDQUFDRyxHQUFHLENBQUNPLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtNQUN2Q3BCLEVBQUUsQ0FBQ2MsUUFBUSxHQUFHSixHQUFHLENBQUNHLEdBQUcsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNuQ3JCLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDYSxPQUFPLEVBQUs7UUFDNUIsSUFBTUMsSUFBSSxHQUFHUCxJQUFJLENBQUNRLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO1FBQ2hDaEIsR0FBRyxDQUFDbUIsT0FBTyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsTUFBTSxFQUFLO1VBQzlCLElBQ0VBLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxFQUMvQjtZQUNBLElBQUlTLElBQUksQ0FBQ08sSUFBSSxLQUFLLE9BQU8sRUFBRTtjQUN6QixJQUFNQyxPQUFPLEdBQUdSLElBQUksQ0FBQ0EsSUFBSTtjQUN6QlosT0FBTyxDQUFDQyxHQUFHLENBQUMsK0JBQStCLENBQUM7Y0FDNUNELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDbUIsT0FBTyxDQUFDO2NBQ3BCSixNQUFNLENBQUNaLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUM7Z0JBQUVhLElBQUksRUFBRSxPQUFPO2dCQUFFUCxJQUFJLEVBQUVRO2NBQVEsQ0FBQyxDQUFDLENBQUM7WUFDL0QsQ0FBQyxNQUFNLElBQUlSLElBQUksQ0FBQ08sSUFBSSxLQUFLLE1BQU0sRUFBRTtjQUMvQixJQUFNRSxVQUFVLEdBQUdULElBQUksQ0FBQ0EsSUFBSTtjQUM1QlosT0FBTyxDQUFDQyxHQUFHLENBQUMsK0JBQStCLENBQUM7Y0FDNUNELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDb0IsVUFBVSxDQUFDO2NBQ3ZCTCxNQUFNLENBQUNaLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUM7Z0JBQUVhLElBQUksRUFBRSxNQUFNO2dCQUFFUCxJQUFJLEVBQUVTO2NBQVcsQ0FBQyxDQUFDLENBQUM7WUFDakUsQ0FBQyxNQUFNLElBQUlULElBQUksQ0FBQ08sSUFBSSxLQUFLLE1BQU0sRUFBRTtjQUMvQixJQUFNUixRQUFPLEdBQUdDLElBQUksQ0FBQ0EsSUFBSTtjQUN6QlosT0FBTyxDQUFDQyxHQUFHLENBQUMsa0NBQWtDLENBQUM7Y0FDL0NELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVSxRQUFPLENBQUM7Y0FDcEJLLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLE1BQU07Z0JBQUVQLElBQUksRUFBRUQ7Y0FBUSxDQUFDLENBQUMsQ0FBQztZQUM5RCxDQUFDLE1BQU0sSUFBSUMsSUFBSSxDQUFDTyxJQUFJLEtBQUssUUFBUSxFQUFFO2NBQ2pDLElBQU1HLEtBQUssR0FBR1YsSUFBSSxDQUFDQSxJQUFJO2NBQ3ZCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQztjQUM3Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNxQixLQUFLLENBQUM7Y0FDbEJOLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztnQkFBRWEsSUFBSSxFQUFFLFFBQVE7Z0JBQUVQLElBQUksRUFBRVU7Y0FBTSxDQUFDLENBQUMsQ0FBQztZQUM5RDtVQUNGO1FBQ0YsQ0FBQyxDQUFDO01BQ0osQ0FBQyxDQUFDO0lBQ0o7SUFFQWpDLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFDeUIsS0FBSyxFQUFLO01BQ3hCdkIsT0FBTyxDQUFDdUIsS0FBSyxDQUFDQSxLQUFLLENBQUM7TUFDcEI3QixHQUFHLENBQUM4QixNQUFNLENBQUNiLE9BQU8sR0FBR1ksS0FBSyxDQUFDWixPQUFPO01BQ2xDakIsR0FBRyxDQUFDOEIsTUFBTSxDQUFDRCxLQUFLLEdBQUdFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHSixLQUFLLEdBQUcsQ0FBQyxDQUFDO01BQ3RFN0IsR0FBRyxDQUFDa0MsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNyQixDQUFDLENBQUM7SUFFRnZDLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRTtNQUFBLE9BQU1FLE9BQU8sQ0FBQ0MsR0FBRyxJQUFBNEIsTUFBQSxDQUFJOUIsR0FBRyxDQUFDRyxHQUFHLHNCQUFtQixDQUFDO0lBQUEsRUFBQztFQUNsRSxDQUFDLENBQUM7QUFDSixDQUFDIn0=","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\open-chats\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/rooms\") {\r\n      ws.location = \"index\";\r\n      // get a data when into index\r\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\r\n    } else if (req.url.startsWith(\"/chat/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location\r\n          ) {\r\n            if (data.type === \"enter\") {\r\n              const welcome = data.data;\r\n              console.log(\"welcome *********************\");\r\n              console.log(welcome);\r\n              client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n            } else if (data.type === \"name\") {\r\n              const clientName = data.data;\r\n              console.log(\"clientName ******************\");\r\n              console.log(clientName);\r\n              client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n            } else if (data.type === \"chat\") {\r\n              const message = data.data;\r\n              console.log(\"message ************************\");\r\n              console.log(message);\r\n              client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n            } else if (data.type === \"delete\") {\r\n              const title = data.data;\r\n              console.log(\"title ************************\");\r\n              console.log(title);\r\n              client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706794198748}}