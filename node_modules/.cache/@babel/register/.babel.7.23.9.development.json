{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nvar mysql = require(\"mysql\");\nvar cors = require(\"cors\");\nvar conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = (0, _express[\"default\"])();\napp.set(\"port\", process.env.PORT || 3001);\napp.set(\"views\", __dirname + \"/views\");\n// app.set(\"views\", path.join(__dirname, \"/views\"));\napp.set(\"view engine\", \"pug\");\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\n// app.use(\"/public\", express.static(path.join(__dirname, \"/public\")));\napp.use(_express[\"default\"].json());\napp.use(_express[\"default\"].urlencoded({\n  extended: false\n}));\napp.use((0, _expressSession[\"default\"])({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n// app.use((req, res, next) => {\n//   res.header(\"Access-Control-Allow-Origin\", \"*\"); // 모든 출처를 허용하려면 '*'를 사용합니다.\n//   res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n//   res.header(\n//     \"Access-Control-Allow-Headers\",\n//     \"Origin, X-Requested-With, Content-Type, Accept, Authorization\"\n//   );\n//   next();\n// });\n\nvar corsOptions = {\n  origin: \"http://localhost:3001/videoIndex\",\n  optionsSuccessStatus: 200\n};\napp.use(cors(corsOptions));\napp.get(\"/\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\n\n//************** 화상 시작 **************/\napp.set(\"dummyDb2\", {\n  rooms: new Array()\n});\napp.get(\"/videoIndex\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\napp.post(\"/videoIndex\", function (req, res) {\n  return res.render(\"videoIndex\");\n});\napp.post(\"/videoIndex/newRoom\", function (req, res) {\n  var _req$body = req.body,\n    title = _req$body.title,\n    auth = _req$body.auth,\n    user = _req$body.user;\n  var roomId = req.sessionID + Date.now();\n  var totalCount = 0;\n  var _app$get = app.get(\"dummyDb2\"),\n    rooms = _app$get.rooms;\n  if (auth == 0) {\n    totalCount += 1;\n  }\n  console.log(\"app.js / user :\" + user);\n  rooms.push({\n    title: title,\n    roomId: roomId,\n    totalCount: totalCount\n  });\n  console.log(\"app.js / newRoom : \" + rooms);\n  var sql = \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(1, ?, ?, now())\";\n  var value = [title, user];\n  conn.query(sql, value, function (err, result, fields) {\n    if (err) throw err;\n    console.log(result);\n  });\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"videoIndex\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/video/\".concat(roomId));\n});\napp.get(\"/video/:roomId\", function (req, res) {\n  var user = req.query.user;\n  console.log(\"/video/:roomId  >>> user : \" + user);\n  var _app$get$rooms$find = app.get(\"dummyDb2\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  console.log(\"app.js/title :\" + title);\n  res.locals.title = title;\n  var targetRoom = app.get(\"dummyDb2\").rooms.find(function (room) {\n    return room.roomId === req.params.roomId;\n  });\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\n  targetRoom.totalCount += 1;\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\n  var sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\n  var value = [user, title];\n  conn.query(sql, value, function (err, result, fields) {\n    if (err) throw err;\n    console.log(result);\n  });\n\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"video\");\n});\napp.post(\"/videoIndex/leave-room\", function (req, res) {\n  var _req$body2 = req.body,\n    title = _req$body2.title,\n    auth = _req$body2.auth;\n  console.log(\"app.js/title :\" + title);\n  console.log(\"app.js/auth :\" + auth);\n  var _app$get2 = app.get(\"dummyDb2\"),\n    rooms = _app$get2.rooms;\n  console.log(rooms);\n  console.log(\"--------------------\");\n\n  // rooms.totalCount += count;\n  // console.log(\"totalCount : \" + totalCount);\n\n  var foundRoom = rooms.find(function (room) {\n    return room.title === title;\n  });\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\n  if (foundRoom) {\n    if (auth == 1) {\n      foundRoom.totalCount -= 1;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    } else if (auth == 0) {\n      foundRoom.totalCount = 0;\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    }\n    if (foundRoom.totalCount == 0) {\n      var index = rooms.indexOf(foundRoom);\n      console.log(\"app.js/index : \" + index);\n      if (index !== -1) {\n        rooms.splice(index, 1);\n        var sql = \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\n        var value = [title];\n        conn.query(sql, value, function (err, result, fields) {\n          if (err) throw err;\n          console.log(result);\n        });\n      }\n    }\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\n    console.log(rooms);\n  }\n  return res.render(\"videoIndex\", {\n    rooms: rooms\n  });\n});\n\n//************** 화상 끝 **************/\n\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"Listening on http://localhost:3001\");\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2V4cHJlc3NTZXNzaW9uIiwiX3BhdGgiLCJvYmoiLCJfX2VzTW9kdWxlIiwibXlzcWwiLCJjb3JzIiwiY29ubiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJob3N0IiwicG9ydCIsInVzZXIiLCJwYXNzd29yZCIsImRhdGFiYXNlIiwiY29ubmVjdCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsImFwcCIsImV4cHJlc3MiLCJzZXQiLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsIl9fZGlybmFtZSIsInVzZSIsImpzb24iLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJzZXNzaW9uIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzZWNyZXQiLCJDT09LSUVfU0VDUkVUIiwiY29va2llIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJjb3JzT3B0aW9ucyIsIm9yaWdpbiIsIm9wdGlvbnNTdWNjZXNzU3RhdHVzIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicm9vbXMiLCJBcnJheSIsInBvc3QiLCJfcmVxJGJvZHkiLCJib2R5IiwidGl0bGUiLCJhdXRoIiwicm9vbUlkIiwic2Vzc2lvbklEIiwiRGF0ZSIsIm5vdyIsInRvdGFsQ291bnQiLCJfYXBwJGdldCIsInB1c2giLCJzcWwiLCJ2YWx1ZSIsInF1ZXJ5IiwicmVzdWx0IiwiZmllbGRzIiwiY2xpZW50cyIsImZvckVhY2giLCJjbGllbnQiLCJsb2NhdGlvbiIsInJlYWR5U3RhdGUiLCJPUEVOIiwic2VuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWRpcmVjdCIsImNvbmNhdCIsIl9hcHAkZ2V0JHJvb21zJGZpbmQiLCJmaW5kIiwicm9vbSIsInBhcmFtcyIsImxvY2FscyIsInRhcmdldFJvb20iLCJfcmVxJGJvZHkyIiwiX2FwcCRnZXQyIiwiZm91bmRSb29tIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibmV4dCIsIm1lc3NhZ2UiLCJOT0RFX0VOViIsInN0YXR1cyIsImV4cHJlc3NTZXJ2ZXIiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkQ6XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXHZpZGVvXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xyXG5pbXBvcnQgc2Vzc2lvbiBmcm9tIFwiZXhwcmVzcy1zZXNzaW9uXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmNvbnN0IG15c3FsID0gcmVxdWlyZShcIm15c3FsXCIpO1xyXG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XHJcblxyXG5jb25zdCBjb25uID0gbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XHJcbiAgaG9zdDogXCIxNzUuMTk4LjIwNi4xMzdcIixcclxuICBwb3J0OiAzMzA2LFxyXG4gIHVzZXI6IFwicVwiLFxyXG4gIHBhc3N3b3JkOiBcInFcIixcclxuICBkYXRhYmFzZTogXCJmb2xsYXdcIixcclxufSk7XHJcblxyXG5jb25uLmNvbm5lY3QoKGVycikgPT4ge1xyXG4gIGlmIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJNeVNRTCDsl7DqsrAg7Jik66WYXCIpO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhcIk15U1FM7JeQIOyEseqzteyggeycvOuhnCDsl7DqsrDrkJjsl4jsirXri4jri6QuXCIpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuYXBwLnNldChcInBvcnRcIiwgcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAxKTtcclxuYXBwLnNldChcInZpZXdzXCIsIF9fZGlybmFtZSArIFwiL3ZpZXdzXCIpO1xyXG4vLyBhcHAuc2V0KFwidmlld3NcIiwgcGF0aC5qb2luKF9fZGlybmFtZSwgXCIvdmlld3NcIikpO1xyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XHJcbmFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArIFwiL3B1YmxpY1wiKSk7XHJcbi8vIGFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiL3B1YmxpY1wiKSkpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuYXBwLnVzZShleHByZXNzLnVybGVuY29kZWQoeyBleHRlbmRlZDogZmFsc2UgfSkpO1xyXG5hcHAudXNlKFxyXG4gIHNlc3Npb24oe1xyXG4gICAgcmVzYXZlOiBmYWxzZSxcclxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcclxuICAgIC8vQ09PS0lFX1NFQ1JFVCDtmZjqsr0g67OA7IiY6rCAIOyEpOygleuQmOyWtCDsnojri6TrqbQg6re4IOqwkuydhCDsgqzsmqntlZjqs6AsXHJcbiAgICAvL+yEpOygleuQmOyWtCDsnojsp4Ag7JWK64uk66m0IFwic2VjcmV0XCLsnbTrnbzripQg6riw67O46rCS7J2EIOyCrOyaqe2VmOyXrCDshLjshZgg642w7J207YSw66W8IOyVlO2YuO2ZlFxyXG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5DT09LSUVfU0VDUkVUIHx8IFwic2VjcmV0XCIsXHJcbiAgICBjb29raWU6IHtcclxuICAgICAgLy9odHRwT25seTogdHJ1ZeuKlCDtgbTrnbzsnbTslrjtirjsl5DshJwg7IS47IWYIOy/oO2CpOyXkCDsoJHqt7ztlaAg65WMIEphdmFTY3JpcHTrpbwg7Ya17ZWcIOygkeq3vOydhCDrp4nripQg7Ji17IWYXHJcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxyXG4gICAgICAvL3NlY3VyZTogZmFsc2XripQg7IS47IWYIOy/oO2CpOulvCDslYjsoITtlZwg7Jew6rKwKEhUVFBTKeydhCDthrXtlbTshJzrp4wg7KCE7Iah7ZW07JW8IO2VmOuKlOyngCDsl6zrtoDrpbwg7ISk7KCV7ZWY64qUIOyYteyFmFxyXG4gICAgICBzZWN1cmU6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KVxyXG4pO1xyXG4vLyBhcHAudXNlKChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpOyAvLyDrqqjrk6Ag7Lac7LKY66W8IO2XiOyaqe2VmOugpOuptCAnKifrpbwg7IKs7Jqp7ZWp64uI64ukLlxyXG4vLyAgIHJlcy5oZWFkZXIoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzXCIsIFwiR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OU1wiKTtcclxuLy8gICByZXMuaGVhZGVyKFxyXG4vLyAgICAgXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzXCIsXHJcbi8vICAgICBcIk9yaWdpbiwgWC1SZXF1ZXN0ZWQtV2l0aCwgQ29udGVudC1UeXBlLCBBY2NlcHQsIEF1dGhvcml6YXRpb25cIlxyXG4vLyAgICk7XHJcbi8vICAgbmV4dCgpO1xyXG4vLyB9KTtcclxuXHJcbmNvbnN0IGNvcnNPcHRpb25zID0ge1xyXG4gIG9yaWdpbjogXCJodHRwOi8vbG9jYWxob3N0OjMwMDEvdmlkZW9JbmRleFwiLFxyXG4gIG9wdGlvbnNTdWNjZXNzU3RhdHVzOiAyMDAsXHJcbn07XHJcblxyXG5hcHAudXNlKGNvcnMoY29yc09wdGlvbnMpKTtcclxuXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIHJldHVybiByZXMucmVuZGVyKFwidmlkZW9JbmRleFwiKTtcclxufSk7XHJcblxyXG4vLyoqKioqKioqKioqKioqIO2ZlOyDgSDsi5zsnpEgKioqKioqKioqKioqKiovXHJcbmFwcC5zZXQoXCJkdW1teURiMlwiLCB7IHJvb21zOiBuZXcgQXJyYXkoKSB9KTtcclxuXHJcbmFwcC5nZXQoXCIvdmlkZW9JbmRleFwiLCAocmVxLCByZXMpID0+IHtcclxuICByZXR1cm4gcmVzLnJlbmRlcihcInZpZGVvSW5kZXhcIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleFwiLCAocmVxLCByZXMpID0+IHtcclxuICByZXR1cm4gcmVzLnJlbmRlcihcInZpZGVvSW5kZXhcIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleC9uZXdSb29tXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdGl0bGUsIGF1dGgsIHVzZXIgfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnN0IHJvb21JZCA9IHJlcS5zZXNzaW9uSUQgKyBEYXRlLm5vdygpO1xyXG4gIGxldCB0b3RhbENvdW50ID0gMDtcclxuICBjb25zdCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYjJcIik7XHJcblxyXG4gIGlmIChhdXRoID09IDApIHtcclxuICAgIHRvdGFsQ291bnQgKz0gMTtcclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzIC8gdXNlciA6XCIgKyB1c2VyKTtcclxuXHJcbiAgcm9vbXMucHVzaCh7IHRpdGxlLCByb29tSWQsIHRvdGFsQ291bnQgfSk7XHJcbiAgY29uc29sZS5sb2coXCJhcHAuanMgLyBuZXdSb29tIDogXCIgKyByb29tcyk7XHJcblxyXG4gIGNvbnN0IHNxbCA9XHJcbiAgICBcIklOU0VSVCBJTlRPIGNoYXQoY2hhdF90eXBlLCBjaGF0X3RpdGxlLCB1c2VyX2lkLCBjaGF0X2NyZWF0ZWQpIFZBTFVFUygxLCA/LCA/LCBub3coKSlcIjtcclxuICBjb25zdCB2YWx1ZSA9IFt0aXRsZSwgdXNlcl07XHJcblxyXG4gIGNvbm4ucXVlcnkoc3FsLCB2YWx1ZSwgKGVyciwgcmVzdWx0LCBmaWVsZHMpID0+IHtcclxuICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgfSk7XHJcblxyXG4gIGFwcC5nZXQoXCJ3c3NcIikuY2xpZW50cy5mb3JFYWNoKChjbGllbnQpID0+IHtcclxuICAgIGlmIChjbGllbnQubG9jYXRpb24gPT09IFwidmlkZW9JbmRleFwiICYmIGNsaWVudC5yZWFkeVN0YXRlID09PSBjbGllbnQuT1BFTilcclxuICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkocm9vbXMpKTtcclxuICB9KTtcclxuICByZXR1cm4gcmVzLnJlZGlyZWN0KGAvdmlkZW8vJHtyb29tSWR9YCk7XHJcbn0pO1xyXG5cclxuYXBwLmdldChcIi92aWRlby86cm9vbUlkXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdXNlciB9ID0gcmVxLnF1ZXJ5O1xyXG4gIGNvbnNvbGUubG9nKFwiL3ZpZGVvLzpyb29tSWQgID4+PiB1c2VyIDogXCIgKyB1c2VyKTtcclxuICBjb25zdCB7IHRpdGxlIH0gPSBhcHBcclxuICAgIC5nZXQoXCJkdW1teURiMlwiKVxyXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XHJcblxyXG4gIC8vcmVzLmxvY2Fsc+uKlCDsnZHri7Ug6rCd7LK0KHJlcynsnZgg7IaN7ISx7Jy866GcLCDtlbTri7kg7J2R64u17JeQIOuMgO2VnCDroZzsu6wg67OA7IiY66W8IOyEpOygle2VmOqzoCDsgqzsmqntlaAg7IiYIOyeiOqyjCDtlbTspIxcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90aXRsZSA6XCIgKyB0aXRsZSk7XHJcbiAgcmVzLmxvY2Fscy50aXRsZSA9IHRpdGxlO1xyXG5cclxuICBjb25zdCB0YXJnZXRSb29tID0gYXBwXHJcbiAgICAuZ2V0KFwiZHVtbXlEYjJcIilcclxuICAgIC5yb29tcy5maW5kKChyb29tKSA9PiByb29tLnJvb21JZCA9PT0gcmVxLnBhcmFtcy5yb29tSWQpO1xyXG5cclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90YXJnZXRSb29tMSA6XCIgKyB0YXJnZXRSb29tLnRvdGFsQ291bnQpO1xyXG4gIHRhcmdldFJvb20udG90YWxDb3VudCArPSAxO1xyXG5cclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy90YXJnZXRSb29tMiA6XCIgKyB0YXJnZXRSb29tLnRvdGFsQ291bnQpO1xyXG5cclxuICBjb25zdCBzcWwgPSBcIlVQREFURSBjaGF0IFNFVCBsYXd5ZXJfaWQ9PyBXSEVSRSBjaGF0X3RpdGxlID0gP1wiO1xyXG4gIGNvbnN0IHZhbHVlID0gW3VzZXIsIHRpdGxlXTtcclxuXHJcbiAgY29ubi5xdWVyeShzcWwsIHZhbHVlLCAoZXJyLCByZXN1bHQsIGZpZWxkcykgPT4ge1xyXG4gICAgaWYgKGVycikgdGhyb3cgZXJyO1xyXG4gICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICB9KTtcclxuXHJcbiAgLy9jaGF0IO2MjOydvOydhCDroIzrjZTrp4HtlZjsl6wg7ZW064u5IO2MjOydvOyXkOyEnCB0aXRsZSDrs4DsiJjrpbwg7IKs7Jqp7ZWgIOyImCDsnojsnYxcclxuICByZXMucmVuZGVyKFwidmlkZW9cIik7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoXCIvdmlkZW9JbmRleC9sZWF2ZS1yb29tXCIsIChyZXEsIHJlcykgPT4ge1xyXG4gIGNvbnN0IHsgdGl0bGUsIGF1dGggfSA9IHJlcS5ib2R5O1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RpdGxlIDpcIiArIHRpdGxlKTtcclxuICBjb25zb2xlLmxvZyhcImFwcC5qcy9hdXRoIDpcIiArIGF1dGgpO1xyXG4gIGxldCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYjJcIik7XHJcbiAgY29uc29sZS5sb2cocm9vbXMpO1xyXG4gIGNvbnNvbGUubG9nKFwiLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XHJcblxyXG4gIC8vIHJvb21zLnRvdGFsQ291bnQgKz0gY291bnQ7XHJcbiAgLy8gY29uc29sZS5sb2coXCJ0b3RhbENvdW50IDogXCIgKyB0b3RhbENvdW50KTtcclxuXHJcbiAgY29uc3QgZm91bmRSb29tID0gcm9vbXMuZmluZCgocm9vbSkgPT4gcm9vbS50aXRsZSA9PT0gdGl0bGUpO1xyXG4gIGNvbnNvbGUubG9nKFwiYXBwLmpzL2ZvdW5kUm9vbS50b3RhbENvdW50IDpcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuXHJcbiAgaWYgKGZvdW5kUm9vbSkge1xyXG4gICAgaWYgKGF1dGggPT0gMSkge1xyXG4gICAgICBmb3VuZFJvb20udG90YWxDb3VudCAtPSAxO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImFwcC5qcy90b3RhbENvdW50MTExIDogXCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XHJcbiAgICB9IGVsc2UgaWYgKGF1dGggPT0gMCkge1xyXG4gICAgICBmb3VuZFJvb20udG90YWxDb3VudCA9IDA7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RvdGFsQ291bnQxMTEgOiBcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZm91bmRSb29tLnRvdGFsQ291bnQgPT0gMCkge1xyXG4gICAgICBjb25zdCBpbmRleCA9IHJvb21zLmluZGV4T2YoZm91bmRSb29tKTtcclxuICAgICAgY29uc29sZS5sb2coXCJhcHAuanMvaW5kZXggOiBcIiArIGluZGV4KTtcclxuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIHJvb21zLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICAgIGNvbnN0IHNxbCA9XHJcbiAgICAgICAgICBcIlVQREFURSBjaGF0IFNFVCBjaGF0dGluZ19jbG9zZWQ9bm93KCkgV0hFUkUgY2hhdF90aXRsZSA9ID9cIjtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IFt0aXRsZV07XHJcblxyXG4gICAgICAgIGNvbm4ucXVlcnkoc3FsLCB2YWx1ZSwgKGVyciwgcmVzdWx0LCBmaWVsZHMpID0+IHtcclxuICAgICAgICAgIGlmIChlcnIpIHRocm93IGVycjtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RvdGFsQ291bnQyMjIgOiBcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcclxuICAgIGNvbnNvbGUubG9nKHJvb21zKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXMucmVuZGVyKFwidmlkZW9JbmRleFwiLCB7IHJvb21zIH0pO1xyXG59KTtcclxuXHJcbi8vKioqKioqKioqKioqKiog7ZmU7IOBIOuBnSAqKioqKioqKioqKioqKi9cclxuXHJcbmFwcC51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcclxuICByZXMubG9jYWxzLm1lc3NhZ2UgPSBlcnIubWVzc2FnZTtcclxuICByZXMubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVyciA6IHt9O1xyXG4gIHJlcy5zdGF0dXMoZXJyLnN0YXR1cyB8fCA1MDApLnJlbmRlcihcImVycm9yXCIpO1xyXG59KTtcclxuXHJcbmNvbnN0IGV4cHJlc3NTZXJ2ZXIgPSBhcHAubGlzdGVuKGFwcC5nZXQoXCJwb3J0XCIpLCAoKSA9PlxyXG4gIGNvbnNvbGUubG9nKGBMaXN0ZW5pbmcgb24gaHR0cDovL2xvY2FsaG9zdDozMDAxYClcclxuKTtcclxuXHJcbi8vIHNvY2tldFxyXG5yZXF1aXJlKFwiLi9zb2NrZXRcIikoZXhwcmVzc1NlcnZlciwgYXBwKTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGVBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QixTQUFBRCx1QkFBQUksR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLGdCQUFBQSxHQUFBO0FBQ3hCLElBQU1FLEtBQUssR0FBR0wsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUM5QixJQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFFNUIsSUFBTU8sSUFBSSxH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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_expressSession","_path","obj","__esModule","mysql","cors","conn","createConnection","host","port","user","password","database","connect","err","console","error","log","app","express","set","process","env","PORT","__dirname","use","json","urlencoded","extended","session","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","corsOptions","origin","optionsSuccessStatus","get","req","res","render","rooms","Array","post","_req$body","body","title","auth","roomId","sessionID","Date","now","totalCount","_app$get","push","sql","value","query","result","fields","clients","forEach","client","location","readyState","OPEN","send","JSON","stringify","redirect","concat","_app$get$rooms$find","find","room","params","locals","targetRoom","_req$body2","_app$get2","foundRoom","index","indexOf","splice","next","message","NODE_ENV","status","expressServer","listen"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["app.js"],"sourcesContent":["import express from \"express\";\r\nimport session from \"express-session\";\r\nimport path from \"path\";\r\nconst mysql = require(\"mysql\");\r\nconst cors = require(\"cors\");\r\n\r\nconst conn = mysql.createConnection({\r\n  host: \"175.198.206.137\",\r\n  port: 3306,\r\n  user: \"q\",\r\n  password: \"q\",\r\n  database: \"follaw\",\r\n});\r\n\r\nconn.connect((err) => {\r\n  if (err) {\r\n    console.error(\"MySQL 연결 오류\");\r\n    return;\r\n  }\r\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\r\n});\r\n\r\nconst app = express();\r\napp.set(\"port\", process.env.PORT || 3001);\r\napp.set(\"views\", __dirname + \"/views\");\r\n// app.set(\"views\", path.join(__dirname, \"/views\"));\r\napp.set(\"view engine\", \"pug\");\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\n// app.use(\"/public\", express.static(path.join(__dirname, \"/public\")));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(\r\n  session({\r\n    resave: false,\r\n    saveUninitialized: false,\r\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\r\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\r\n    secret: process.env.COOKIE_SECRET || \"secret\",\r\n    cookie: {\r\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\r\n      httpOnly: true,\r\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\r\n      secure: false,\r\n    },\r\n  })\r\n);\r\n// app.use((req, res, next) => {\r\n//   res.header(\"Access-Control-Allow-Origin\", \"*\"); // 모든 출처를 허용하려면 '*'를 사용합니다.\r\n//   res.header(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\r\n//   res.header(\r\n//     \"Access-Control-Allow-Headers\",\r\n//     \"Origin, X-Requested-With, Content-Type, Accept, Authorization\"\r\n//   );\r\n//   next();\r\n// });\r\n\r\nconst corsOptions = {\r\n  origin: \"http://localhost:3001/videoIndex\",\r\n  optionsSuccessStatus: 200,\r\n};\r\n\r\napp.use(cors(corsOptions));\r\n\r\napp.get(\"/\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\n//************** 화상 시작 **************/\r\napp.set(\"dummyDb2\", { rooms: new Array() });\r\n\r\napp.get(\"/videoIndex\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\napp.post(\"/videoIndex\", (req, res) => {\r\n  return res.render(\"videoIndex\");\r\n});\r\n\r\napp.post(\"/videoIndex/newRoom\", (req, res) => {\r\n  const { title, auth, user } = req.body;\r\n  const roomId = req.sessionID + Date.now();\r\n  let totalCount = 0;\r\n  const { rooms } = app.get(\"dummyDb2\");\r\n\r\n  if (auth == 0) {\r\n    totalCount += 1;\r\n  }\r\n\r\n  console.log(\"app.js / user :\" + user);\r\n\r\n  rooms.push({ title, roomId, totalCount });\r\n  console.log(\"app.js / newRoom : \" + rooms);\r\n\r\n  const sql =\r\n    \"INSERT INTO chat(chat_type, chat_title, user_id, chat_created) VALUES(1, ?, ?, now())\";\r\n  const value = [title, user];\r\n\r\n  conn.query(sql, value, (err, result, fields) => {\r\n    if (err) throw err;\r\n    console.log(result);\r\n  });\r\n\r\n  app.get(\"wss\").clients.forEach((client) => {\r\n    if (client.location === \"videoIndex\" && client.readyState === client.OPEN)\r\n      client.send(JSON.stringify(rooms));\r\n  });\r\n  return res.redirect(`/video/${roomId}`);\r\n});\r\n\r\napp.get(\"/video/:roomId\", (req, res) => {\r\n  const { user } = req.query;\r\n  console.log(\"/video/:roomId  >>> user : \" + user);\r\n  const { title } = app\r\n    .get(\"dummyDb2\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\r\n  console.log(\"app.js/title :\" + title);\r\n  res.locals.title = title;\r\n\r\n  const targetRoom = app\r\n    .get(\"dummyDb2\")\r\n    .rooms.find((room) => room.roomId === req.params.roomId);\r\n\r\n  console.log(\"app.js/targetRoom1 :\" + targetRoom.totalCount);\r\n  targetRoom.totalCount += 1;\r\n\r\n  console.log(\"app.js/targetRoom2 :\" + targetRoom.totalCount);\r\n\r\n  const sql = \"UPDATE chat SET lawyer_id=? WHERE chat_title = ?\";\r\n  const value = [user, title];\r\n\r\n  conn.query(sql, value, (err, result, fields) => {\r\n    if (err) throw err;\r\n    console.log(result);\r\n  });\r\n\r\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\r\n  res.render(\"video\");\r\n});\r\n\r\napp.post(\"/videoIndex/leave-room\", (req, res) => {\r\n  const { title, auth } = req.body;\r\n  console.log(\"app.js/title :\" + title);\r\n  console.log(\"app.js/auth :\" + auth);\r\n  let { rooms } = app.get(\"dummyDb2\");\r\n  console.log(rooms);\r\n  console.log(\"--------------------\");\r\n\r\n  // rooms.totalCount += count;\r\n  // console.log(\"totalCount : \" + totalCount);\r\n\r\n  const foundRoom = rooms.find((room) => room.title === title);\r\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\r\n\r\n  if (foundRoom) {\r\n    if (auth == 1) {\r\n      foundRoom.totalCount -= 1;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    } else if (auth == 0) {\r\n      foundRoom.totalCount = 0;\r\n      console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\r\n    }\r\n\r\n    if (foundRoom.totalCount == 0) {\r\n      const index = rooms.indexOf(foundRoom);\r\n      console.log(\"app.js/index : \" + index);\r\n      if (index !== -1) {\r\n        rooms.splice(index, 1);\r\n\r\n        const sql =\r\n          \"UPDATE chat SET chatting_closed=now() WHERE chat_title = ?\";\r\n        const value = [title];\r\n\r\n        conn.query(sql, value, (err, result, fields) => {\r\n          if (err) throw err;\r\n          console.log(result);\r\n        });\r\n      }\r\n    }\r\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\r\n    console.log(rooms);\r\n  }\r\n\r\n  return res.render(\"videoIndex\", { rooms });\r\n});\r\n\r\n//************** 화상 끝 **************/\r\n\r\napp.use((err, req, res, next) => {\r\n  res.locals.message = err.message;\r\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\r\n  res.status(err.status || 500).render(\"error\");\r\n});\r\n\r\nconst expressServer = app.listen(app.get(\"port\"), () =>\r\n  console.log(`Listening on http://localhost:3001`)\r\n);\r\n\r\n// socket\r\nrequire(\"./socket\")(expressServer, app);\r\n"],"mappings":"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"}},"mtime":1706673671853},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/videoIndex\") {\n      ws.location = \"videoIndex\";\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\n    } else if (req.url.startsWith(\"/video/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      console.log(\"socket >>> ws.location : \" + ws.location);\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"enter\") {\n            var welcome = data.data;\n            console.log(\"welcome *********************\");\n            console.log(welcome);\n            client.send(JSON.stringify({\n              type: \"enter\",\n              data: welcome\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"name\") {\n            var clientName = data.data;\n            console.log(\"clientName ******************\");\n            console.log(clientName);\n            client.send(JSON.stringify({\n              type: \"name\",\n              data: clientName\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"offer\") {\n            var offerA = data.data;\n            console.log(\"offerA ************************\");\n            console.log(offerA);\n            client.send(JSON.stringify({\n              type: \"offer\",\n              data: offerA\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"answer\") {\n            var answer = data.data;\n            console.log(\"answer ************************\");\n            console.log(answer);\n            client.send(JSON.stringify({\n              type: \"answer\",\n              data: answer\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"ice\") {\n            var ice = data.data;\n            console.log(\"ice ************************\");\n            console.log(ice);\n            client.send(JSON.stringify({\n              type: \"ice\",\n              data: ice\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"chat\") {\n            var _message = data.data;\n            console.log(\"message ************************\");\n            console.log(_message);\n            client.send(JSON.stringify({\n              type: \"chat\",\n              data: _message\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"delete\") {\n            var title = data.data;\n            console.log(\"title ************************\");\n            console.log(title);\n            client.send(JSON.stringify({\n              type: \"delete\",\n              data: title\n            }));\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJvZmZlckEiLCJhbnN3ZXIiLCJpY2UiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFx2aWRlb1xcIiwic291cmNlcyI6WyJzb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd3MgPSByZXF1aXJlKFwid3NcIik7XHJcblxyXG4vL21vZHVsZS5leHBvcnRzIDog66qo65OI7J2EIOuCtOuztOuCtOuKlCDrjbAg7IKs7Jqp65CY64qUIO2KueyImO2VnCDqsJ3ssrRcclxuLy/ri6Trpbgg7YyM7J287JeQ7IScIO2VtOuLuSDrqqjrk4jsnYQg6rCA7KC47JmAIOyCrOyaqSDqsIDriqUocmVxdWlyZSgpIOydtOyaqSlcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcclxuICAvL3dzIOuqqOuTiOydmCBTZXJ2ZXIg7YG0656Y7IqkKFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY6rOgIOq0gOumrCnrpbwg7IKs7Jqp7ZWY7JesIFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY64qUIOq1rOusuFxyXG4gIGNvbnN0IHdzcyA9IG5ldyB3cy5TZXJ2ZXIoeyBzZXJ2ZXIgfSk7XHJcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXHJcbiAgLy8gdXNlZCBhdCBhcHAucG9zdCgnbmV3cm9vbScpIG9uIGFwcC5qc1xyXG4gIGFwcC5zZXQoXCJ3c3NcIiwgd3NzKTtcclxuXHJcbiAgLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxuICB3c3Mub24oXCJjb25uZWN0aW9uXCIsICh3cywgcmVxKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIldlYlNvY2tldCBjb25uZWN0ZWQgdG86IFwiICsgcmVxLnVybCk7XHJcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvdmlkZW9JbmRleFwiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJ2aWRlb0luZGV4XCI7XHJcbiAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoYXBwLmdldChcImR1bW15RGIyXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi92aWRlby9cIikpIHtcclxuICAgICAgd3MubG9jYXRpb24gPSByZXEudXJsLnNwbGl0KFwiL1wiKVsyXTtcclxuICAgICAgY29uc29sZS5sb2coXCJzb2NrZXQgPj4+IHdzLmxvY2F0aW9uIDogXCIgKyB3cy5sb2NhdGlvbik7XHJcbiAgICAgIHdzLm9uKFwibWVzc2FnZVwiLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UpO1xyXG4gICAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImVudGVyXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWxjb21lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIndlbGNvbWUgKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3ZWxjb21lKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImVudGVyXCIsIGRhdGE6IHdlbGNvbWUgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uICYmXHJcbiAgICAgICAgICAgIGRhdGEudHlwZSA9PT0gXCJuYW1lXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBjbGllbnROYW1lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudE5hbWUgKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjbGllbnROYW1lKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm5hbWVcIiwgZGF0YTogY2xpZW50TmFtZSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcIm9mZmVyXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBvZmZlckEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib2ZmZXJBICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cob2ZmZXJBKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm9mZmVyXCIsIGRhdGE6IG9mZmVyQSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImFuc3dlclwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFuc3dlciAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFuc3dlcik7XHJcbiAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJhbnN3ZXJcIiwgZGF0YTogYW5zd2VyIH0pKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIGNsaWVudCAhPT0gd3MgJiZcclxuICAgICAgICAgICAgY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4gJiZcclxuICAgICAgICAgICAgY2xpZW50LmxvY2F0aW9uID09PSB3cy5sb2NhdGlvbiAmJlxyXG4gICAgICAgICAgICBkYXRhLnR5cGUgPT09IFwiaWNlXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBpY2UgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaWNlICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaWNlKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImljZVwiLCBkYXRhOiBpY2UgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uICYmXHJcbiAgICAgICAgICAgIGRhdGEudHlwZSA9PT0gXCJjaGF0XCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1lc3NhZ2UgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImRlbGV0ZVwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGl0bGUgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSk7XHJcbiAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB3cy5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgYXBwLmxvY2Fscy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgYXBwLmxvY2Fscy5lcnJvciA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcIiBwcm9kdWN0aW9uXCIgPyBlcnJvciA6IHt9O1xyXG4gICAgICBhcHAucmVuZGVyKFwiZXJyb3JcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3cy5vbihcImNsb3NlXCIsICgpID0+IGNvbnNvbGUubG9nKGAke3JlcS51cmx9IGNvbm5lY3Rpb24gY2xvc2VgKSk7XHJcbiAgfSk7XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0FBRXhCO0FBQ0E7QUFDQUMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBQ0MsTUFBTSxFQUFFQyxHQUFHLEVBQUs7RUFDaEM7RUFDQSxJQUFNQyxHQUFHLEdBQUcsSUFBSU4sRUFBRSxDQUFDTyxNQUFNLENBQUM7SUFBRUgsTUFBTSxFQUFOQTtFQUFPLENBQUMsQ0FBQztFQUNyQztFQUNBO0VBQ0FDLEdBQUcsQ0FBQ0csR0FBRyxDQUFDLEtBQUssRUFBRUYsR0FBRyxDQUFDOztFQUVuQjtFQUNBQSxHQUFHLENBQUNHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBQ1QsRUFBRSxFQUFFVSxHQUFHLEVBQUs7SUFDaENDLE9BQU8sQ0FB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","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","offerA","answer","ice","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/videoIndex\") {\r\n      ws.location = \"videoIndex\";\r\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\r\n    } else if (req.url.startsWith(\"/video/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      console.log(\"socket >>> ws.location : \" + ws.location);\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"enter\"\r\n          ) {\r\n            const welcome = data.data;\r\n            console.log(\"welcome *********************\");\r\n            console.log(welcome);\r\n            client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"name\"\r\n          ) {\r\n            const clientName = data.data;\r\n            console.log(\"clientName ******************\");\r\n            console.log(clientName);\r\n            client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"offer\"\r\n          ) {\r\n            const offerA = data.data;\r\n            console.log(\"offerA ************************\");\r\n            console.log(offerA);\r\n            client.send(JSON.stringify({ type: \"offer\", data: offerA }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"answer\"\r\n          ) {\r\n            const answer = data.data;\r\n            console.log(\"answer ************************\");\r\n            console.log(answer);\r\n            client.send(JSON.stringify({ type: \"answer\", data: answer }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"ice\"\r\n          ) {\r\n            const ice = data.data;\r\n            console.log(\"ice ************************\");\r\n            console.log(ice);\r\n            client.send(JSON.stringify({ type: \"ice\", data: ice }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"chat\"\r\n          ) {\r\n            const message = data.data;\r\n            console.log(\"message ************************\");\r\n            console.log(message);\r\n            client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"delete\"\r\n          ) {\r\n            const title = data.data;\r\n            console.log(\"title ************************\");\r\n            console.log(title);\r\n            client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706673671855},"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\Final_Project\\\\src\\\\video\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\Final_Project\",\"filename\":\"D:\\\\Final_Project\\\\src\\\\video\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.9:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    console.log(\"WebSocket connected to: \" + req.url);\n    if (req.url === \"/videoIndex\") {\n      ws.location = \"videoIndex\";\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\n    } else if (req.url.startsWith(\"/video/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      console.log(\"socket >>> ws.location : \" + ws.location);\n      ws.on(\"message\", function (message) {\n        var data = JSON.parse(message);\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"enter\") {\n            var welcome = data.data;\n            console.log(\"welcome *********************\");\n            console.log(welcome);\n            client.send(JSON.stringify({\n              type: \"enter\",\n              data: welcome\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"name\") {\n            var clientName = data.data;\n            console.log(\"clientName ******************\");\n            console.log(clientName);\n            client.send(JSON.stringify({\n              type: \"name\",\n              data: clientName\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"offer\") {\n            var offerA = data.data;\n            console.log(\"offerA ************************\");\n            console.log(offerA);\n            client.send(JSON.stringify({\n              type: \"offer\",\n              data: offerA\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"answer\") {\n            var answer = data.data;\n            console.log(\"answer ************************\");\n            console.log(answer);\n            client.send(JSON.stringify({\n              type: \"answer\",\n              data: answer\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"ice\") {\n            var ice = data.data;\n            console.log(\"ice ************************\");\n            console.log(ice);\n            client.send(JSON.stringify({\n              type: \"ice\",\n              data: ice\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"chat\") {\n            var _message = data.data;\n            console.log(\"message ************************\");\n            console.log(_message);\n            client.send(JSON.stringify({\n              type: \"chat\",\n              data: _message\n            }));\n          } else if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location && data.type === \"delete\") {\n            var title = data.data;\n            console.log(\"title ************************\");\n            console.log(title);\n            client.send(JSON.stringify({\n              type: \"delete\",\n              data: title\n            }));\n          }\n        });\n      });\n    }\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJjb25zb2xlIiwibG9nIiwidXJsIiwibG9jYXRpb24iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInJvb21zIiwic3RhcnRzV2l0aCIsInNwbGl0IiwibWVzc2FnZSIsImRhdGEiLCJwYXJzZSIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJ0eXBlIiwid2VsY29tZSIsImNsaWVudE5hbWUiLCJvZmZlckEiLCJhbnN3ZXIiLCJpY2UiLCJ0aXRsZSIsImVycm9yIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcRmluYWxfUHJvamVjdFxcc3JjXFx2aWRlb1xcIiwic291cmNlcyI6WyJzb2NrZXQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgd3MgPSByZXF1aXJlKFwid3NcIik7XHJcblxyXG4vL21vZHVsZS5leHBvcnRzIDog66qo65OI7J2EIOuCtOuztOuCtOuKlCDrjbAg7IKs7Jqp65CY64qUIO2KueyImO2VnCDqsJ3ssrRcclxuLy/ri6Trpbgg7YyM7J287JeQ7IScIO2VtOuLuSDrqqjrk4jsnYQg6rCA7KC47JmAIOyCrOyaqSDqsIDriqUocmVxdWlyZSgpIOydtOyaqSlcclxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcclxuICAvL3dzIOuqqOuTiOydmCBTZXJ2ZXIg7YG0656Y7IqkKFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY6rOgIOq0gOumrCnrpbwg7IKs7Jqp7ZWY7JesIFdlYlNvY2tldCDshJzrsoTrpbwg7IOd7ISx7ZWY64qUIOq1rOusuFxyXG4gIGNvbnN0IHdzcyA9IG5ldyB3cy5TZXJ2ZXIoeyBzZXJ2ZXIgfSk7XHJcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXHJcbiAgLy8gdXNlZCBhdCBhcHAucG9zdCgnbmV3cm9vbScpIG9uIGFwcC5qc1xyXG4gIGFwcC5zZXQoXCJ3c3NcIiwgd3NzKTtcclxuXHJcbiAgLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxuICB3c3Mub24oXCJjb25uZWN0aW9uXCIsICh3cywgcmVxKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhcIldlYlNvY2tldCBjb25uZWN0ZWQgdG86IFwiICsgcmVxLnVybCk7XHJcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvdmlkZW9JbmRleFwiKSB7XHJcbiAgICAgIHdzLmxvY2F0aW9uID0gXCJ2aWRlb0luZGV4XCI7XHJcbiAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoYXBwLmdldChcImR1bW15RGIyXCIpLnJvb21zKSk7XHJcbiAgICB9IGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcIi92aWRlby9cIikpIHtcclxuICAgICAgd3MubG9jYXRpb24gPSByZXEudXJsLnNwbGl0KFwiL1wiKVsyXTtcclxuICAgICAgY29uc29sZS5sb2coXCJzb2NrZXQgPj4+IHdzLmxvY2F0aW9uIDogXCIgKyB3cy5sb2NhdGlvbik7XHJcbiAgICAgIHdzLm9uKFwibWVzc2FnZVwiLCAobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UpO1xyXG4gICAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImVudGVyXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCB3ZWxjb21lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIndlbGNvbWUgKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3ZWxjb21lKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImVudGVyXCIsIGRhdGE6IHdlbGNvbWUgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uICYmXHJcbiAgICAgICAgICAgIGRhdGEudHlwZSA9PT0gXCJuYW1lXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBjbGllbnROYW1lID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNsaWVudE5hbWUgKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjbGllbnROYW1lKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm5hbWVcIiwgZGF0YTogY2xpZW50TmFtZSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcIm9mZmVyXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBvZmZlckEgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib2ZmZXJBICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cob2ZmZXJBKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcIm9mZmVyXCIsIGRhdGE6IG9mZmVyQSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImFuc3dlclwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgYW5zd2VyID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImFuc3dlciAqKioqKioqKioqKioqKioqKioqKioqKipcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFuc3dlcik7XHJcbiAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJhbnN3ZXJcIiwgZGF0YTogYW5zd2VyIH0pKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoXHJcbiAgICAgICAgICAgIGNsaWVudCAhPT0gd3MgJiZcclxuICAgICAgICAgICAgY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4gJiZcclxuICAgICAgICAgICAgY2xpZW50LmxvY2F0aW9uID09PSB3cy5sb2NhdGlvbiAmJlxyXG4gICAgICAgICAgICBkYXRhLnR5cGUgPT09IFwiaWNlXCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBpY2UgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaWNlICoqKioqKioqKioqKioqKioqKioqKioqKlwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaWNlKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImljZVwiLCBkYXRhOiBpY2UgfSkpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChcclxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxyXG4gICAgICAgICAgICBjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTiAmJlxyXG4gICAgICAgICAgICBjbGllbnQubG9jYXRpb24gPT09IHdzLmxvY2F0aW9uICYmXHJcbiAgICAgICAgICAgIGRhdGEudHlwZSA9PT0gXCJjaGF0XCJcclxuICAgICAgICAgICkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIm1lc3NhZ2UgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgY2xpZW50LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiBcImNoYXRcIiwgZGF0YTogbWVzc2FnZSB9KSk7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKFxyXG4gICAgICAgICAgICBjbGllbnQgIT09IHdzICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmXHJcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24gJiZcclxuICAgICAgICAgICAgZGF0YS50eXBlID09PSBcImRlbGV0ZVwiXHJcbiAgICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGl0bGUgKioqKioqKioqKioqKioqKioqKioqKioqXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSk7XHJcbiAgICAgICAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJkZWxldGVcIiwgZGF0YTogdGl0bGUgfSkpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB3cy5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcclxuICAgICAgYXBwLmxvY2Fscy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcclxuICAgICAgYXBwLmxvY2Fscy5lcnJvciA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcIiBwcm9kdWN0aW9uXCIgPyBlcnJvciA6IHt9O1xyXG4gICAgICBhcHAucmVuZGVyKFwiZXJyb3JcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB3cy5vbihcImNsb3NlXCIsICgpID0+IGNvbnNvbGUubG9nKGAke3JlcS51cmx9IGNvbm5lY3Rpb24gY2xvc2VgKSk7XHJcbiAgfSk7XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxFQUFFLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0FBRXhCO0FBQ0E7QUFDQUMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBQ0MsTUFBTSxFQUFFQyxHQUFHLEVBQUs7RUFDaEM7RUFDQSxJQUFNQyxHQUFHLEdBQUcsSUFBSU4sRUFBRSxDQUFDTyxNQUFNLENBQUM7SUFBRUgsTUFBTSxFQUFOQTtFQUFPLENBQUMsQ0FBQztFQUNyQztFQUNBO0VBQ0FDLEdBQUcsQ0FBQ0csR0FBRyxDQUFDLEtBQUssRUFBRUYsR0FBRyxDQUFDOztFQUVuQjtFQUNBQSxHQUFHLENBQUNHLEVBQUUsQ0FBQyxZQUFZLEVBQUUsVUFBQ1QsRUFBRSxFQUFFVSxHQUFHLEVBQUs7SUFDaENDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLDBCQUEwQixHQUFHRixHQUFHLENBQUNHLEdBQUcsQ0FBQztJQUNqRCxJQUFJSCxHQUFHLENBQUNHLEdBQUcsS0FBSyxhQUFhLEVBQUU7TUFDN0JiLEVBQUUsQ0FBQ2MsUUFBUSxHQUFHLFlBQVk7TUFDMUJkLEVBQUUsQ0FBQ2UsSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQ1osR0FBRyxDQUFDYSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUNDLEtBQUssQ0FBQyxDQUFDO0lBQ3BELENBQUMsTUFBTSxJQUFJVCxHQUFHLENBQUNHLEdBQUcsQ0FBQ08sVUFBVSxDQUFDLFNBQVMsQ0FBQyxFQUFFO01BQ3hDcEIsRUFBRSxDQUFDYyxRQUFRLEdBQUdKLEdBQUcsQ0FBQ0csR0FBRyxDQUFDUSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ25DVixPQUFPLENBQUNDLEdBQUcsQ0FBQywyQkFBMkIsR0FBR1osRUFBRSxDQUFDYyxRQUFRLENBQUM7TUFDdERkLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDYSxPQUFPLEVBQUs7UUFDNUIsSUFBTUMsSUFBSSxHQUFHUCxJQUFJLENBQUNRLEtBQUssQ0FBQ0YsT0FBTyxDQUFDO1FBQ2hDaEIsR0FBRyxDQUFDbUIsT0FBTyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsTUFBTSxFQUFLO1VBQzlCLElBQ0VBLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssT0FBTyxFQUNyQjtZQUNBLElBQU1DLE9BQU8sR0FBR1IsSUFBSSxDQUFDQSxJQUFJO1lBQ3pCWixPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztZQUM1Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNtQixPQUFPLENBQUM7WUFDcEJKLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFYSxJQUFJLEVBQUUsT0FBTztjQUFFUCxJQUFJLEVBQUVRO1lBQVEsQ0FBQyxDQUFDLENBQUM7VUFDL0QsQ0FBQyxNQUFNLElBQ0xKLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssTUFBTSxFQUNwQjtZQUNBLElBQU1FLFVBQVUsR0FBR1QsSUFBSSxDQUFDQSxJQUFJO1lBQzVCWixPQUFPLENBQUNDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQztZQUM1Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNvQixVQUFVLENBQUM7WUFDdkJMLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFYSxJQUFJLEVBQUUsTUFBTTtjQUFFUCxJQUFJLEVBQUVTO1lBQVcsQ0FBQyxDQUFDLENBQUM7VUFDakUsQ0FBQyxNQUFNLElBQ0xMLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssT0FBTyxFQUNyQjtZQUNBLElBQU1HLE1BQU0sR0FBR1YsSUFBSSxDQUFDQSxJQUFJO1lBQ3hCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQztZQUM5Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNxQixNQUFNLENBQUM7WUFDbkJOLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFYSxJQUFJLEVBQUUsT0FBTztjQUFFUCxJQUFJLEVBQUVVO1lBQU8sQ0FBQyxDQUFDLENBQUM7VUFDOUQsQ0FBQyxNQUFNLElBQ0xOLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssUUFBUSxFQUN0QjtZQUNBLElBQU1JLE1BQU0sR0FBR1gsSUFBSSxDQUFDQSxJQUFJO1lBQ3hCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxpQ0FBaUMsQ0FBQztZQUM5Q0QsT0FBTyxDQUFDQyxHQUFHLENBQUNzQixNQUFNLENBQUM7WUFDbkJQLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFYSxJQUFJLEVBQUUsUUFBUTtjQUFFUCxJQUFJLEVBQUVXO1lBQU8sQ0FBQyxDQUFDLENBQUM7VUFDL0QsQ0FBQyxNQUFNLElBQ0xQLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssS0FBSyxFQUNuQjtZQUNBLElBQU1LLEdBQUcsR0FBR1osSUFBSSxDQUFDQSxJQUFJO1lBQ3JCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQztZQUMzQ0QsT0FBTyxDQUFDQyxHQUFHLENBQUN1QixHQUFHLENBQUM7WUFDaEJSLE1BQU0sQ0FBQ1osSUFBSSxDQUFDQyxJQUFJLENBQUNDLFNBQVMsQ0FBQztjQUFFYSxJQUFJLEVBQUUsS0FBSztjQUFFUCxJQUFJLEVBQUVZO1lBQUksQ0FBQyxDQUFDLENBQUM7VUFDekQsQ0FBQyxNQUFNLElBQ0xSLE1BQU0sS0FBSzNCLEVBQUUsSUFDYjJCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLNUIsRUFBRSxDQUFDNkIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDYixRQUFRLEtBQUtkLEVBQUUsQ0FBQ2MsUUFBUSxJQUMvQlMsSUFBSSxDQUFDTyxJQUFJLEtBQUssTUFBTSxFQUNwQjtZQUNBLElBQU1SLFFBQU8sR0FBR0MsSUFBSSxDQUFDQSxJQUFJO1lBQ3pCWixPQUFPLENBQUNDLEdBQUcsQ0FBQyxrQ0FBa0MsQ0FBQztZQUMvQ0QsT0FBTyxDQUFDQyxHQUFHLENBQUNVLFFBQU8sQ0FBQztZQUNwQkssTUFBTSxDQUFDWixJQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2NBQUVhLElBQUksRUFBRSxNQUFNO2NBQUVQLElBQUksRUFBRUQ7WUFBUSxDQUFDLENBQUMsQ0FBQztVQUM5RCxDQUFDLE1BQU0sSUFDTEssTUFBTSxLQUFLM0IsRUFBRSxJQUNiMkIsTUFBTSxDQUFDQyxVQUFVLEtBQUs1QixFQUFFLENBQUM2QixJQUFJLElBQzdCRixNQUFNLENBQUNiLFFBQVEsS0FBS2QsRUFBRSxDQUFDYyxRQUFRLElBQy9CUyxJQUFJLENBQUNPLElBQUksS0FBSyxRQUFRLEVBQ3RCO1lBQ0EsSUFBTU0sS0FBSyxHQUFHYixJQUFJLENBQUNBLElBQUk7WUFDdkJaLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO1lBQzdDRCxPQUFPLENBQUNDLEdBQUcsQ0FBQ3dCLEtBQUssQ0FBQztZQUNsQlQsTUFBTSxDQUFDWixJQUFJLENBQUNDLElBQUksQ0FBQ0MsU0FBUyxDQUFDO2NBQUVhLElBQUksRUFBRSxRQUFRO2NBQUVQLElBQUksRUFBRWE7WUFBTSxDQUFDLENBQUMsQ0FBQztVQUM5RDtRQUNGLENBQUMsQ0FBQztNQUNKLENBQUMsQ0FBQztJQUNKO0lBRUFwQyxFQUFFLENBQUNTLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBQzRCLEtBQUssRUFBSztNQUN4QjFCLE9BQU8sQ0FBQzBCLEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BQ3BCaEMsR0FBRyxDQUFDaUMsTUFBTSxDQUFDaEIsT0FBTyxHQUFHZSxLQUFLLENBQUNmLE9BQU87TUFDbENqQixHQUFHLENBQUNpQyxNQUFNLENBQUNELEtBQUssR0FBR0UsT0FBTyxDQUFDQyxHQUFHLENBQUNDLFFBQVEsS0FBSyxhQUFhLEdBQUdKLEtBQUssR0FBRyxDQUFDLENBQUM7TUFDdEVoQyxHQUFHLENBQUNxQyxNQUFNLENBQUMsT0FBTyxDQUFDO0lBQ3JCLENBQUMsQ0FBQztJQUVGMUMsRUFBRSxDQUFDUyxFQUFFLENBQUMsT0FBTyxFQUFFO01BQUEsT0FBTUUsT0FBTyxDQUFDQyxHQUFHLElBQUErQixNQUFBLENBQUlqQyxHQUFHLENBQUNHLEdBQUcsc0JBQW1CLENBQUM7SUFBQSxFQUFDO0VBQ2xFLENBQUMsQ0FBQztBQUNKLENBQUMifQ==","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","console","log","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","data","parse","clients","forEach","client","readyState","OPEN","type","welcome","clientName","offerA","answer","ice","title","error","locals","process","env","NODE_ENV","render","concat"],"sourceRoot":"D:\\Final_Project\\src\\video\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\r\n\r\n//module.exports : 모듈을 내보내는 데 사용되는 특수한 객체\r\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\r\nmodule.exports = (server, app) => {\r\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\r\n  const wss = new ws.Server({ server });\r\n  // for sending a rooms data when a new room is created\r\n  // used at app.post('newroom') on app.js\r\n  app.set(\"wss\", wss);\r\n\r\n  // Backend에서 socket을 사용할 준비 완료\r\n  wss.on(\"connection\", (ws, req) => {\r\n    console.log(\"WebSocket connected to: \" + req.url);\r\n    if (req.url === \"/videoIndex\") {\r\n      ws.location = \"videoIndex\";\r\n      ws.send(JSON.stringify(app.get(\"dummyDb2\").rooms));\r\n    } else if (req.url.startsWith(\"/video/\")) {\r\n      ws.location = req.url.split(\"/\")[2];\r\n      console.log(\"socket >>> ws.location : \" + ws.location);\r\n      ws.on(\"message\", (message) => {\r\n        const data = JSON.parse(message);\r\n        wss.clients.forEach((client) => {\r\n          if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"enter\"\r\n          ) {\r\n            const welcome = data.data;\r\n            console.log(\"welcome *********************\");\r\n            console.log(welcome);\r\n            client.send(JSON.stringify({ type: \"enter\", data: welcome }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"name\"\r\n          ) {\r\n            const clientName = data.data;\r\n            console.log(\"clientName ******************\");\r\n            console.log(clientName);\r\n            client.send(JSON.stringify({ type: \"name\", data: clientName }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"offer\"\r\n          ) {\r\n            const offerA = data.data;\r\n            console.log(\"offerA ************************\");\r\n            console.log(offerA);\r\n            client.send(JSON.stringify({ type: \"offer\", data: offerA }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"answer\"\r\n          ) {\r\n            const answer = data.data;\r\n            console.log(\"answer ************************\");\r\n            console.log(answer);\r\n            client.send(JSON.stringify({ type: \"answer\", data: answer }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"ice\"\r\n          ) {\r\n            const ice = data.data;\r\n            console.log(\"ice ************************\");\r\n            console.log(ice);\r\n            client.send(JSON.stringify({ type: \"ice\", data: ice }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"chat\"\r\n          ) {\r\n            const message = data.data;\r\n            console.log(\"message ************************\");\r\n            console.log(message);\r\n            client.send(JSON.stringify({ type: \"chat\", data: message }));\r\n          } else if (\r\n            client !== ws &&\r\n            client.readyState === ws.OPEN &&\r\n            client.location === ws.location &&\r\n            data.type === \"delete\"\r\n          ) {\r\n            const title = data.data;\r\n            console.log(\"title ************************\");\r\n            console.log(title);\r\n            client.send(JSON.stringify({ type: \"delete\", data: title }));\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    ws.on(\"error\", (error) => {\r\n      console.error(error);\r\n      app.locals.message = error.message;\r\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\r\n      app.render(\"error\");\r\n    });\r\n\r\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\r\n  });\r\n};\r\n"],"mappings":"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"}},"mtime":1706673671855}}