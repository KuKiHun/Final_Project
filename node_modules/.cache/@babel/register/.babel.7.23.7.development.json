{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _socket = _interopRequireDefault(require(\"socket.io\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _process = require(\"process\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n// http import 하기\n\n// ws import 하기\n// import WebSocket from \"ws\";\n\nvar jwt = require(\"jsonwebtoken\");\nvar app = (0, _express[\"default\"])();\n\n// Pug로 view engine을 설정\napp.set(\"view engine\", \"pug\");\n\n// views 디렉토리 입력\napp.set(\"views\", __dirname + \"/views\");\n\n// 유저가 /public 으로 가게되면 __ dirname + \"/public\" 폴더 보여줌\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\n\n// home.pug를 render해주는 route handler를 생성 -> home.pug로 화면 전환\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\n\n// 유저가 어떤 url로 이동하던지 홈으로 돌려보내는 코드\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\n\n//스프링으로부터 토큰을 받은 후 필요한 정보 추출\nvar token = \"tokenWithUserIdAndName\";\nconsole.log(\"token : \" + token);\nvar secretKey = \"secret_key_chat_token\";\ntry {\n  var decoded = jwt.verify(token, secretKey);\n  console.log(decoded);\n  var _userName = decoded.userName;\n  var _roomName = decoded.roomName;\n  console.log(\"userName : \" + _userName);\n  console.log(\"roomName : \" + _roomName);\n} catch (error) {\n  console.error(\"토큰 검증 실패:\", error.message);\n}\n\n//app.js로 값 전달\nmodule.exports = {\n  userName: userName,\n  roomName: roomName\n};\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\nvar httpServer = _http[\"default\"].createServer(app);\nvar wsServer = (0, _socket[\"default\"])(httpServer);\n\n// Backend에서 socket을 사용할 준비 완료\nwsServer.on(\"connection\", function (socket) {\n  // middleware -> 어떤 event에서든지 console.log를 할 수 있다(socket에 있는 모든 event를 확인가능)\n  socket.onAny(function (event) {\n    console.log(\"Socket event : \".concat(event));\n  });\n  // frontend와 동일하게 원하는 이름으로 지정 가능 -> 단, frontend와 동일한 이름이어야 한다.\n  // done은 frontend의 익명함수를 의미 -> 서버는 backend에서 함수를 호출, 함수는 frontend에서 실행\n  socket.on(\"enter_room\", function (roomName, nickname, done) {\n    //닉네임 저장하기\n    socket[\"nickname\"] = nickname;\n    // 방에 참가하는 코드 => socket.join 사용\n    socket.join(roomName);\n    //app.js에 있는 showRoom() 실행\n    done();\n    //\"welcome\" 이벤트를 방 안에 있는 모든 사람에게 emit -> 나를 제외한 socket에 전송\n    socket.to(roomName).emit(\"welcome\", socket.nickname);\n  });\n\n  // 방과 연결 종료\n  socket.on(\"disconnecting\", function () {\n    // 클라이언트가 서버와 연결이 끊어지기 전에 \"bye\" message 전송\n    // socket.rooms({방 id, 방이름}) => 중복되는 요소가 없는 배열인 set -> 그레서 forEach 사용 가능\n    socket.rooms.forEach(function (room) {\n      return socket.to(room).emit(\"bye\", socket.nickname);\n    });\n  });\n\n  // 메세지 보내기\n  // roomName을 통해 어떤 방으로 메세지를 보내야 하는지 알 수 있음\n  socket.on(\"new_message\", function (msg, roomName, done) {\n    socket.to(roomName).emit(\"new_message\", \"\".concat(socket[\"nickname\"], \" : \").concat(msg));\n    // done()을 호츨하면 app.js에 있는 handleMessageSubmit() 안의 익명 함수를 실행\n    done();\n  });\n});\nhttpServer.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3NvY2tldCIsIl9leHByZXNzIiwiX3Byb2Nlc3MiLCJvYmoiLCJfX2VzTW9kdWxlIiwiand0IiwiYXBwIiwiZXhwcmVzcyIsInNldCIsIl9fZGlybmFtZSIsInVzZSIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciIsInJlZGlyZWN0IiwidG9rZW4iLCJjb25zb2xlIiwibG9nIiwic2VjcmV0S2V5IiwiZGVjb2RlZCIsInZlcmlmeSIsInVzZXJOYW1lIiwicm9vbU5hbWUiLCJlcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiaGFuZGxlTGlzdGVuIiwiaHR0cFNlcnZlciIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJ3c1NlcnZlciIsIlNvY2tldElPIiwib24iLCJzb2NrZXQiLCJvbkFueSIsImV2ZW50IiwiY29uY2F0Iiwibmlja25hbWUiLCJkb25lIiwiam9pbiIsInRvIiwiZW1pdCIsInJvb21zIiwiZm9yRWFjaCIsInJvb20iLCJtc2ciLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxmaW5hbFByb2plY3RcXEZpbmFsX1Byb2plY3RcXHNyY1xcb3Blbi1jaGF0c1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cCBpbXBvcnQg7ZWY6riwXHJcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XHJcbi8vIHdzIGltcG9ydCDtlZjquLBcclxuLy8gaW1wb3J0IFdlYlNvY2tldCBmcm9tIFwid3NcIjtcclxuaW1wb3J0IFNvY2tldElPIGZyb20gXCJzb2NrZXQuaW9cIjtcclxuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgZW1pdCB9IGZyb20gXCJwcm9jZXNzXCI7XHJcblxyXG5jb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gUHVn66GcIHZpZXcgZW5naW5l7J2EIOyEpOyglVxyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XHJcblxyXG4vLyB2aWV3cyDrlJTroInthqDrpqwg7J6F66ClXHJcbmFwcC5zZXQoXCJ2aWV3c1wiLCBfX2Rpcm5hbWUgKyBcIi92aWV3c1wiKTtcclxuXHJcbi8vIOycoOyggOqwgCAvcHVibGljIOycvOuhnCDqsIDqsozrkJjrqbQgX18gZGlybmFtZSArIFwiL3B1YmxpY1wiIO2PtOuNlCDrs7Tsl6zspIxcclxuYXBwLnVzZShcIi9wdWJsaWNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgXCIvcHVibGljXCIpKTtcclxuXHJcbi8vIGhvbWUucHVn66W8IHJlbmRlcu2VtOyjvOuKlCByb3V0ZSBoYW5kbGVy66W8IOyDneyEsSAtPiBob21lLnB1Z+uhnCDtmZTrqbQg7KCE7ZmYXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcImhvbWVcIikpO1xyXG5cclxuLy8g7Jyg7KCA6rCAIOyWtOuWpCB1cmzroZwg7J2064+Z7ZWY642Y7KeAIO2ZiOycvOuhnCDrj4zroKTrs7TrgrTripQg7L2U65OcXHJcbmFwcC5nZXQoXCIvKlwiLCAocmVxLCByZXMpID0+IHJlcy5yZWRpcmVjdChcIi9cIikpO1xyXG5cclxuLy/siqTtlITrp4HsnLzroZzrtoDthLAg7Yag7YGw7J2EIOuwm+ydgCDtm4Qg7ZWE7JqU7ZWcIOygleuztCDstpTstpxcclxuY29uc3QgdG9rZW4gPSBcInRva2VuV2l0aFVzZXJJZEFuZE5hbWVcIjtcclxuY29uc29sZS5sb2coXCJ0b2tlbiA6IFwiICsgdG9rZW4pO1xyXG5jb25zdCBzZWNyZXRLZXkgPSBcInNlY3JldF9rZXlfY2hhdF90b2tlblwiO1xyXG5cclxudHJ5IHtcclxuICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0S2V5KTtcclxuICBjb25zb2xlLmxvZyhkZWNvZGVkKTtcclxuICBjb25zdCB1c2VyTmFtZSA9IGRlY29kZWQudXNlck5hbWU7XHJcbiAgY29uc3Qgcm9vbU5hbWUgPSBkZWNvZGVkLnJvb21OYW1lO1xyXG4gIGNvbnNvbGUubG9nKFwidXNlck5hbWUgOiBcIiArIHVzZXJOYW1lKTtcclxuICBjb25zb2xlLmxvZyhcInJvb21OYW1lIDogXCIgKyByb29tTmFtZSk7XHJcbn0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgY29uc29sZS5lcnJvcihcIu2GoO2BsCDqsoDspp0g7Iuk7YyoOlwiLCBlcnJvci5tZXNzYWdlKTtcclxufVxyXG5cclxuLy9hcHAuanProZwg6rCSIOyghOuLrFxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICB1c2VyTmFtZTogdXNlck5hbWUsXHJcbiAgcm9vbU5hbWU6IHJvb21OYW1lLFxyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTGlzdGVuID0gKCkgPT4gY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBgKTtcclxuXHJcbmNvbnN0IGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xyXG5jb25zdCB3c1NlcnZlciA9IFNvY2tldElPKGh0dHBTZXJ2ZXIpO1xyXG5cclxuLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxud3NTZXJ2ZXIub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcclxuICAvLyBtaWRkbGV3YXJlIC0+IOyWtOuWpCBldmVudOyXkOyEnOuToOyngCBjb25zb2xlLmxvZ+ulvCDtlaAg7IiYIOyeiOuLpChzb2NrZXTsl5Ag7J6I64qUIOuqqOuToCBldmVudOulvCDtmZXsnbjqsIDriqUpXHJcbiAgc29ja2V0Lm9uQW55KChldmVudCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNvY2tldCBldmVudCA6ICR7ZXZlbnR9YCk7XHJcbiAgfSk7XHJcbiAgLy8gZnJvbnRlbmTsmYAg64+Z7J287ZWY6rKMIOybkO2VmOuKlCDsnbTrpoTsnLzroZwg7KeA7KCVIOqwgOuKpSAtPiDri6gsIGZyb250ZW5k7JmAIOuPmeydvO2VnCDsnbTrpoTsnbTslrTslbwg7ZWc64ukLlxyXG4gIC8vIGRvbmXsnYAgZnJvbnRlbmTsnZgg7J2166qF7ZWo7IiY66W8IOydmOuvuCAtPiDshJzrsoTripQgYmFja2VuZOyXkOyEnCDtlajsiJjrpbwg7Zi47LacLCDtlajsiJjripQgZnJvbnRlbmTsl5DshJwg7Iuk7ZaJXHJcbiAgc29ja2V0Lm9uKFwiZW50ZXJfcm9vbVwiLCAocm9vbU5hbWUsIG5pY2tuYW1lLCBkb25lKSA9PiB7XHJcbiAgICAvL+uLieuEpOyehCDsoIDsnqXtlZjquLBcclxuICAgIHNvY2tldFtcIm5pY2tuYW1lXCJdID0gbmlja25hbWU7XHJcbiAgICAvLyDrsKnsl5Ag7LC46rCA7ZWY64qUIOy9lOuTnCA9PiBzb2NrZXQuam9pbiDsgqzsmqlcclxuICAgIHNvY2tldC5qb2luKHJvb21OYW1lKTtcclxuICAgIC8vYXBwLmpz7JeQIOyeiOuKlCBzaG93Um9vbSgpIOyLpO2WiVxyXG4gICAgZG9uZSgpO1xyXG4gICAgLy9cIndlbGNvbWVcIiDsnbTrsqTtirjrpbwg67CpIOyViOyXkCDsnojripQg66qo65OgIOyCrOuejOyXkOqyjCBlbWl0IC0+IOuCmOulvCDsoJzsmbjtlZwgc29ja2V07JeQIOyghOyGoVxyXG4gICAgc29ja2V0LnRvKHJvb21OYW1lKS5lbWl0KFwid2VsY29tZVwiLCBzb2NrZXQubmlja25hbWUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyDrsKnqs7wg7Jew6rKwIOyiheujjFxyXG4gIHNvY2tldC5vbihcImRpc2Nvbm5lY3RpbmdcIiwgKCkgPT4ge1xyXG4gICAgLy8g7YG065287J207Ja47Yq46rCAIOyEnOuyhOyZgCDsl7DqsrDsnbQg64GK7Ja07KeA6riwIOyghOyXkCBcImJ5ZVwiIG1lc3NhZ2Ug7KCE7IahXHJcbiAgICAvLyBzb2NrZXQucm9vbXMoe+uwqSBpZCwg67Cp7J2066aEfSkgPT4g7KSR67O165CY64qUIOyalOyGjOqwgCDsl4bripQg67Cw7Je07J24IHNldCAtPiDqt7jroIjshJwgZm9yRWFjaCDsgqzsmqkg6rCA64qlXHJcbiAgICBzb2NrZXQucm9vbXMuZm9yRWFjaCgocm9vbSkgPT5cclxuICAgICAgc29ja2V0LnRvKHJvb20pLmVtaXQoXCJieWVcIiwgc29ja2V0Lm5pY2tuYW1lKVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgLy8g66mU7IS47KeAIOuztOuCtOq4sFxyXG4gIC8vIHJvb21OYW1l7J2EIO2Gte2VtCDslrTrlqQg67Cp7Jy866GcIOuplOyEuOyngOulvCDrs7TrgrTslbwg7ZWY64qU7KeAIOyVjCDsiJgg7J6I7J2MXHJcbiAgc29ja2V0Lm9uKFwibmV3X21lc3NhZ2VcIiwgKG1zZywgcm9vbU5hbWUsIGRvbmUpID0+IHtcclxuICAgIHNvY2tldC50byhyb29tTmFtZSkuZW1pdChcIm5ld19tZXNzYWdlXCIsIGAke3NvY2tldFtcIm5pY2tuYW1lXCJdfSA6ICR7bXNnfWApO1xyXG4gICAgLy8gZG9uZSgp7J2EIO2YuOy4qO2VmOuptCBhcHAuanPsl5Ag7J6I64qUIGhhbmRsZU1lc3NhZ2VTdWJtaXQoKSDslYjsnZgg7J2166qFIO2VqOyImOulvCDsi6TtlolcclxuICAgIGRvbmUoKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5odHRwU2VydmVyLmxpc3RlbigzMDAwLCBoYW5kbGVMaXN0ZW4pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBQUEsS0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBR0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQStCLFNBQUFELHVCQUFBSyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsZ0JBQUFBLEdBQUE7QUFOL0I7O0FBRUE7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","map":{"version":3,"names":["_http","_interopRequireDefault","require","_socket","_express","_process","obj","__esModule","jwt","app","express","set","__dirname","use","get","req","res","render","redirect","token","console","log","secretKey","decoded","verify","userName","roomName","error","message","module","exports","handleListen","httpServer","http","createServer","wsServer","SocketIO","on","socket","onAny","event","concat","nickname","done","join","to","emit","rooms","forEach","room","msg","listen"],"sourceRoot":"C:\\finalProject\\Final_Project\\src\\open-chats\\","sources":["server.js"],"sourcesContent":["// http import 하기\r\nimport http from \"http\";\r\n// ws import 하기\r\n// import WebSocket from \"ws\";\r\nimport SocketIO from \"socket.io\";\r\nimport express from \"express\";\r\nimport { emit } from \"process\";\r\n\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\nconst app = express();\r\n\r\n// Pug로 view engine을 설정\r\napp.set(\"view engine\", \"pug\");\r\n\r\n// views 디렉토리 입력\r\napp.set(\"views\", __dirname + \"/views\");\r\n\r\n// 유저가 /public 으로 가게되면 __ dirname + \"/public\" 폴더 보여줌\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\n\r\n// home.pug를 render해주는 route handler를 생성 -> home.pug로 화면 전환\r\napp.get(\"/\", (req, res) => res.render(\"home\"));\r\n\r\n// 유저가 어떤 url로 이동하던지 홈으로 돌려보내는 코드\r\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\r\n\r\n//스프링으로부터 토큰을 받은 후 필요한 정보 추출\r\nconst token = \"tokenWithUserIdAndName\";\r\nconsole.log(\"token : \" + token);\r\nconst secretKey = \"secret_key_chat_token\";\r\n\r\ntry {\r\n  const decoded = jwt.verify(token, secretKey);\r\n  console.log(decoded);\r\n  const userName = decoded.userName;\r\n  const roomName = decoded.roomName;\r\n  console.log(\"userName : \" + userName);\r\n  console.log(\"roomName : \" + roomName);\r\n} catch (error) {\r\n  console.error(\"토큰 검증 실패:\", error.message);\r\n}\r\n\r\n//app.js로 값 전달\r\nmodule.exports = {\r\n  userName: userName,\r\n  roomName: roomName,\r\n};\r\n\r\nconst handleListen = () => console.log(`Listening on http://localhost:3000`);\r\n\r\nconst httpServer = http.createServer(app);\r\nconst wsServer = SocketIO(httpServer);\r\n\r\n// Backend에서 socket을 사용할 준비 완료\r\nwsServer.on(\"connection\", (socket) => {\r\n  // middleware -> 어떤 event에서든지 console.log를 할 수 있다(socket에 있는 모든 event를 확인가능)\r\n  socket.onAny((event) => {\r\n    console.log(`Socket event : ${event}`);\r\n  });\r\n  // frontend와 동일하게 원하는 이름으로 지정 가능 -> 단, frontend와 동일한 이름이어야 한다.\r\n  // done은 frontend의 익명함수를 의미 -> 서버는 backend에서 함수를 호출, 함수는 frontend에서 실행\r\n  socket.on(\"enter_room\", (roomName, nickname, done) => {\r\n    //닉네임 저장하기\r\n    socket[\"nickname\"] = nickname;\r\n    // 방에 참가하는 코드 => socket.join 사용\r\n    socket.join(roomName);\r\n    //app.js에 있는 showRoom() 실행\r\n    done();\r\n    //\"welcome\" 이벤트를 방 안에 있는 모든 사람에게 emit -> 나를 제외한 socket에 전송\r\n    socket.to(roomName).emit(\"welcome\", socket.nickname);\r\n  });\r\n\r\n  // 방과 연결 종료\r\n  socket.on(\"disconnecting\", () => {\r\n    // 클라이언트가 서버와 연결이 끊어지기 전에 \"bye\" message 전송\r\n    // socket.rooms({방 id, 방이름}) => 중복되는 요소가 없는 배열인 set -> 그레서 forEach 사용 가능\r\n    socket.rooms.forEach((room) =>\r\n      socket.to(room).emit(\"bye\", socket.nickname)\r\n    );\r\n  });\r\n\r\n  // 메세지 보내기\r\n  // roomName을 통해 어떤 방으로 메세지를 보내야 하는지 알 수 있음\r\n  socket.on(\"new_message\", (msg, roomName, done) => {\r\n    socket.to(roomName).emit(\"new_message\", `${socket[\"nickname\"]} : ${msg}`);\r\n    // done()을 호츨하면 app.js에 있는 handleMessageSubmit() 안의 익명 함수를 실행\r\n    done();\r\n  });\r\n});\r\n\r\nhttpServer.listen(3000, handleListen);\r\n"],"mappings":"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"}},"mtime":1704766509550},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar express = require(\"express\");\nvar path = require(\"path\");\nvar morgan = require(\"morgan\");\nvar session = require(\"express-session\");\nvar mysql = require(\"mysql\");\nvar conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = express();\napp.set(\"port\", process.env.PORT || 8003);\napp.set(\"views\", path.join(__dirname, \"views\"));\napp.set(\"view engine\", \"pug\");\napp.use(morgan(\"dev\"));\napp.use(express[\"static\"](path.join(__dirname, \"public\")));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(session({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n\n// DB 연결\napp.set(\"db\", conn);\n\n//검색\n\napp.get(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.post(\"/newroom\", function (req, res) {\n  var title = req.body.title;\n  var roomId = req.sessionID + Date.now();\n  var _app$get = app.get(\"db\"),\n    rooms = _app$get.rooms;\n  rooms.push({\n    title: title,\n    roomId: roomId\n  });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"index\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/chat/\".concat(roomId));\n});\napp.get(\"/chat/:roomId\", function (req, res) {\n  var _app$get$rooms$find = app.get(\"db\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\n// Error Exeption\napp.use(function (req, res, next) {\n  var notFoundError = new Error(\"\".concat(req.method, \" \").concat(req.url, \" NotFound\"));\n  notFoundError.status = 404;\n  next(notFoundError);\n});\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"ws module server is running on port \" + app.get(\"port\"));\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJtb3JnYW4iLCJzZXNzaW9uIiwibXlzcWwiLCJjb25uIiwiY3JlYXRlQ29ubmVjdGlvbiIsImhvc3QiLCJwb3J0IiwidXNlciIsInBhc3N3b3JkIiwiZGF0YWJhc2UiLCJjb25uZWN0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibG9nIiwiYXBwIiwic2V0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJqb2luIiwiX19kaXJuYW1lIiwidXNlIiwianNvbiIsInVybGVuY29kZWQiLCJleHRlbmRlZCIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic2VjcmV0IiwiQ09PS0lFX1NFQ1JFVCIsImNvb2tpZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicG9zdCIsInRpdGxlIiwiYm9keSIsInJvb21JZCIsInNlc3Npb25JRCIsIkRhdGUiLCJub3ciLCJfYXBwJGdldCIsInJvb21zIiwicHVzaCIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwibG9jYXRpb24iLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVkaXJlY3QiLCJjb25jYXQiLCJfYXBwJGdldCRyb29tcyRmaW5kIiwiZmluZCIsInJvb20iLCJwYXJhbXMiLCJsb2NhbHMiLCJuZXh0Iiwibm90Rm91bmRFcnJvciIsIkVycm9yIiwibWV0aG9kIiwidXJsIiwic3RhdHVzIiwibWVzc2FnZSIsIk5PREVfRU5WIiwiZXhwcmVzc1NlcnZlciIsImxpc3RlbiJdLCJzb3VyY2VSb290IjoiQzpcXGZpbmFsUHJvamVjdFxcRmluYWxfUHJvamVjdFxcc3JjXFxvcGVuLWNoYXRzXFwiLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBwYXRoID0gcmVxdWlyZShcInBhdGhcIik7XG5jb25zdCBtb3JnYW4gPSByZXF1aXJlKFwibW9yZ2FuXCIpO1xuY29uc3Qgc2Vzc2lvbiA9IHJlcXVpcmUoXCJleHByZXNzLXNlc3Npb25cIik7XG5cbmNvbnN0IG15c3FsID0gcmVxdWlyZShcIm15c3FsXCIpO1xuXG5jb25zdCBjb25uID0gbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XG4gIGhvc3Q6IFwiMTc1LjE5OC4yMDYuMTM3XCIsXG4gIHBvcnQ6IDMzMDYsXG4gIHVzZXI6IFwicVwiLFxuICBwYXNzd29yZDogXCJxXCIsXG4gIGRhdGFiYXNlOiBcImZvbGxhd1wiLFxufSk7XG5cbmNvbm4uY29ubmVjdCgoZXJyKSA9PiB7XG4gIGlmIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTXlTUUwg7Jew6rKwIOyYpOulmFwiKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc29sZS5sb2coXCJNeVNRTOyXkCDshLHqs7XsoIHsnLzroZwg7Jew6rKw65CY7JeI7Iq164uI64ukLlwiKTtcbn0pO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5hcHAuc2V0KFwicG9ydFwiLCBwcm9jZXNzLmVudi5QT1JUIHx8IDgwMDMpO1xuXG5hcHAuc2V0KFwidmlld3NcIiwgcGF0aC5qb2luKF9fZGlybmFtZSwgXCJ2aWV3c1wiKSk7XG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XG5hcHAudXNlKG1vcmdhbihcImRldlwiKSk7XG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKHBhdGguam9pbihfX2Rpcm5hbWUsIFwicHVibGljXCIpKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbmFwcC51c2UoXG4gIHNlc3Npb24oe1xuICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIC8vQ09PS0lFX1NFQ1JFVCDtmZjqsr0g67OA7IiY6rCAIOyEpOygleuQmOyWtCDsnojri6TrqbQg6re4IOqwkuydhCDsgqzsmqntlZjqs6AsXG4gICAgLy/shKTsoJXrkJjslrQg7J6I7KeAIOyViuuLpOuptCBcInNlY3JldFwi7J20652864qUIOq4sOuzuOqwkuydhCDsgqzsmqntlZjsl6wg7IS47IWYIOuNsOydtO2EsOulvCDslZTtmLjtmZRcbiAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LkNPT0tJRV9TRUNSRVQgfHwgXCJzZWNyZXRcIixcbiAgICBjb29raWU6IHtcbiAgICAgIC8vaHR0cE9ubHk6IHRydWXripQg7YG065287J207Ja47Yq47JeQ7IScIOyEuOyFmCDsv6DtgqTsl5Ag7KCR6re87ZWgIOuVjCBKYXZhU2NyaXB066W8IO2Gte2VnCDsoJHqt7zsnYQg66eJ64qUIOyYteyFmFxuICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAvL3NlY3VyZTogZmFsc2XripQg7IS47IWYIOy/oO2CpOulvCDslYjsoITtlZwg7Jew6rKwKEhUVFBTKeydhCDthrXtlbTshJzrp4wg7KCE7Iah7ZW07JW8IO2VmOuKlOyngCDsl6zrtoDrpbwg7ISk7KCV7ZWY64qUIOyYteyFmFxuICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICB9LFxuICB9KVxuKTtcblxuLy8gREIg7Jew6rKwXG5hcHAuc2V0KFwiZGJcIiwgY29ubik7XG5cbi8v6rKA7IOJXG5cbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICAvLyBUT0RPOiBhZGQgdXNlclxuICByZXR1cm4gcmVzLnJlbmRlcihcImluZGV4XCIpO1xufSk7XG5cbmFwcC5wb3N0KFwiL25ld3Jvb21cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUgfSA9IHJlcS5ib2R5O1xuICBjb25zdCByb29tSWQgPSByZXEuc2Vzc2lvbklEICsgRGF0ZS5ub3coKTtcbiAgY29uc3QgeyByb29tcyB9ID0gYXBwLmdldChcImRiXCIpO1xuICByb29tcy5wdXNoKHsgdGl0bGUsIHJvb21JZCB9KTtcblxuICAvLyDssYTtjIXrsKkg7IOI66GcIOyDneyEseyLnCDtmYjsl5Ag7J6I64qUIOyCrOuejOuTpOyXkOqyjCDsg4jroZzsnYAg67CpIOuqqeuhnSDsoITshqFcbiAgLy8gUT86IOuzuOyduOydgCDsmZwg7KCc7Jm465Cg6rmMP1xuICAvLyBBITog64KY64qUIO2YhOyerCDsl7DqsrDrkJwg7IaM7LyT7J20IOyXhuuKlOyDge2DnOyehCBob21l7JeQ7IScIG5ld3Jvb20g7Jy866GcIOqwiOuVjCBjb25uZWN0aW9u7J20IOuBiuyWtOyngOqzoFxuICAvLyAgICAgcmVkaXJlY3TroZwgL2NoYXQvOnJvb21JZOuhnCDrs7TrgrTsoLjslbwgY2hhdC5qc+yXkOyEnCBjb25uZWN0aW9u7J2EIOyXsOqysO2VqFxuICBhcHAuZ2V0KFwid3NzXCIpLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgaWYgKGNsaWVudC5sb2NhdGlvbiA9PT0gXCJpbmRleFwiICYmIGNsaWVudC5yZWFkeVN0YXRlID09PSBjbGllbnQuT1BFTilcbiAgICAgIGNsaWVudC5zZW5kKEpTT04uc3RyaW5naWZ5KHJvb21zKSk7XG4gIH0pO1xuICByZXR1cm4gcmVzLnJlZGlyZWN0KGAvY2hhdC8ke3Jvb21JZH1gKTtcbn0pO1xuXG5hcHAuZ2V0KFwiL2NoYXQvOnJvb21JZFwiLCAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyB0aXRsZSB9ID0gYXBwXG4gICAgLmdldChcImRiXCIpXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XG4gIC8vcmVzLmxvY2Fsc+uKlCDsnZHri7Ug6rCd7LK0KHJlcynsnZgg7IaN7ISx7Jy866GcLCDtlbTri7kg7J2R64u17JeQIOuMgO2VnCDroZzsu6wg67OA7IiY66W8IOyEpOygle2VmOqzoCDsgqzsmqntlaAg7IiYIOyeiOqyjCDtlbTspIxcbiAgcmVzLmxvY2Fscy50aXRsZSA9IHRpdGxlO1xuICAvL2NoYXQg7YyM7J287J2EIOugjOuNlOunge2VmOyXrCDtlbTri7kg7YyM7J287JeQ7IScIHRpdGxlIOuzgOyImOulvCDsgqzsmqntlaAg7IiYIOyeiOydjFxuICByZXMucmVuZGVyKFwiY2hhdFwiKTtcbn0pO1xuXG4vLyBFcnJvciBFeGVwdGlvblxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBFcnJvcihgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9IE5vdEZvdW5kYCk7XG4gIG5vdEZvdW5kRXJyb3Iuc3RhdHVzID0gNDA0O1xuICBuZXh0KG5vdEZvdW5kRXJyb3IpO1xufSk7XG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICByZXMubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVyciA6IHt9O1xuICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKS5yZW5kZXIoXCJlcnJvclwiKTtcbn0pO1xuXG5jb25zdCBleHByZXNzU2VydmVyID0gYXBwLmxpc3RlbihhcHAuZ2V0KFwicG9ydFwiKSwgKCkgPT5cbiAgY29uc29sZS5sb2coXCJ3cyBtb2R1bGUgc2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCBcIiArIGFwcC5nZXQoXCJwb3J0XCIpKVxuKTtcblxuLy8gc29ja2V0XG5yZXF1aXJlKFwiLi9zb2NrZXRcIikoZXhwcmVzc1NlcnZlciwgYXBwKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsSUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLElBQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxJQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUUxQyxJQUFNSSxLQUFLLEdBQUdKLE9B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","map":{"version":3,"names":["express","require","path","morgan","session","mysql","conn","createConnection","host","port","user","password","database","connect","err","console","error","log","app","set","process","env","PORT","join","__dirname","use","json","urlencoded","extended","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","get","req","res","render","post","title","body","roomId","sessionID","Date","now","_app$get","rooms","push","clients","forEach","client","location","readyState","OPEN","send","JSON","stringify","redirect","concat","_app$get$rooms$find","find","room","params","locals","next","notFoundError","Error","method","url","status","message","NODE_ENV","expressServer","listen"],"sourceRoot":"C:\\finalProject\\Final_Project\\src\\open-chats\\","sources":["app.js"],"sourcesContent":["const express = require(\"express\");\nconst path = require(\"path\");\nconst morgan = require(\"morgan\");\nconst session = require(\"express-session\");\n\nconst mysql = require(\"mysql\");\n\nconst conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\",\n});\n\nconn.connect((err) => {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\n\nconst app = express();\napp.set(\"port\", process.env.PORT || 8003);\n\napp.set(\"views\", path.join(__dirname, \"views\"));\napp.set(\"view engine\", \"pug\");\napp.use(morgan(\"dev\"));\napp.use(express.static(path.join(__dirname, \"public\")));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(\n  session({\n    resave: false,\n    saveUninitialized: false,\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n    secret: process.env.COOKIE_SECRET || \"secret\",\n    cookie: {\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n      httpOnly: true,\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n      secure: false,\n    },\n  })\n);\n\n// DB 연결\napp.set(\"db\", conn);\n\n//검색\n\napp.get(\"/\", (req, res) => {\n  // TODO: add user\n  return res.render(\"index\");\n});\n\napp.post(\"/newroom\", (req, res) => {\n  const { title } = req.body;\n  const roomId = req.sessionID + Date.now();\n  const { rooms } = app.get(\"db\");\n  rooms.push({ title, roomId });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach((client) => {\n    if (client.location === \"index\" && client.readyState === client.OPEN)\n      client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(`/chat/${roomId}`);\n});\n\napp.get(\"/chat/:roomId\", (req, res) => {\n  const { title } = app\n    .get(\"db\")\n    .rooms.find((room) => room.roomId === req.params.roomId);\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\n// Error Exeption\napp.use((req, res, next) => {\n  const notFoundError = new Error(`${req.method} ${req.url} NotFound`);\n  notFoundError.status = 404;\n  next(notFoundError);\n});\napp.use((err, req, res, next) => {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\n\nconst expressServer = app.listen(app.get(\"port\"), () =>\n  console.log(\"ws module server is running on port \" + app.get(\"port\"))\n);\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n"],"mappings":"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"}},"mtime":1704955856438},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar ws = require('ws');\nmodule.exports = function (server, app) {\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set('wss', wss);\n  wss.on('connection', function (ws, req) {\n    if (req.url === '/rooms') {\n      ws.location = 'index';\n      // get a data when into index\n      ws.send(JSON.stringify(app.get('db').rooms));\n    } else if (req.url.startsWith('/chat/')) {\n      ws.location = req.url.split('/')[2];\n      ws.on('message', function (message) {\n        // send message to open sockets in my room without me\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n    ws.on('error', function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== ' production' ? error : {};\n      app.render('error');\n    });\n    ws.on('close', function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJ1cmwiLCJsb2NhdGlvbiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0Iiwicm9vbXMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJtZXNzYWdlIiwiY2xpZW50cyIsImZvckVhY2giLCJjbGllbnQiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInRvU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwibG9nIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJDOlxcZmluYWxQcm9qZWN0XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXG9wZW4tY2hhdHNcXCIsInNvdXJjZXMiOlsic29ja2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdzID0gcmVxdWlyZSgnd3MnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcbiAgY29uc3Qgd3NzID0gbmV3IHdzLlNlcnZlcih7IHNlcnZlciB9KTtcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXG4gIC8vIHVzZWQgYXQgYXBwLnBvc3QoJ25ld3Jvb20nKSBvbiBhcHAuanNcbiAgYXBwLnNldCgnd3NzJywgd3NzKTtcblxuICB3c3Mub24oJ2Nvbm5lY3Rpb24nLCAod3MsIHJlcSkgPT4ge1xuICAgIGlmIChyZXEudXJsID09PSAnL3Jvb21zJykge1xuICAgICAgd3MubG9jYXRpb24gPSAnaW5kZXgnO1xuICAgICAgLy8gZ2V0IGEgZGF0YSB3aGVuIGludG8gaW5kZXhcbiAgICAgIHdzLnNlbmQoSlNPTi5zdHJpbmdpZnkoYXBwLmdldCgnZGInKS5yb29tcykpO1xuICAgIH0gZWxzZSBpZiAocmVxLnVybC5zdGFydHNXaXRoKCcvY2hhdC8nKSkge1xuICAgICAgd3MubG9jYXRpb24gPSByZXEudXJsLnNwbGl0KCcvJylbMl07XG4gICAgICB3cy5vbignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIC8vIHNlbmQgbWVzc2FnZSB0byBvcGVuIHNvY2tldHMgaW4gbXkgcm9vbSB3aXRob3V0IG1lXG4gICAgICAgIHdzcy5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xuICAgICAgICAgIGlmIChjbGllbnQgIT09IHdzICYmIGNsaWVudC5yZWFkeVN0YXRlID09PSB3cy5PUEVOICYmIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb24pIGNsaWVudC5zZW5kKG1lc3NhZ2UudG9TdHJpbmcoKSk7XG4gICAgICAgICAgLy8gc2VuZCBtZXNzYWdlIHRvXG4gICAgICAgICAgLy8gb3BlbiBzb2NrZXRzIChjbGllbnQucmVhZHlTdGF0ZSA9PT0gd3MuT1BFTilcbiAgICAgICAgICAvLyBpbiBteSByb29tIChjbGllbnQucm9vbUlkID09PSB3cy5yb29tSWQpXG4gICAgICAgICAgLy8gd2l0aG91dCBtZSAoY2xpZW50ICE9PSB3cylcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB3cy5vbignZXJyb3InLCAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgYXBwLmxvY2Fscy5tZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgIGFwcC5sb2NhbHMuZXJyb3IgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJyBwcm9kdWN0aW9uJyA/IGVycm9yIDoge307XG4gICAgICBhcHAucmVuZGVyKCdlcnJvcicpO1xuICAgIH0pO1xuXG4gICAgd3Mub24oJ2Nsb3NlJywgKCkgPT4gY29uc29sZS5sb2coYCR7cmVxLnVybH0gY29ubmVjdGlvbiBjbG9zZWApKTtcbiAgfSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLEVBQUUsR0FBR0MsT0FBTyxDQUFDLElBQUksQ0FBQztBQUV4QkMsTUFBTSxDQUFDQyxPQUFPLEdBQUcsVUFBQ0MsTUFBTSxFQUFFQyxHQUFHLEVBQUs7RUFDaEMsSUFBTUMsR0FBRyxHQUFHLElBQUlOLEVBQUUsQ0FBQ08sTUFBTSxDQUFDO0lBQUVILE1BQU0sRUFBTkE7RUFBTyxDQUFDLENBQUM7RUFDckM7RUFDQTtFQUNBQyxHQUFHLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUVGLEdBQUcsQ0FBQztFQUVuQkEsR0FBRyxDQUFDRyxFQUFFLENBQUMsWUFBWSxFQUFFLFVBQUNULEVBQUUsRUFBRVUsR0FBRyxFQUFLO0lBQ2hDLElBQUlBLEdBQUcsQ0FBQ0MsR0FBRyxLQUFLLFFBQVEsRUFBRTtNQUN4QlgsRUFBRSxDQUFDWSxRQUFRLEdBQUcsT0FBTztNQUNyQjtNQUNBWixFQUFFLENBQUNhLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNWLEdBQUcsQ0FBQ1csR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDQyxLQUFLLENBQUMsQ0FBQztJQUM5QyxDQUFDLE1BQU0sSUFBSVAsR0FBRyxDQUFDQyxHQUFHLENBQUNPLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtNQUN2Q2xCLEVBQUUsQ0FBQ1ksUUFBUSxHQUFHRixHQUFHLENBQUNDLEdBQUcsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNuQ25CLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDVyxPQUFPLEVBQUs7UUFDNUI7UUFDQWQsR0FBRyxDQUFDZSxPQUFPLENBQUNDLE9BQU8sQ0FBQyxVQUFDQyxNQUFNLEVBQUs7VUFDOUIsSUFBSUEsTUFBTSxLQUFLdkIsRUFBRSxJQUFJdUIsTUFBTSxDQUFDQyxVQUFVLEtBQUt4QixFQUFFLENBQUN5QixJQUFJLElBQUlGLE1BQU0sQ0FBQ1gsUUFBUSxLQUFLWixFQUFFLENBQUNZLFFBQVEsRUFBRVcsTUFBTSxDQUFDVixJQUFJLENBQUNPLE9BQU8sQ0FBQ00sUUFBUSxDQUFDLENBQUMsQ0FBQztVQUN0SDtVQUNBO1VBQ0E7VUFDQTtRQUNGLENBQUMsQ0FBQztNQUNKLENBQUMsQ0FBQztJQUNKO0lBRUExQixFQUFFLENBQUNTLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBQ2tCLEtBQUssRUFBSztNQUN4QkMsT0FBTyxDQUFDRCxLQUFLLENBQUNBLEtBQUssQ0FBQztNQUNwQnRCLEdBQUcsQ0FBQ3dCLE1BQU0sQ0FBQ1QsT0FBTyxHQUFHTyxLQUFLLENBQUNQLE9BQU87TUFDbENmLEdBQUcsQ0FBQ3dCLE1BQU0sQ0FBQ0YsS0FBSyxHQUFHRyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsUUFBUSxLQUFLLGFBQWEsR0FBR0wsS0FBSyxHQUFHLENBQUMsQ0FBQztNQUN0RXRCLEdBQUcsQ0FBQzRCLE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDckIsQ0FBQyxDQUFDO0lBRUZqQyxFQUFFLENBQUNTLEVBQUUsQ0FBQyxPQUFPLEVBQUU7TUFBQSxPQUFNbUIsT0FBTyxDQUFDTSxHQUFHLElBQUFDLE1BQUEsQ0FBSXpCLEdBQUcsQ0FBQ0MsR0FBRyxzQkFBbUIsQ0FBQztJQUFBLEVBQUM7RUFDbEUsQ0FBQyxDQUFDO0FBQ0osQ0FBQyJ9","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","clients","forEach","client","readyState","OPEN","toString","error","console","locals","process","env","NODE_ENV","render","log","concat"],"sourceRoot":"C:\\finalProject\\Final_Project\\src\\open-chats\\","sources":["socket.js"],"sourcesContent":["const ws = require('ws');\n\nmodule.exports = (server, app) => {\n  const wss = new ws.Server({ server });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set('wss', wss);\n\n  wss.on('connection', (ws, req) => {\n    if (req.url === '/rooms') {\n      ws.location = 'index';\n      // get a data when into index\n      ws.send(JSON.stringify(app.get('db').rooms));\n    } else if (req.url.startsWith('/chat/')) {\n      ws.location = req.url.split('/')[2];\n      ws.on('message', (message) => {\n        // send message to open sockets in my room without me\n        wss.clients.forEach((client) => {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n\n    ws.on('error', (error) => {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== ' production' ? error : {};\n      app.render('error');\n    });\n\n    ws.on('close', () => console.log(`${req.url} connection close`));\n  });\n};\n"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;AAExBC,MAAM,CAACC,OAAO,GAAG,UAACC,MAAM,EAAEC,GAAG,EAAK;EAChC,IAAMC,GAAG,GAAG,IAAIN,EAAE,CAACO,MAAM,CAAC;IAAEH,MAAM,EAANA;EAAO,CAAC,CAAC;EACrC;EACA;EACAC,GAAG,CAACG,GAAG,CAAC,KAAK,EAAEF,GAAG,CAAC;EAEnBA,GAAG,CAACG,EAAE,CAAC,YAAY,EAAE,UAACT,EAAE,EAAEU,GAAG,EAAK;IAChC,IAAIA,GAAG,CAACC,GAAG,KAAK,QAAQ,EAAE;MACxBX,EAAE,CAACY,QAAQ,GAAG,OAAO;MACrB;MACAZ,EAAE,CAACa,IAAI,CAACC,IAAI,CAACC,SAAS,CAACV,GAAG,CAACW,GAAG,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,CAAC;IAC9C,CAAC,MAAM,IAAIP,GAAG,CAACC,GAAG,CAACO,UAAU,CAAC,QAAQ,CAAC,EAAE;MACvClB,EAAE,CAACY,QAAQ,GAAGF,GAAG,CAACC,GAAG,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACnCnB,EAAE,CAACS,EAAE,CAAC,SAAS,EAAE,UAACW,OAAO,EAAK;QAC5B;QACAd,GAAG,CAACe,OAAO,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;UAC9B,IAAIA,MAAM,KAAKvB,EAAE,IAAIuB,MAAM,CAACC,UAAU,KAAKxB,EAAE,CAACyB,IAAI,IAAIF,MAAM,CAACX,QAAQ,KAAKZ,EAAE,CAACY,QAAQ,EAAEW,MAAM,CAACV,IAAI,CAACO,OAAO,CAACM,QAAQ,CAAC,CAAC,CAAC;UACtH;UACA;UACA;UACA;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IAEA1B,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE,UAACkB,KAAK,EAAK;MACxBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBtB,GAAG,CAACwB,MAAM,CAACT,OAAO,GAAGO,KAAK,CAACP,OAAO;MAClCf,GAAG,CAACwB,MAAM,CAACF,KAAK,GAAGG,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAGL,KAAK,GAAG,CAAC,CAAC;MACtEtB,GAAG,CAAC4B,MAAM,CAAC,OAAO,CAAC;IACrB,CAAC,CAAC;IAEFjC,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE;MAAA,OAAMmB,OAAO,CAACM,GAAG,IAAAC,MAAA,CAAIzB,GAAG,CAACC,GAAG,sBAAmB,CAAC;IAAA,EAAC;EAClE,CAAC,CAAC;AACJ,CAAC"}},"mtime":1647319140000}}