{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\Final_Project\\\\src\\\\open-chats\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _socket = _interopRequireDefault(require(\"socket.io\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _process = require(\"process\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n// http import 하기\n\n// ws import 하기\n// import WebSocket from \"ws\";\n\nvar jwt = require(\"jsonwebtoken\");\nvar app = (0, _express[\"default\"])();\n\n// Pug로 view engine을 설정\napp.set(\"view engine\", \"pug\");\n\n// views 디렉토리 입력\napp.set(\"views\", __dirname + \"/views\");\n\n// 유저가 /public 으로 가게되면 __ dirname + \"/public\" 폴더 보여줌\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\n\n// home.pug를 render해주는 route handler를 생성 -> home.pug로 화면 전환\napp.get(\"/\", function (req, res) {\n  return res.render(\"home\");\n});\n\n// 유저가 어떤 url로 이동하던지 홈으로 돌려보내는 코드\napp.get(\"/*\", function (req, res) {\n  return res.redirect(\"/\");\n});\n\n//스프링으로부터 토큰을 받은 후 필요한 정보 추출\nvar token = \"tokenWithUserIdAndName\";\nconsole.log(\"token : \" + token);\nvar secretKey = \"secret_key_chat_token\";\ntry {\n  var decoded = jwt.verify(token, secretKey);\n  console.log(decoded);\n  var _userName = decoded.userName;\n  var _roomName = decoded.roomName;\n  console.log(\"userName : \" + _userName);\n  console.log(\"roomName : \" + _roomName);\n} catch (error) {\n  console.error(\"토큰 검증 실패:\", error.message);\n}\n\n//app.js로 값 전달\nmodule.exports = {\n  userName: userName,\n  roomName: roomName\n};\nvar handleListen = function handleListen() {\n  return console.log(\"Listening on http://localhost:3000\");\n};\nvar httpServer = _http[\"default\"].createServer(app);\nvar wsServer = (0, _socket[\"default\"])(httpServer);\n\n// Backend에서 socket을 사용할 준비 완료\nwsServer.on(\"connection\", function (socket) {\n  // middleware -> 어떤 event에서든지 console.log를 할 수 있다(socket에 있는 모든 event를 확인가능)\n  socket.onAny(function (event) {\n    console.log(\"Socket event : \".concat(event));\n  });\n  // frontend와 동일하게 원하는 이름으로 지정 가능 -> 단, frontend와 동일한 이름이어야 한다.\n  // done은 frontend의 익명함수를 의미 -> 서버는 backend에서 함수를 호출, 함수는 frontend에서 실행\n  socket.on(\"enter_room\", function (roomName, nickname, done) {\n    //닉네임 저장하기\n    socket[\"nickname\"] = nickname;\n    // 방에 참가하는 코드 => socket.join 사용\n    socket.join(roomName);\n    //app.js에 있는 showRoom() 실행\n    done();\n    //\"welcome\" 이벤트를 방 안에 있는 모든 사람에게 emit -> 나를 제외한 socket에 전송\n    socket.to(roomName).emit(\"welcome\", socket.nickname);\n  });\n\n  // 방과 연결 종료\n  socket.on(\"disconnecting\", function () {\n    // 클라이언트가 서버와 연결이 끊어지기 전에 \"bye\" message 전송\n    // socket.rooms({방 id, 방이름}) => 중복되는 요소가 없는 배열인 set -> 그레서 forEach 사용 가능\n    socket.rooms.forEach(function (room) {\n      return socket.to(room).emit(\"bye\", socket.nickname);\n    });\n  });\n\n  // 메세지 보내기\n  // roomName을 통해 어떤 방으로 메세지를 보내야 하는지 알 수 있음\n  socket.on(\"new_message\", function (msg, roomName, done) {\n    socket.to(roomName).emit(\"new_message\", \"\".concat(socket[\"nickname\"], \" : \").concat(msg));\n    // done()을 호츨하면 app.js에 있는 handleMessageSubmit() 안의 익명 함수를 실행\n    done();\n  });\n});\nhttpServer.listen(3000, handleListen);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3NvY2tldCIsIl9leHByZXNzIiwiX3Byb2Nlc3MiLCJvYmoiLCJfX2VzTW9kdWxlIiwiand0IiwiYXBwIiwiZXhwcmVzcyIsInNldCIsIl9fZGlybmFtZSIsInVzZSIsImdldCIsInJlcSIsInJlcyIsInJlbmRlciIsInJlZGlyZWN0IiwidG9rZW4iLCJjb25zb2xlIiwibG9nIiwic2VjcmV0S2V5IiwiZGVjb2RlZCIsInZlcmlmeSIsInVzZXJOYW1lIiwicm9vbU5hbWUiLCJlcnJvciIsIm1lc3NhZ2UiLCJtb2R1bGUiLCJleHBvcnRzIiwiaGFuZGxlTGlzdGVuIiwiaHR0cFNlcnZlciIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJ3c1NlcnZlciIsIlNvY2tldElPIiwib24iLCJzb2NrZXQiLCJvbkFueSIsImV2ZW50IiwiY29uY2F0Iiwibmlja25hbWUiLCJkb25lIiwiam9pbiIsInRvIiwiZW1pdCIsInJvb21zIiwiZm9yRWFjaCIsInJvb20iLCJtc2ciLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxmaW5hbFByb2plY3RcXEZpbmFsX1Byb2plY3RcXHNyY1xcb3Blbi1jaGF0c1xcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cCBpbXBvcnQg7ZWY6riwXHJcbmltcG9ydCBodHRwIGZyb20gXCJodHRwXCI7XHJcbi8vIHdzIGltcG9ydCDtlZjquLBcclxuLy8gaW1wb3J0IFdlYlNvY2tldCBmcm9tIFwid3NcIjtcclxuaW1wb3J0IFNvY2tldElPIGZyb20gXCJzb2NrZXQuaW9cIjtcclxuaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIjtcclxuaW1wb3J0IHsgZW1pdCB9IGZyb20gXCJwcm9jZXNzXCI7XHJcblxyXG5jb25zdCBqd3QgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xyXG5cclxuLy8gUHVn66GcIHZpZXcgZW5naW5l7J2EIOyEpOyglVxyXG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XHJcblxyXG4vLyB2aWV3cyDrlJTroInthqDrpqwg7J6F66ClXHJcbmFwcC5zZXQoXCJ2aWV3c1wiLCBfX2Rpcm5hbWUgKyBcIi92aWV3c1wiKTtcclxuXHJcbi8vIOycoOyggOqwgCAvcHVibGljIOycvOuhnCDqsIDqsozrkJjrqbQgX18gZGlybmFtZSArIFwiL3B1YmxpY1wiIO2PtOuNlCDrs7Tsl6zspIxcclxuYXBwLnVzZShcIi9wdWJsaWNcIiwgZXhwcmVzcy5zdGF0aWMoX19kaXJuYW1lICsgXCIvcHVibGljXCIpKTtcclxuXHJcbi8vIGhvbWUucHVn66W8IHJlbmRlcu2VtOyjvOuKlCByb3V0ZSBoYW5kbGVy66W8IOyDneyEsSAtPiBob21lLnB1Z+uhnCDtmZTrqbQg7KCE7ZmYXHJcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4gcmVzLnJlbmRlcihcImhvbWVcIikpO1xyXG5cclxuLy8g7Jyg7KCA6rCAIOyWtOuWpCB1cmzroZwg7J2064+Z7ZWY642Y7KeAIO2ZiOycvOuhnCDrj4zroKTrs7TrgrTripQg7L2U65OcXHJcbmFwcC5nZXQoXCIvKlwiLCAocmVxLCByZXMpID0+IHJlcy5yZWRpcmVjdChcIi9cIikpO1xyXG5cclxuLy/siqTtlITrp4HsnLzroZzrtoDthLAg7Yag7YGw7J2EIOuwm+ydgCDtm4Qg7ZWE7JqU7ZWcIOygleuztCDstpTstpxcclxuY29uc3QgdG9rZW4gPSBcInRva2VuV2l0aFVzZXJJZEFuZE5hbWVcIjtcclxuY29uc29sZS5sb2coXCJ0b2tlbiA6IFwiICsgdG9rZW4pO1xyXG5jb25zdCBzZWNyZXRLZXkgPSBcInNlY3JldF9rZXlfY2hhdF90b2tlblwiO1xyXG5cclxudHJ5IHtcclxuICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgc2VjcmV0S2V5KTtcclxuICBjb25zb2xlLmxvZyhkZWNvZGVkKTtcclxuICBjb25zdCB1c2VyTmFtZSA9IGRlY29kZWQudXNlck5hbWU7XHJcbiAgY29uc3Qgcm9vbU5hbWUgPSBkZWNvZGVkLnJvb21OYW1lO1xyXG4gIGNvbnNvbGUubG9nKFwidXNlck5hbWUgOiBcIiArIHVzZXJOYW1lKTtcclxuICBjb25zb2xlLmxvZyhcInJvb21OYW1lIDogXCIgKyByb29tTmFtZSk7XHJcbn0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgY29uc29sZS5lcnJvcihcIu2GoO2BsCDqsoDspp0g7Iuk7YyoOlwiLCBlcnJvci5tZXNzYWdlKTtcclxufVxyXG5cclxuLy9hcHAuanProZwg6rCSIOyghOuLrFxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICB1c2VyTmFtZTogdXNlck5hbWUsXHJcbiAgcm9vbU5hbWU6IHJvb21OYW1lLFxyXG59O1xyXG5cclxuY29uc3QgaGFuZGxlTGlzdGVuID0gKCkgPT4gY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBgKTtcclxuXHJcbmNvbnN0IGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xyXG5jb25zdCB3c1NlcnZlciA9IFNvY2tldElPKGh0dHBTZXJ2ZXIpO1xyXG5cclxuLy8gQmFja2VuZOyXkOyEnCBzb2NrZXTsnYQg7IKs7Jqp7ZWgIOykgOu5hCDsmYTro4xcclxud3NTZXJ2ZXIub24oXCJjb25uZWN0aW9uXCIsIChzb2NrZXQpID0+IHtcclxuICAvLyBtaWRkbGV3YXJlIC0+IOyWtOuWpCBldmVudOyXkOyEnOuToOyngCBjb25zb2xlLmxvZ+ulvCDtlaAg7IiYIOyeiOuLpChzb2NrZXTsl5Ag7J6I64qUIOuqqOuToCBldmVudOulvCDtmZXsnbjqsIDriqUpXHJcbiAgc29ja2V0Lm9uQW55KChldmVudCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNvY2tldCBldmVudCA6ICR7ZXZlbnR9YCk7XHJcbiAgfSk7XHJcbiAgLy8gZnJvbnRlbmTsmYAg64+Z7J287ZWY6rKMIOybkO2VmOuKlCDsnbTrpoTsnLzroZwg7KeA7KCVIOqwgOuKpSAtPiDri6gsIGZyb250ZW5k7JmAIOuPmeydvO2VnCDsnbTrpoTsnbTslrTslbwg7ZWc64ukLlxyXG4gIC8vIGRvbmXsnYAgZnJvbnRlbmTsnZgg7J2166qF7ZWo7IiY66W8IOydmOuvuCAtPiDshJzrsoTripQgYmFja2VuZOyXkOyEnCDtlajsiJjrpbwg7Zi47LacLCDtlajsiJjripQgZnJvbnRlbmTsl5DshJwg7Iuk7ZaJXHJcbiAgc29ja2V0Lm9uKFwiZW50ZXJfcm9vbVwiLCAocm9vbU5hbWUsIG5pY2tuYW1lLCBkb25lKSA9PiB7XHJcbiAgICAvL+uLieuEpOyehCDsoIDsnqXtlZjquLBcclxuICAgIHNvY2tldFtcIm5pY2tuYW1lXCJdID0gbmlja25hbWU7XHJcbiAgICAvLyDrsKnsl5Ag7LC46rCA7ZWY64qUIOy9lOuTnCA9PiBzb2NrZXQuam9pbiDsgqzsmqlcclxuICAgIHNvY2tldC5qb2luKHJvb21OYW1lKTtcclxuICAgIC8vYXBwLmpz7JeQIOyeiOuKlCBzaG93Um9vbSgpIOyLpO2WiVxyXG4gICAgZG9uZSgpO1xyXG4gICAgLy9cIndlbGNvbWVcIiDsnbTrsqTtirjrpbwg67CpIOyViOyXkCDsnojripQg66qo65OgIOyCrOuejOyXkOqyjCBlbWl0IC0+IOuCmOulvCDsoJzsmbjtlZwgc29ja2V07JeQIOyghOyGoVxyXG4gICAgc29ja2V0LnRvKHJvb21OYW1lKS5lbWl0KFwid2VsY29tZVwiLCBzb2NrZXQubmlja25hbWUpO1xyXG4gIH0pO1xyXG5cclxuICAvLyDrsKnqs7wg7Jew6rKwIOyiheujjFxyXG4gIHNvY2tldC5vbihcImRpc2Nvbm5lY3RpbmdcIiwgKCkgPT4ge1xyXG4gICAgLy8g7YG065287J207Ja47Yq46rCAIOyEnOuyhOyZgCDsl7DqsrDsnbQg64GK7Ja07KeA6riwIOyghOyXkCBcImJ5ZVwiIG1lc3NhZ2Ug7KCE7IahXHJcbiAgICAvLyBzb2NrZXQucm9vbXMoe+uwqSBpZCwg67Cp7J2066aEfSkgPT4g7KSR67O165CY64qUIOyalOyGjOqwgCDsl4bripQg67Cw7Je07J24IHNldCAtPiDqt7jroIjshJwgZm9yRWFjaCDsgqzsmqkg6rCA64qlXHJcbiAgICBzb2NrZXQucm9vbXMuZm9yRWFjaCgocm9vbSkgPT5cclxuICAgICAgc29ja2V0LnRvKHJvb20pLmVtaXQoXCJieWVcIiwgc29ja2V0Lm5pY2tuYW1lKVxyXG4gICAgKTtcclxuICB9KTtcclxuXHJcbiAgLy8g66mU7IS47KeAIOuztOuCtOq4sFxyXG4gIC8vIHJvb21OYW1l7J2EIO2Gte2VtCDslrTrlqQg67Cp7Jy866GcIOuplOyEuOyngOulvCDrs7TrgrTslbwg7ZWY64qU7KeAIOyVjCDsiJgg7J6I7J2MXHJcbiAgc29ja2V0Lm9uKFwibmV3X21lc3NhZ2VcIiwgKG1zZywgcm9vbU5hbWUsIGRvbmUpID0+IHtcclxuICAgIHNvY2tldC50byhyb29tTmFtZSkuZW1pdChcIm5ld19tZXNzYWdlXCIsIGAke3NvY2tldFtcIm5pY2tuYW1lXCJdfSA6ICR7bXNnfWApO1xyXG4gICAgLy8gZG9uZSgp7J2EIO2YuOy4qO2VmOuptCBhcHAuanPsl5Ag7J6I64qUIGhhbmRsZU1lc3NhZ2VTdWJtaXQoKSDslYjsnZgg7J2166qFIO2VqOyImOulvCDsi6TtlolcclxuICAgIGRvbmUoKTtcclxuICB9KTtcclxufSk7XHJcblxyXG5odHRwU2VydmVyLmxpc3RlbigzMDAwLCBoYW5kbGVMaXN0ZW4pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBQUEsS0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBR0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQStCLFNBQUFELHVCQUFBSyxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsZ0JBQUFBLEdBQUE7QUFOL0I7O0FBRUE7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","map":{"version":3,"names":["_http","_interopRequireDefault","require","_socket","_express","_process","obj","__esModule","jwt","app","express","set","__dirname","use","get","req","res","render","redirect","token","console","log","secretKey","decoded","verify","userName","roomName","error","message","module","exports","handleListen","httpServer","http","createServer","wsServer","SocketIO","on","socket","onAny","event","concat","nickname","done","join","to","emit","rooms","forEach","room","msg","listen"],"sourceRoot":"C:\\finalProject\\Final_Project\\src\\open-chats\\","sources":["server.js"],"sourcesContent":["// http import 하기\r\nimport http from \"http\";\r\n// ws import 하기\r\n// import WebSocket from \"ws\";\r\nimport SocketIO from \"socket.io\";\r\nimport express from \"express\";\r\nimport { emit } from \"process\";\r\n\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\nconst app = express();\r\n\r\n// Pug로 view engine을 설정\r\napp.set(\"view engine\", \"pug\");\r\n\r\n// views 디렉토리 입력\r\napp.set(\"views\", __dirname + \"/views\");\r\n\r\n// 유저가 /public 으로 가게되면 __ dirname + \"/public\" 폴더 보여줌\r\napp.use(\"/public\", express.static(__dirname + \"/public\"));\r\n\r\n// home.pug를 render해주는 route handler를 생성 -> home.pug로 화면 전환\r\napp.get(\"/\", (req, res) => res.render(\"home\"));\r\n\r\n// 유저가 어떤 url로 이동하던지 홈으로 돌려보내는 코드\r\napp.get(\"/*\", (req, res) => res.redirect(\"/\"));\r\n\r\n//스프링으로부터 토큰을 받은 후 필요한 정보 추출\r\nconst token = \"tokenWithUserIdAndName\";\r\nconsole.log(\"token : \" + token);\r\nconst secretKey = \"secret_key_chat_token\";\r\n\r\ntry {\r\n  const decoded = jwt.verify(token, secretKey);\r\n  console.log(decoded);\r\n  const userName = decoded.userName;\r\n  const roomName = decoded.roomName;\r\n  console.log(\"userName : \" + userName);\r\n  console.log(\"roomName : \" + roomName);\r\n} catch (error) {\r\n  console.error(\"토큰 검증 실패:\", error.message);\r\n}\r\n\r\n//app.js로 값 전달\r\nmodule.exports = {\r\n  userName: userName,\r\n  roomName: roomName,\r\n};\r\n\r\nconst handleListen = () => console.log(`Listening on http://localhost:3000`);\r\n\r\nconst httpServer = http.createServer(app);\r\nconst wsServer = SocketIO(httpServer);\r\n\r\n// Backend에서 socket을 사용할 준비 완료\r\nwsServer.on(\"connection\", (socket) => {\r\n  // middleware -> 어떤 event에서든지 console.log를 할 수 있다(socket에 있는 모든 event를 확인가능)\r\n  socket.onAny((event) => {\r\n    console.log(`Socket event : ${event}`);\r\n  });\r\n  // frontend와 동일하게 원하는 이름으로 지정 가능 -> 단, frontend와 동일한 이름이어야 한다.\r\n  // done은 frontend의 익명함수를 의미 -> 서버는 backend에서 함수를 호출, 함수는 frontend에서 실행\r\n  socket.on(\"enter_room\", (roomName, nickname, done) => {\r\n    //닉네임 저장하기\r\n    socket[\"nickname\"] = nickname;\r\n    // 방에 참가하는 코드 => socket.join 사용\r\n    socket.join(roomName);\r\n    //app.js에 있는 showRoom() 실행\r\n    done();\r\n    //\"welcome\" 이벤트를 방 안에 있는 모든 사람에게 emit -> 나를 제외한 socket에 전송\r\n    socket.to(roomName).emit(\"welcome\", socket.nickname);\r\n  });\r\n\r\n  // 방과 연결 종료\r\n  socket.on(\"disconnecting\", () => {\r\n    // 클라이언트가 서버와 연결이 끊어지기 전에 \"bye\" message 전송\r\n    // socket.rooms({방 id, 방이름}) => 중복되는 요소가 없는 배열인 set -> 그레서 forEach 사용 가능\r\n    socket.rooms.forEach((room) =>\r\n      socket.to(room).emit(\"bye\", socket.nickname)\r\n    );\r\n  });\r\n\r\n  // 메세지 보내기\r\n  // roomName을 통해 어떤 방으로 메세지를 보내야 하는지 알 수 있음\r\n  socket.on(\"new_message\", (msg, roomName, done) => {\r\n    socket.to(roomName).emit(\"new_message\", `${socket[\"nickname\"]} : ${msg}`);\r\n    // done()을 호츨하면 app.js에 있는 handleMessageSubmit() 안의 익명 함수를 실행\r\n    done();\r\n  });\r\n});\r\n\r\nhttpServer.listen(3000, handleListen);\r\n"],"mappings":"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"}},"mtime":1704766509550},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar express = require(\"express\");\nvar path = require(\"path\");\n\n//morgan : 서버에 들어오는 요청과 관련된 정보를 로그를 남길 수 있음(middleware와 유사)\nvar morgan = require(\"morgan\");\nvar session = require(\"express-session\");\nvar mysql = require(\"mysql\");\nvar http = require(\"http\");\nvar _require = require(\"console\"),\n  error = _require.error;\nvar cors = require(\"cors\");\nvar axios = require(\"axios\");\nvar conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = express();\napp.set(\"port\", process.env.PORT || 3000);\napp.set(\"views\", __dirname + \"/views\");\napp.set(\"view engine\", \"pug\");\napp.use(morgan(\"dev\"));\napp.use(\"/public\", express[\"static\"](__dirname + \"/public\"));\napp.use(express.json());\napp.use(express.urlencoded({\n  extended: false\n}));\napp.use(session({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n\n// DB 연결\n// app.set(\"db\", conn);\napp.set(\"dummyDb\", {\n  rooms: new Array(),\n  users: new Array()\n});\n\n// url에서 해당 내용 가져오기\napp.get(\"http://localhost:8080/lawyerConnect/\".concat(lawyer_id, \"/\").concat(lawyer_name, \"/\").concat(auth_idx),\n// \"http://localhost:8080/lawyerConnect/:lawyer_id/:lawyer_name/:auth_idx\",\nfunction (res, req) {\n  var lawyerId = req.params.lawyerId;\n  var lawyerName = req.params.lawyerName;\n  var authIdx = req.params.authIdx;\n  console.log(\"\".concat(lawyerId, \" + \").concat(lawyerName, \" + \").concat(authIdx));\n  res.render(\"chat\", [{\n    lawyerId: lawyerId,\n    lawyerName: lawyerName,\n    authIdx: authIdx\n  }]);\n});\n\n// app.get(\"/chat\", (req, res) => {\n//   const lawyerName = lawyerName;\n//   res.render(\"chat\", { lawyerName });\n// });\n\napp.get(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.post(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.post(\"/newRoom\", function (req, res) {\n  var title = req.body.title;\n  var roomId = req.sessionID + Date.now();\n  var totalCount = 0;\n  var _app$get = app.get(\"dummyDb\"),\n    rooms = _app$get.rooms;\n  rooms.push({\n    title: title,\n    roomId: roomId,\n    totalCount: totalCount\n  });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"index\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/chat/\".concat(roomId));\n});\napp.get(\"/chat/:roomId\", function (req, res) {\n  var _app$get$rooms$find = app.get(\"dummyDb\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\n// let totalCount = 0;\n\napp.post(\"/leave-room\", function (req, res) {\n  var _req$body = req.body,\n    title = _req$body.title,\n    count = _req$body.count;\n  console.log(\"app.js/title :\" + title);\n  console.log(\"app.js/count :\" + count);\n  var _app$get2 = app.get(\"dummyDb\"),\n    rooms = _app$get2.rooms;\n  console.log(rooms);\n  console.log(\"--------------------\");\n\n  // rooms.totalCount += count;\n  // console.log(\"totalCount : \" + totalCount);\n\n  var foundRoom = rooms.find(function (room) {\n    return room.title === title;\n  });\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\n  if (foundRoom) {\n    foundRoom.totalCount += count;\n    console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n    if (foundRoom.totalCount === 2) {\n      var index = rooms.indexOf(foundRoom);\n      console.log(\"app.js/index : \" + index);\n      if (index !== -1) {\n        rooms.splice(index, 1);\n      }\n    }\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\n    console.log(rooms);\n  }\n  return res.render(\"index\", {\n    rooms: rooms\n  });\n});\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"Listening on http://localhost:3000\");\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInBhdGgiLCJtb3JnYW4iLCJzZXNzaW9uIiwibXlzcWwiLCJodHRwIiwiX3JlcXVpcmUiLCJlcnJvciIsImNvcnMiLCJheGlvcyIsImNvbm4iLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiYXBwIiwic2V0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJfX2Rpcm5hbWUiLCJ1c2UiLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwicmVzYXZlIiwic2F2ZVVuaW5pdGlhbGl6ZWQiLCJzZWNyZXQiLCJDT09LSUVfU0VDUkVUIiwiY29va2llIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJyb29tcyIsIkFycmF5IiwidXNlcnMiLCJnZXQiLCJjb25jYXQiLCJsYXd5ZXJfaWQiLCJsYXd5ZXJfbmFtZSIsImF1dGhfaWR4IiwicmVzIiwicmVxIiwibGF3eWVySWQiLCJwYXJhbXMiLCJsYXd5ZXJOYW1lIiwiYXV0aElkeCIsInJlbmRlciIsInBvc3QiLCJ0aXRsZSIsImJvZHkiLCJyb29tSWQiLCJzZXNzaW9uSUQiLCJEYXRlIiwibm93IiwidG90YWxDb3VudCIsIl9hcHAkZ2V0IiwicHVzaCIsImNsaWVudHMiLCJmb3JFYWNoIiwiY2xpZW50IiwibG9jYXRpb24iLCJyZWFkeVN0YXRlIiwiT1BFTiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwicmVkaXJlY3QiLCJfYXBwJGdldCRyb29tcyRmaW5kIiwiZmluZCIsInJvb20iLCJsb2NhbHMiLCJfcmVxJGJvZHkiLCJjb3VudCIsIl9hcHAkZ2V0MiIsImZvdW5kUm9vbSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsIm5leHQiLCJtZXNzYWdlIiwiTk9ERV9FTlYiLCJzdGF0dXMiLCJleHByZXNzU2VydmVyIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcZmluYWxQcm9qZWN0XFxwcm9qZWN0XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXG9wZW4tY2hhdHNcXCIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKFwiZXhwcmVzc1wiKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcblxuLy9tb3JnYW4gOiDshJzrsoTsl5Ag65Ok7Ja07Jik64qUIOyalOyyreqzvCDqtIDroKjrkJwg7KCV67O066W8IOuhnOq3uOulvCDrgqjquLgg7IiYIOyeiOydjChtaWRkbGV3YXJl7JmAIOycoOyCrClcbmNvbnN0IG1vcmdhbiA9IHJlcXVpcmUoXCJtb3JnYW5cIik7XG5jb25zdCBzZXNzaW9uID0gcmVxdWlyZShcImV4cHJlc3Mtc2Vzc2lvblwiKTtcblxuY29uc3QgbXlzcWwgPSByZXF1aXJlKFwibXlzcWxcIik7XG5cbmNvbnN0IGh0dHAgPSByZXF1aXJlKFwiaHR0cFwiKTtcbmNvbnN0IHsgZXJyb3IgfSA9IHJlcXVpcmUoXCJjb25zb2xlXCIpO1xuXG5jb25zdCBjb3JzID0gcmVxdWlyZShcImNvcnNcIik7XG5jb25zdCBheGlvcyA9IHJlcXVpcmUoXCJheGlvc1wiKTtcblxuY29uc3QgY29ubiA9IG15c3FsLmNyZWF0ZUNvbm5lY3Rpb24oe1xuICBob3N0OiBcIjE3NS4xOTguMjA2LjEzN1wiLFxuICBwb3J0OiAzMzA2LFxuICB1c2VyOiBcInFcIixcbiAgcGFzc3dvcmQ6IFwicVwiLFxuICBkYXRhYmFzZTogXCJmb2xsYXdcIixcbn0pO1xuXG5jb25uLmNvbm5lY3QoKGVycikgPT4ge1xuICBpZiAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIk15U1FMIOyXsOqysCDsmKTrpZhcIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnNvbGUubG9nKFwiTXlTUUzsl5Ag7ISx6rO17KCB7Jy866GcIOyXsOqysOuQmOyXiOyKteuLiOuLpC5cIik7XG59KTtcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnNldChcInBvcnRcIiwgcHJvY2Vzcy5lbnYuUE9SVCB8fCAzMDAwKTtcbmFwcC5zZXQoXCJ2aWV3c1wiLCBfX2Rpcm5hbWUgKyBcIi92aWV3c1wiKTtcbmFwcC5zZXQoXCJ2aWV3IGVuZ2luZVwiLCBcInB1Z1wiKTtcbmFwcC51c2UobW9yZ2FuKFwiZGV2XCIpKTtcbmFwcC51c2UoXCIvcHVibGljXCIsIGV4cHJlc3Muc3RhdGljKF9fZGlybmFtZSArIFwiL3B1YmxpY1wiKSk7XG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcbmFwcC51c2UoZXhwcmVzcy51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbmFwcC51c2UoXG4gIHNlc3Npb24oe1xuICAgIHJlc2F2ZTogZmFsc2UsXG4gICAgc2F2ZVVuaW5pdGlhbGl6ZWQ6IGZhbHNlLFxuICAgIC8vQ09PS0lFX1NFQ1JFVCDtmZjqsr0g67OA7IiY6rCAIOyEpOygleuQmOyWtCDsnojri6TrqbQg6re4IOqwkuydhCDsgqzsmqntlZjqs6AsXG4gICAgLy/shKTsoJXrkJjslrQg7J6I7KeAIOyViuuLpOuptCBcInNlY3JldFwi7J20652864qUIOq4sOuzuOqwkuydhCDsgqzsmqntlZjsl6wg7IS47IWYIOuNsOydtO2EsOulvCDslZTtmLjtmZRcbiAgICBzZWNyZXQ6IHByb2Nlc3MuZW52LkNPT0tJRV9TRUNSRVQgfHwgXCJzZWNyZXRcIixcbiAgICBjb29raWU6IHtcbiAgICAgIC8vaHR0cE9ubHk6IHRydWXripQg7YG065287J207Ja47Yq47JeQ7IScIOyEuOyFmCDsv6DtgqTsl5Ag7KCR6re87ZWgIOuVjCBKYXZhU2NyaXB066W8IO2Gte2VnCDsoJHqt7zsnYQg66eJ64qUIOyYteyFmFxuICAgICAgaHR0cE9ubHk6IHRydWUsXG4gICAgICAvL3NlY3VyZTogZmFsc2XripQg7IS47IWYIOy/oO2CpOulvCDslYjsoITtlZwg7Jew6rKwKEhUVFBTKeydhCDthrXtlbTshJzrp4wg7KCE7Iah7ZW07JW8IO2VmOuKlOyngCDsl6zrtoDrpbwg7ISk7KCV7ZWY64qUIOyYteyFmFxuICAgICAgc2VjdXJlOiBmYWxzZSxcbiAgICB9LFxuICB9KVxuKTtcblxuLy8gREIg7Jew6rKwXG4vLyBhcHAuc2V0KFwiZGJcIiwgY29ubik7XG5hcHAuc2V0KFwiZHVtbXlEYlwiLCB7IHJvb21zOiBuZXcgQXJyYXkoKSwgdXNlcnM6IG5ldyBBcnJheSgpIH0pO1xuXG4vLyB1cmzsl5DshJwg7ZW064u5IOuCtOyaqSDqsIDsoLjsmKTquLBcbmFwcC5nZXQoXG4gIGBodHRwOi8vbG9jYWxob3N0OjgwODAvbGF3eWVyQ29ubmVjdC8ke2xhd3llcl9pZH0vJHtsYXd5ZXJfbmFtZX0vJHthdXRoX2lkeH1gLFxuICAvLyBcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sYXd5ZXJDb25uZWN0LzpsYXd5ZXJfaWQvOmxhd3llcl9uYW1lLzphdXRoX2lkeFwiLFxuICAocmVzLCByZXEpID0+IHtcbiAgICBsZXQgbGF3eWVySWQgPSByZXEucGFyYW1zLmxhd3llcklkO1xuICAgIGxldCBsYXd5ZXJOYW1lID0gcmVxLnBhcmFtcy5sYXd5ZXJOYW1lO1xuICAgIGxldCBhdXRoSWR4ID0gcmVxLnBhcmFtcy5hdXRoSWR4O1xuICAgIGNvbnNvbGUubG9nKGAke2xhd3llcklkfSArICR7bGF3eWVyTmFtZX0gKyAke2F1dGhJZHh9YCk7XG5cbiAgICByZXMucmVuZGVyKFwiY2hhdFwiLCBbXG4gICAgICB7IGxhd3llcklkOiBsYXd5ZXJJZCwgbGF3eWVyTmFtZTogbGF3eWVyTmFtZSwgYXV0aElkeDogYXV0aElkeCB9LFxuICAgIF0pO1xuICB9XG4pO1xuXG4vLyBhcHAuZ2V0KFwiL2NoYXRcIiwgKHJlcSwgcmVzKSA9PiB7XG4vLyAgIGNvbnN0IGxhd3llck5hbWUgPSBsYXd5ZXJOYW1lO1xuLy8gICByZXMucmVuZGVyKFwiY2hhdFwiLCB7IGxhd3llck5hbWUgfSk7XG4vLyB9KTtcblxuYXBwLmdldChcIi9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIC8vIFRPRE86IGFkZCB1c2VyXG4gIHJldHVybiByZXMucmVuZGVyKFwiaW5kZXhcIik7XG59KTtcblxuYXBwLnBvc3QoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICAvLyBUT0RPOiBhZGQgdXNlclxuICByZXR1cm4gcmVzLnJlbmRlcihcImluZGV4XCIpO1xufSk7XG5cbmFwcC5wb3N0KFwiL25ld1Jvb21cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUgfSA9IHJlcS5ib2R5O1xuICBjb25zdCByb29tSWQgPSByZXEuc2Vzc2lvbklEICsgRGF0ZS5ub3coKTtcbiAgbGV0IHRvdGFsQ291bnQgPSAwO1xuICBjb25zdCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYlwiKTtcbiAgcm9vbXMucHVzaCh7IHRpdGxlLCByb29tSWQsIHRvdGFsQ291bnQgfSk7XG5cbiAgLy8g7LGE7YyF67CpIOyDiOuhnCDsg53shLHsi5wg7ZmI7JeQIOyeiOuKlCDsgqzrnozrk6Tsl5Dqsowg7IOI66Gc7J2AIOuwqSDrqqnroZ0g7KCE7IahXG4gIC8vIFE/OiDrs7jsnbjsnYAg7JmcIOygnOyZuOuQoOq5jD9cbiAgLy8gQSE6IOuCmOuKlCDtmITsnqwg7Jew6rKw65CcIOyGjOy8k+ydtCDsl4bripTsg4Htg5zsnoQgaG9tZeyXkOyEnCBuZXdyb29tIOycvOuhnCDqsIjrlYwgY29ubmVjdGlvbuydtCDrgYrslrTsp4Dqs6BcbiAgLy8gICAgIHJlZGlyZWN066GcIC9jaGF0Lzpyb29tSWTroZwg67O064K07KC47JW8IGNoYXQuanPsl5DshJwgY29ubmVjdGlvbuydhCDsl7DqsrDtlahcbiAgYXBwLmdldChcIndzc1wiKS5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xuICAgIGlmIChjbGllbnQubG9jYXRpb24gPT09IFwiaW5kZXhcIiAmJiBjbGllbnQucmVhZHlTdGF0ZSA9PT0gY2xpZW50Lk9QRU4pXG4gICAgICBjbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShyb29tcykpO1xuICB9KTtcbiAgcmV0dXJuIHJlcy5yZWRpcmVjdChgL2NoYXQvJHtyb29tSWR9YCk7XG59KTtcblxuYXBwLmdldChcIi9jaGF0Lzpyb29tSWRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUgfSA9IGFwcFxuICAgIC5nZXQoXCJkdW1teURiXCIpXG4gICAgLnJvb21zLmZpbmQoKHJvb20pID0+IHJvb20ucm9vbUlkID09PSByZXEucGFyYW1zLnJvb21JZCk7XG4gIC8vcmVzLmxvY2Fsc+uKlCDsnZHri7Ug6rCd7LK0KHJlcynsnZgg7IaN7ISx7Jy866GcLCDtlbTri7kg7J2R64u17JeQIOuMgO2VnCDroZzsu6wg67OA7IiY66W8IOyEpOygle2VmOqzoCDsgqzsmqntlaAg7IiYIOyeiOqyjCDtlbTspIxcbiAgcmVzLmxvY2Fscy50aXRsZSA9IHRpdGxlO1xuICAvL2NoYXQg7YyM7J287J2EIOugjOuNlOunge2VmOyXrCDtlbTri7kg7YyM7J287JeQ7IScIHRpdGxlIOuzgOyImOulvCDsgqzsmqntlaAg7IiYIOyeiOydjFxuICByZXMucmVuZGVyKFwiY2hhdFwiKTtcbn0pO1xuXG4vLyBsZXQgdG90YWxDb3VudCA9IDA7XG5cbmFwcC5wb3N0KFwiL2xlYXZlLXJvb21cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUsIGNvdW50IH0gPSByZXEuYm9keTtcbiAgY29uc29sZS5sb2coXCJhcHAuanMvdGl0bGUgOlwiICsgdGl0bGUpO1xuICBjb25zb2xlLmxvZyhcImFwcC5qcy9jb3VudCA6XCIgKyBjb3VudCk7XG4gIGxldCB7IHJvb21zIH0gPSBhcHAuZ2V0KFwiZHVtbXlEYlwiKTtcbiAgY29uc29sZS5sb2cocm9vbXMpO1xuICBjb25zb2xlLmxvZyhcIi0tLS0tLS0tLS0tLS0tLS0tLS0tXCIpO1xuXG4gIC8vIHJvb21zLnRvdGFsQ291bnQgKz0gY291bnQ7XG4gIC8vIGNvbnNvbGUubG9nKFwidG90YWxDb3VudCA6IFwiICsgdG90YWxDb3VudCk7XG5cbiAgY29uc3QgZm91bmRSb29tID0gcm9vbXMuZmluZCgocm9vbSkgPT4gcm9vbS50aXRsZSA9PT0gdGl0bGUpO1xuICBjb25zb2xlLmxvZyhcImFwcC5qcy9mb3VuZFJvb20udG90YWxDb3VudCA6XCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XG5cbiAgaWYgKGZvdW5kUm9vbSkge1xuICAgIGZvdW5kUm9vbS50b3RhbENvdW50ICs9IGNvdW50O1xuICAgIGNvbnNvbGUubG9nKFwiYXBwLmpzL3RvdGFsQ291bnQxMTEgOiBcIiArIGZvdW5kUm9vbS50b3RhbENvdW50KTtcblxuICAgIGlmIChmb3VuZFJvb20udG90YWxDb3VudCA9PT0gMikge1xuICAgICAgY29uc3QgaW5kZXggPSByb29tcy5pbmRleE9mKGZvdW5kUm9vbSk7XG4gICAgICBjb25zb2xlLmxvZyhcImFwcC5qcy9pbmRleCA6IFwiICsgaW5kZXgpO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICByb29tcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhcImFwcC5qcy90b3RhbENvdW50MjIyIDogXCIgKyBmb3VuZFJvb20udG90YWxDb3VudCk7XG4gICAgY29uc29sZS5sb2cocm9vbXMpO1xuICB9XG4gIHJldHVybiByZXMucmVuZGVyKFwiaW5kZXhcIiwgeyByb29tcyB9KTtcbn0pO1xuXG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICByZXMubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVyciA6IHt9O1xuICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKS5yZW5kZXIoXCJlcnJvclwiKTtcbn0pO1xuXG5jb25zdCBleHByZXNzU2VydmVyID0gYXBwLmxpc3RlbihhcHAuZ2V0KFwicG9ydFwiKSwgKCkgPT5cbiAgY29uc29sZS5sb2coYExpc3RlbmluZyBvbiBodHRwOi8vbG9jYWxob3N0OjMwMDBgKVxuKTtcblxuLy8gc29ja2V0XG5yZXF1aXJlKFwiLi9zb2NrZXRcIikoZXhwcmVzc1NlcnZlciwgYXBwKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsSUFBTUMsSUFBSSxHQUFHRCxPQUFPLENBQUMsTUFBTSxDQUFDOztBQUU1QjtBQUNBLElBQU1FLE1BQU0sR0FBR0YsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxJQUFNRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztBQUUxQyxJQUFNSSxLQUFLLEdBQUdKLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFFOUIsSUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLElBQUFNLFFBQUEsR0FBa0JOLE9BQU8sQ0FBQyxTQUFTLENBQUM7RUFBNUJPLEtBQUssR0FBQUQsUUFBQSxDQUFMQyxLQUFLO0FBRWIsSUFBTUMsSUFBSSxHQUFHUixPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLElBQU1TLEtBQUssR0FBR1QsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUU5QixJQUFNVSxJQUFJLEdBQUdOLEtBQUssQ0FBQ08sZ0JBQWdCLENBQUM7RUFDbENDLElBQUksRUFBRSxpQkFBaUI7RUFDdkJDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLElBQUksRUFBRSxHQUFHO0VBQ1RDLFFBQVEsRUFBRSxHQUFHO0VBQ2JDLFFBQVEsRUFBRTtBQUNaLENBQUMsQ0FBQztBQUVGTixJQUFJLENBQUNPLE9BQU8sQ0FBQyxVQUFDQyxHQUFHLEVBQUs7RUFDcEIsSUFBSUEsR0FBRyxFQUFFO0lBQ1BDLE9BQU8sQ0FBQ1osS0FBSyxDQUFDLGFBQWEsQ0FBQztJQUM1QjtFQUNGO0VBQ0FZLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHVCQUF1QixDQUFDO0FBQ3RDLENBQUMsQ0FBQztBQUVGLElBQU1DLEdBQUcsR0FBR3RCLE9BQU8sQ0FB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","map":{"version":3,"names":["express","require","path","morgan","session","mysql","http","_require","error","cors","axios","conn","createConnection","host","port","user","password","database","connect","err","console","log","app","set","process","env","PORT","__dirname","use","json","urlencoded","extended","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","rooms","Array","users","get","concat","lawyer_id","lawyer_name","auth_idx","res","req","lawyerId","params","lawyerName","authIdx","render","post","title","body","roomId","sessionID","Date","now","totalCount","_app$get","push","clients","forEach","client","location","readyState","OPEN","send","JSON","stringify","redirect","_app$get$rooms$find","find","room","locals","_req$body","count","_app$get2","foundRoom","index","indexOf","splice","next","message","NODE_ENV","status","expressServer","listen"],"sourceRoot":"C:\\finalProject\\project\\Final_Project\\src\\open-chats\\","sources":["app.js"],"sourcesContent":["const express = require(\"express\");\nconst path = require(\"path\");\n\n//morgan : 서버에 들어오는 요청과 관련된 정보를 로그를 남길 수 있음(middleware와 유사)\nconst morgan = require(\"morgan\");\nconst session = require(\"express-session\");\n\nconst mysql = require(\"mysql\");\n\nconst http = require(\"http\");\nconst { error } = require(\"console\");\n\nconst cors = require(\"cors\");\nconst axios = require(\"axios\");\n\nconst conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\",\n});\n\nconn.connect((err) => {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\n\nconst app = express();\napp.set(\"port\", process.env.PORT || 3000);\napp.set(\"views\", __dirname + \"/views\");\napp.set(\"view engine\", \"pug\");\napp.use(morgan(\"dev\"));\napp.use(\"/public\", express.static(__dirname + \"/public\"));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(\n  session({\n    resave: false,\n    saveUninitialized: false,\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n    secret: process.env.COOKIE_SECRET || \"secret\",\n    cookie: {\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n      httpOnly: true,\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n      secure: false,\n    },\n  })\n);\n\n// DB 연결\n// app.set(\"db\", conn);\napp.set(\"dummyDb\", { rooms: new Array(), users: new Array() });\n\n// url에서 해당 내용 가져오기\napp.get(\n  `http://localhost:8080/lawyerConnect/${lawyer_id}/${lawyer_name}/${auth_idx}`,\n  // \"http://localhost:8080/lawyerConnect/:lawyer_id/:lawyer_name/:auth_idx\",\n  (res, req) => {\n    let lawyerId = req.params.lawyerId;\n    let lawyerName = req.params.lawyerName;\n    let authIdx = req.params.authIdx;\n    console.log(`${lawyerId} + ${lawyerName} + ${authIdx}`);\n\n    res.render(\"chat\", [\n      { lawyerId: lawyerId, lawyerName: lawyerName, authIdx: authIdx },\n    ]);\n  }\n);\n\n// app.get(\"/chat\", (req, res) => {\n//   const lawyerName = lawyerName;\n//   res.render(\"chat\", { lawyerName });\n// });\n\napp.get(\"/\", (req, res) => {\n  // TODO: add user\n  return res.render(\"index\");\n});\n\napp.post(\"/\", (req, res) => {\n  // TODO: add user\n  return res.render(\"index\");\n});\n\napp.post(\"/newRoom\", (req, res) => {\n  const { title } = req.body;\n  const roomId = req.sessionID + Date.now();\n  let totalCount = 0;\n  const { rooms } = app.get(\"dummyDb\");\n  rooms.push({ title, roomId, totalCount });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach((client) => {\n    if (client.location === \"index\" && client.readyState === client.OPEN)\n      client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(`/chat/${roomId}`);\n});\n\napp.get(\"/chat/:roomId\", (req, res) => {\n  const { title } = app\n    .get(\"dummyDb\")\n    .rooms.find((room) => room.roomId === req.params.roomId);\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\n// let totalCount = 0;\n\napp.post(\"/leave-room\", (req, res) => {\n  const { title, count } = req.body;\n  console.log(\"app.js/title :\" + title);\n  console.log(\"app.js/count :\" + count);\n  let { rooms } = app.get(\"dummyDb\");\n  console.log(rooms);\n  console.log(\"--------------------\");\n\n  // rooms.totalCount += count;\n  // console.log(\"totalCount : \" + totalCount);\n\n  const foundRoom = rooms.find((room) => room.title === title);\n  console.log(\"app.js/foundRoom.totalCount :\" + foundRoom.totalCount);\n\n  if (foundRoom) {\n    foundRoom.totalCount += count;\n    console.log(\"app.js/totalCount111 : \" + foundRoom.totalCount);\n\n    if (foundRoom.totalCount === 2) {\n      const index = rooms.indexOf(foundRoom);\n      console.log(\"app.js/index : \" + index);\n      if (index !== -1) {\n        rooms.splice(index, 1);\n      }\n    }\n    console.log(\"app.js/totalCount222 : \" + foundRoom.totalCount);\n    console.log(rooms);\n  }\n  return res.render(\"index\", { rooms });\n});\n\napp.use((err, req, res, next) => {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\n\nconst expressServer = app.listen(app.get(\"port\"), () =>\n  console.log(`Listening on http://localhost:3000`)\n);\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n"],"mappings":"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"}},"mtime":1705294946315},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", function (message) {\n        // send message to open sockets in my room without me\n        //현재 반복 중인 클라이언트가 현재 메시지를 보낸 클라이언트(ws)와 같지 않고,\n        //상태가 OPEN인 경우, 그리고 같은 방(location)에 있는 경우에만 조건이 참\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n    // else if (req.url.startsWith(\"http://localhost:8080/lawyerConnect/\")) {\n    //   ws.on(\"message\", (message) => {\n    //     // 서버로부터 메시지를 받았을 때의 처리\n    //     console.log(\"Received message from client:\", message);\n\n    //     // 서버에서 클라이언트로 데이터 전송\n    //     const dataToSend = {\n    //       lawyerId: req.url.split(\"/\")[1],\n    //       lawyerName: req.url.split(\"/\")[2],\n    //       authIdx: req.url.split(\"/\")[3],\n    //     };\n\n    //     ws.send(JSON.stringify(dataToSend));\n    //   });\n    // }\n\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJ1cmwiLCJsb2NhdGlvbiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0Iiwicm9vbXMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJtZXNzYWdlIiwiY2xpZW50cyIsImZvckVhY2giLCJjbGllbnQiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInRvU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwibG9nIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJDOlxcZmluYWxQcm9qZWN0XFxwcm9qZWN0XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXG9wZW4tY2hhdHNcXCIsInNvdXJjZXMiOlsic29ja2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdzID0gcmVxdWlyZShcIndzXCIpO1xuXG4vL+uqqOuTiOydhCDrgrTrs7TrgrTripQg642wIOyCrOyaqeuQmOuKlCDtirnsiJjtlZwg6rCd7LK0XG4vL+uLpOuluCDtjIzsnbzsl5DshJwg7ZW064u5IOuqqOuTiOydhCDqsIDsoLjsmYAg7IKs7JqpIOqwgOuKpShyZXF1aXJlKCkg7J207JqpKVxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcbiAgLy93cyDrqqjrk4jsnZggU2VydmVyIO2BtOuemOyKpChXZWJTb2NrZXQg7ISc67KE66W8IOyDneyEse2VmOqzoCDqtIDrpqwp66W8IOyCrOyaqe2VmOyXrCBXZWJTb2NrZXQg7ISc67KE66W8IOyDneyEse2VmOuKlCDqtazrrLhcbiAgY29uc3Qgd3NzID0gbmV3IHdzLlNlcnZlcih7IHNlcnZlciB9KTtcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXG4gIC8vIHVzZWQgYXQgYXBwLnBvc3QoJ25ld3Jvb20nKSBvbiBhcHAuanNcbiAgYXBwLnNldChcIndzc1wiLCB3c3MpO1xuXG4gIC8vIEJhY2tlbmTsl5DshJwgc29ja2V07J2EIOyCrOyaqe2VoCDspIDruYQg7JmE66OMXG4gIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHdzLCByZXEpID0+IHtcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvcm9vbXNcIikge1xuICAgICAgd3MubG9jYXRpb24gPSBcImluZGV4XCI7XG4gICAgICAvLyBnZXQgYSBkYXRhIHdoZW4gaW50byBpbmRleFxuICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShhcHAuZ2V0KFwiZHVtbXlEYlwiKS5yb29tcykpO1xuICAgIH0gZWxzZSBpZiAocmVxLnVybC5zdGFydHNXaXRoKFwiL2NoYXQvXCIpKSB7XG4gICAgICB3cy5sb2NhdGlvbiA9IHJlcS51cmwuc3BsaXQoXCIvXCIpWzJdO1xuICAgICAgd3Mub24oXCJtZXNzYWdlXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIC8vIHNlbmQgbWVzc2FnZSB0byBvcGVuIHNvY2tldHMgaW4gbXkgcm9vbSB3aXRob3V0IG1lXG4gICAgICAgIC8v7ZiE7J6sIOuwmOuztSDspJHsnbgg7YG065287J207Ja47Yq46rCAIO2YhOyerCDrqZTsi5zsp4Drpbwg67O064K4IO2BtOudvOydtOyWuO2KuCh3cynsmYAg6rCZ7KeAIOyViuqzoCxcbiAgICAgICAgLy/sg4Htg5zqsIAgT1BFTuyduCDqsr3smrAsIOq3uOumrOqzoCDqsJnsnYAg67CpKGxvY2F0aW9uKeyXkCDsnojripQg6rK97Jqw7JeQ66eMIOyhsOqxtOydtCDssLhcbiAgICAgICAgd3NzLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxuICAgICAgICAgICAgY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4gJiZcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb25cbiAgICAgICAgICApXG4gICAgICAgICAgICBjbGllbnQuc2VuZChtZXNzYWdlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIC8vIHNlbmQgbWVzc2FnZSB0b1xuICAgICAgICAgIC8vIG9wZW4gc29ja2V0cyAoY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4pXG4gICAgICAgICAgLy8gaW4gbXkgcm9vbSAoY2xpZW50LnJvb21JZCA9PT0gd3Mucm9vbUlkKVxuICAgICAgICAgIC8vIHdpdGhvdXQgbWUgKGNsaWVudCAhPT0gd3MpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sYXd5ZXJDb25uZWN0L1wiKSkge1xuICAgIC8vICAgd3Mub24oXCJtZXNzYWdlXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgLy8gICAgIC8vIOyEnOuyhOuhnOu2gO2EsCDrqZTsi5zsp4Drpbwg67Cb7JWY7J2EIOuVjOydmCDsspjrpqxcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCBtZXNzYWdlIGZyb20gY2xpZW50OlwiLCBtZXNzYWdlKTtcblxuICAgIC8vICAgICAvLyDshJzrsoTsl5DshJwg7YG065287J207Ja47Yq466GcIOuNsOydtO2EsCDsoITshqFcbiAgICAvLyAgICAgY29uc3QgZGF0YVRvU2VuZCA9IHtcbiAgICAvLyAgICAgICBsYXd5ZXJJZDogcmVxLnVybC5zcGxpdChcIi9cIilbMV0sXG4gICAgLy8gICAgICAgbGF3eWVyTmFtZTogcmVxLnVybC5zcGxpdChcIi9cIilbMl0sXG4gICAgLy8gICAgICAgYXV0aElkeDogcmVxLnVybC5zcGxpdChcIi9cIilbM10sXG4gICAgLy8gICAgIH07XG5cbiAgICAvLyAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShkYXRhVG9TZW5kKSk7XG4gICAgLy8gICB9KTtcbiAgICAvLyB9XG5cbiAgICB3cy5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgYXBwLmxvY2Fscy5lcnJvciA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcIiBwcm9kdWN0aW9uXCIgPyBlcnJvciA6IHt9O1xuICAgICAgYXBwLnJlbmRlcihcImVycm9yXCIpO1xuICAgIH0pO1xuXG4gICAgd3Mub24oXCJjbG9zZVwiLCAoKSA9PiBjb25zb2xlLmxvZyhgJHtyZXEudXJsfSBjb25uZWN0aW9uIGNsb3NlYCkpO1xuICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDOztBQUV4QjtBQUNBO0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQUNDLE1BQU0sRUFBRUMsR0FBRyxFQUFLO0VBQ2hDO0VBQ0EsSUFBTUMsR0FBRyxHQUFHLElBQUlOLEVBQUUsQ0FBQ08sTUFBTSxDQUFDO0lBQUVILE1BQU0sRUFBTkE7RUFBTyxDQUFDLENBQUM7RUFDckM7RUFDQTtFQUNBQyxHQUFHLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUVGLEdBQUcsQ0FBQzs7RUFFbkI7RUFDQUEsR0FBRyxDQUFDRyxFQUFFLENBQUMsWUFBWSxFQUFFLFVBQUNULEVBQUUsRUFBRVUsR0FBRyxFQUFLO0lBQ2hDLElBQUlBLEdBQUcsQ0FBQ0MsR0FBRyxLQUFLLFFBQVEsRUFBRTtNQUN4QlgsRUFBRSxDQUFDWSxRQUFRLEdBQUcsT0FBTztNQUNyQjtNQUNBWixFQUFFLENBQUNhLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNWLEdBQUcsQ0FBQ1csR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxLQUFLLENBQUMsQ0FBQztJQUNuRCxDQUFDLE1BQU0sSUFBSVAsR0FBRyxDQUFDQyxHQUFHLENBQUNPLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtNQUN2Q2xCLEVBQUUsQ0FBQ1ksUUFBUSxHQUFHRixHQUFHLENBQUNDLEdBQUcsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNuQ25CLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDVyxPQUFPLEVBQUs7UUFDNUI7UUFDQTtRQUNBO1FBQ0FkLEdBQUcsQ0FBQ2UsT0FBTyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsTUFBTSxFQUFLO1VBQzlCLElBQ0VBLE1BQU0sS0FBS3ZCLEVBQUUsSUFDYnVCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLeEIsRUFBRSxDQUFDeUIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDWCxRQUFRLEtBQUtaLEVBQUUsQ0FBQ1ksUUFBUSxFQUUvQlcsTUFBTSxDQUFDVixJQUFJLENBQUNPLE9BQU8sQ0FBQ00sUUFBUSxDQUFDLENBQUMsQ0FBQztVQUNqQztVQUNBO1VBQ0E7VUFDQTtRQUNGLENBQUMsQ0FBQztNQUNKLENBQUMsQ0FBQztJQUNKO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7O0lBRUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOztJQUVBO0lBQ0E7SUFDQTs7SUFFQTFCLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFDa0IsS0FBSyxFQUFLO01BQ3hCQyxPQUFPLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BQ3BCdEIsR0FBRyxDQUFDd0IsTUFBTSxDQUFDVCxPQUFPLEdBQUdPLEtBQUssQ0FBQ1AsT0FBTztNQUNsQ2YsR0FBRyxDQUFDd0IsTUFBTSxDQUFDRixLQUFLLEdBQUdHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO01BQ3RFdEIsR0FBRyxDQUFDNEIsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNyQixDQUFDLENBQUM7SUFFRmpDLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRTtNQUFBLE9BQU1tQixPQUFPLENBQUNNLEdBQUcsSUFBQUMsTUFBQSxDQUFJekIsR0FBRyxDQUFDQyxHQUFHLHNCQUFtQixDQUFDO0lBQUEsRUFBQztFQUNsRSxDQUFDLENBQUM7QUFDSixDQUFDIn0=","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","clients","forEach","client","readyState","OPEN","toString","error","console","locals","process","env","NODE_ENV","render","log","concat"],"sourceRoot":"C:\\finalProject\\project\\Final_Project\\src\\open-chats\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\n\n//모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = (server, app) => {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  const wss = new ws.Server({ server });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", (ws, req) => {\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", (message) => {\n        // send message to open sockets in my room without me\n        //현재 반복 중인 클라이언트가 현재 메시지를 보낸 클라이언트(ws)와 같지 않고,\n        //상태가 OPEN인 경우, 그리고 같은 방(location)에 있는 경우에만 조건이 참\n        wss.clients.forEach((client) => {\n          if (\n            client !== ws &&\n            client.readyState === ws.OPEN &&\n            client.location === ws.location\n          )\n            client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n    // else if (req.url.startsWith(\"http://localhost:8080/lawyerConnect/\")) {\n    //   ws.on(\"message\", (message) => {\n    //     // 서버로부터 메시지를 받았을 때의 처리\n    //     console.log(\"Received message from client:\", message);\n\n    //     // 서버에서 클라이언트로 데이터 전송\n    //     const dataToSend = {\n    //       lawyerId: req.url.split(\"/\")[1],\n    //       lawyerName: req.url.split(\"/\")[2],\n    //       authIdx: req.url.split(\"/\")[3],\n    //     };\n\n    //     ws.send(JSON.stringify(dataToSend));\n    //   });\n    // }\n\n    ws.on(\"error\", (error) => {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\n  });\n};\n"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;;AAExB;AACA;AACAC,MAAM,CAACC,OAAO,GAAG,UAACC,MAAM,EAAEC,GAAG,EAAK;EAChC;EACA,IAAMC,GAAG,GAAG,IAAIN,EAAE,CAACO,MAAM,CAAC;IAAEH,MAAM,EAANA;EAAO,CAAC,CAAC;EACrC;EACA;EACAC,GAAG,CAACG,GAAG,CAAC,KAAK,EAAEF,GAAG,CAAC;;EAEnB;EACAA,GAAG,CAACG,EAAE,CAAC,YAAY,EAAE,UAACT,EAAE,EAAEU,GAAG,EAAK;IAChC,IAAIA,GAAG,CAACC,GAAG,KAAK,QAAQ,EAAE;MACxBX,EAAE,CAACY,QAAQ,GAAG,OAAO;MACrB;MACAZ,EAAE,CAACa,IAAI,CAACC,IAAI,CAACC,SAAS,CAACV,GAAG,CAACW,GAAG,CAAC,SAAS,CAAC,CAACC,KAAK,CAAC,CAAC;IACnD,CAAC,MAAM,IAAIP,GAAG,CAACC,GAAG,CAACO,UAAU,CAAC,QAAQ,CAAC,EAAE;MACvClB,EAAE,CAACY,QAAQ,GAAGF,GAAG,CAACC,GAAG,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACnCnB,EAAE,CAACS,EAAE,CAAC,SAAS,EAAE,UAACW,OAAO,EAAK;QAC5B;QACA;QACA;QACAd,GAAG,CAACe,OAAO,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;UAC9B,IACEA,MAAM,KAAKvB,EAAE,IACbuB,MAAM,CAACC,UAAU,KAAKxB,EAAE,CAACyB,IAAI,IAC7BF,MAAM,CAACX,QAAQ,KAAKZ,EAAE,CAACY,QAAQ,EAE/BW,MAAM,CAACV,IAAI,CAACO,OAAO,CAACM,QAAQ,CAAC,CAAC,CAAC;UACjC;UACA;UACA;UACA;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEA1B,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE,UAACkB,KAAK,EAAK;MACxBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBtB,GAAG,CAACwB,MAAM,CAACT,OAAO,GAAGO,KAAK,CAACP,OAAO;MAClCf,GAAG,CAACwB,MAAM,CAACF,KAAK,GAAGG,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAGL,KAAK,GAAG,CAAC,CAAC;MACtEtB,GAAG,CAAC4B,MAAM,CAAC,OAAO,CAAC;IACrB,CAAC,CAAC;IAEFjC,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE;MAAA,OAAMmB,OAAO,CAACM,GAAG,IAAAC,MAAA,CAAIzB,GAAG,CAACC,GAAG,sBAAmB,CAAC;IAAA,EAAC;EAClE,CAAC,CAAC;AACJ,CAAC"}},"mtime":1705275696910},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\socket.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar ws = require(\"ws\");\n\n//모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = function (server, app) {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  var wss = new ws.Server({\n    server: server\n  });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", function (ws, req) {\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", function (message) {\n        // send message to open sockets in my room without me\n        //현재 반복 중인 클라이언트가 현재 메시지를 보낸 클라이언트(ws)와 같지 않고,\n        //상태가 OPEN인 경우, 그리고 같은 방(location)에 있는 경우에만 조건이 참\n        wss.clients.forEach(function (client) {\n          if (client !== ws && client.readyState === ws.OPEN && client.location === ws.location) client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n    // else if (req.url.startsWith(\"http://localhost:8080/lawyerConnect/\")) {\n    //   ws.on(\"message\", (message) => {\n    //     // 서버로부터 메시지를 받았을 때의 처리\n    //     console.log(\"Received message from client:\", message);\n\n    //     // 서버에서 클라이언트로 데이터 전송\n    //     const dataToSend = {\n    //       lawyerId: req.url.split(\"/\")[1],\n    //       lawyerName: req.url.split(\"/\")[2],\n    //       authIdx: req.url.split(\"/\")[3],\n    //     };\n\n    //     ws.send(JSON.stringify(dataToSend));\n    //   });\n    // }\n\n    ws.on(\"error\", function (error) {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n    ws.on(\"close\", function () {\n      return console.log(\"\".concat(req.url, \" connection close\"));\n    });\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwic2VydmVyIiwiYXBwIiwid3NzIiwiU2VydmVyIiwic2V0Iiwib24iLCJyZXEiLCJ1cmwiLCJsb2NhdGlvbiIsInNlbmQiLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0Iiwicm9vbXMiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJtZXNzYWdlIiwiY2xpZW50cyIsImZvckVhY2giLCJjbGllbnQiLCJyZWFkeVN0YXRlIiwiT1BFTiIsInRvU3RyaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwibG9jYWxzIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwicmVuZGVyIiwibG9nIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJDOlxcZmluYWxQcm9qZWN0XFxwcm9qZWN0XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXG9wZW4tY2hhdHNcXCIsInNvdXJjZXMiOlsic29ja2V0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHdzID0gcmVxdWlyZShcIndzXCIpO1xuXG4vL+uqqOuTiOydhCDrgrTrs7TrgrTripQg642wIOyCrOyaqeuQmOuKlCDtirnsiJjtlZwg6rCd7LK0XG4vL+uLpOuluCDtjIzsnbzsl5DshJwg7ZW064u5IOuqqOuTiOydhCDqsIDsoLjsmYAg7IKs7JqpIOqwgOuKpShyZXF1aXJlKCkg7J207JqpKVxubW9kdWxlLmV4cG9ydHMgPSAoc2VydmVyLCBhcHApID0+IHtcbiAgLy93cyDrqqjrk4jsnZggU2VydmVyIO2BtOuemOyKpChXZWJTb2NrZXQg7ISc67KE66W8IOyDneyEse2VmOqzoCDqtIDrpqwp66W8IOyCrOyaqe2VmOyXrCBXZWJTb2NrZXQg7ISc67KE66W8IOyDneyEse2VmOuKlCDqtazrrLhcbiAgY29uc3Qgd3NzID0gbmV3IHdzLlNlcnZlcih7IHNlcnZlciB9KTtcbiAgLy8gZm9yIHNlbmRpbmcgYSByb29tcyBkYXRhIHdoZW4gYSBuZXcgcm9vbSBpcyBjcmVhdGVkXG4gIC8vIHVzZWQgYXQgYXBwLnBvc3QoJ25ld3Jvb20nKSBvbiBhcHAuanNcbiAgYXBwLnNldChcIndzc1wiLCB3c3MpO1xuXG4gIC8vIEJhY2tlbmTsl5DshJwgc29ja2V07J2EIOyCrOyaqe2VoCDspIDruYQg7JmE66OMXG4gIHdzcy5vbihcImNvbm5lY3Rpb25cIiwgKHdzLCByZXEpID0+IHtcbiAgICBpZiAocmVxLnVybCA9PT0gXCIvcm9vbXNcIikge1xuICAgICAgd3MubG9jYXRpb24gPSBcImluZGV4XCI7XG4gICAgICAvLyBnZXQgYSBkYXRhIHdoZW4gaW50byBpbmRleFxuICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShhcHAuZ2V0KFwiZHVtbXlEYlwiKS5yb29tcykpO1xuICAgIH0gZWxzZSBpZiAocmVxLnVybC5zdGFydHNXaXRoKFwiL2NoYXQvXCIpKSB7XG4gICAgICB3cy5sb2NhdGlvbiA9IHJlcS51cmwuc3BsaXQoXCIvXCIpWzJdO1xuICAgICAgd3Mub24oXCJtZXNzYWdlXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgIC8vIHNlbmQgbWVzc2FnZSB0byBvcGVuIHNvY2tldHMgaW4gbXkgcm9vbSB3aXRob3V0IG1lXG4gICAgICAgIC8v7ZiE7J6sIOuwmOuztSDspJHsnbgg7YG065287J207Ja47Yq46rCAIO2YhOyerCDrqZTsi5zsp4Drpbwg67O064K4IO2BtOudvOydtOyWuO2KuCh3cynsmYAg6rCZ7KeAIOyViuqzoCxcbiAgICAgICAgLy/sg4Htg5zqsIAgT1BFTuyduCDqsr3smrAsIOq3uOumrOqzoCDqsJnsnYAg67CpKGxvY2F0aW9uKeyXkCDsnojripQg6rK97Jqw7JeQ66eMIOyhsOqxtOydtCDssLhcbiAgICAgICAgd3NzLmNsaWVudHMuZm9yRWFjaCgoY2xpZW50KSA9PiB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY2xpZW50ICE9PSB3cyAmJlxuICAgICAgICAgICAgY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4gJiZcbiAgICAgICAgICAgIGNsaWVudC5sb2NhdGlvbiA9PT0gd3MubG9jYXRpb25cbiAgICAgICAgICApXG4gICAgICAgICAgICBjbGllbnQuc2VuZChtZXNzYWdlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgIC8vIHNlbmQgbWVzc2FnZSB0b1xuICAgICAgICAgIC8vIG9wZW4gc29ja2V0cyAoY2xpZW50LnJlYWR5U3RhdGUgPT09IHdzLk9QRU4pXG4gICAgICAgICAgLy8gaW4gbXkgcm9vbSAoY2xpZW50LnJvb21JZCA9PT0gd3Mucm9vbUlkKVxuICAgICAgICAgIC8vIHdpdGhvdXQgbWUgKGNsaWVudCAhPT0gd3MpXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGVsc2UgaWYgKHJlcS51cmwuc3RhcnRzV2l0aChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sYXd5ZXJDb25uZWN0L1wiKSkge1xuICAgIC8vICAgd3Mub24oXCJtZXNzYWdlXCIsIChtZXNzYWdlKSA9PiB7XG4gICAgLy8gICAgIC8vIOyEnOuyhOuhnOu2gO2EsCDrqZTsi5zsp4Drpbwg67Cb7JWY7J2EIOuVjOydmCDsspjrpqxcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCBtZXNzYWdlIGZyb20gY2xpZW50OlwiLCBtZXNzYWdlKTtcblxuICAgIC8vICAgICAvLyDshJzrsoTsl5DshJwg7YG065287J207Ja47Yq466GcIOuNsOydtO2EsCDsoITshqFcbiAgICAvLyAgICAgY29uc3QgZGF0YVRvU2VuZCA9IHtcbiAgICAvLyAgICAgICBsYXd5ZXJJZDogcmVxLnVybC5zcGxpdChcIi9cIilbMV0sXG4gICAgLy8gICAgICAgbGF3eWVyTmFtZTogcmVxLnVybC5zcGxpdChcIi9cIilbMl0sXG4gICAgLy8gICAgICAgYXV0aElkeDogcmVxLnVybC5zcGxpdChcIi9cIilbM10sXG4gICAgLy8gICAgIH07XG5cbiAgICAvLyAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShkYXRhVG9TZW5kKSk7XG4gICAgLy8gICB9KTtcbiAgICAvLyB9XG5cbiAgICB3cy5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICBhcHAubG9jYWxzLm1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgYXBwLmxvY2Fscy5lcnJvciA9IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcIiBwcm9kdWN0aW9uXCIgPyBlcnJvciA6IHt9O1xuICAgICAgYXBwLnJlbmRlcihcImVycm9yXCIpO1xuICAgIH0pO1xuXG4gICAgd3Mub24oXCJjbG9zZVwiLCAoKSA9PiBjb25zb2xlLmxvZyhgJHtyZXEudXJsfSBjb25uZWN0aW9uIGNsb3NlYCkpO1xuICB9KTtcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDOztBQUV4QjtBQUNBO0FBQ0FDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHLFVBQUNDLE1BQU0sRUFBRUMsR0FBRyxFQUFLO0VBQ2hDO0VBQ0EsSUFBTUMsR0FBRyxHQUFHLElBQUlOLEVBQUUsQ0FBQ08sTUFBTSxDQUFDO0lBQUVILE1BQU0sRUFBTkE7RUFBTyxDQUFDLENBQUM7RUFDckM7RUFDQTtFQUNBQyxHQUFHLENBQUNHLEdBQUcsQ0FBQyxLQUFLLEVBQUVGLEdBQUcsQ0FBQzs7RUFFbkI7RUFDQUEsR0FBRyxDQUFDRyxFQUFFLENBQUMsWUFBWSxFQUFFLFVBQUNULEVBQUUsRUFBRVUsR0FBRyxFQUFLO0lBQ2hDLElBQUlBLEdBQUcsQ0FBQ0MsR0FBRyxLQUFLLFFBQVEsRUFBRTtNQUN4QlgsRUFBRSxDQUFDWSxRQUFRLEdBQUcsT0FBTztNQUNyQjtNQUNBWixFQUFFLENBQUNhLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxTQUFTLENBQUNWLEdBQUcsQ0FBQ1csR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDQyxLQUFLLENBQUMsQ0FBQztJQUNuRCxDQUFDLE1BQU0sSUFBSVAsR0FBRyxDQUFDQyxHQUFHLENBQUNPLFVBQVUsQ0FBQyxRQUFRLENBQUMsRUFBRTtNQUN2Q2xCLEVBQUUsQ0FBQ1ksUUFBUSxHQUFHRixHQUFHLENBQUNDLEdBQUcsQ0FBQ1EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNuQ25CLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFDVyxPQUFPLEVBQUs7UUFDNUI7UUFDQTtRQUNBO1FBQ0FkLEdBQUcsQ0FBQ2UsT0FBTyxDQUFDQyxPQUFPLENBQUMsVUFBQ0MsTUFBTSxFQUFLO1VBQzlCLElBQ0VBLE1BQU0sS0FBS3ZCLEVBQUUsSUFDYnVCLE1BQU0sQ0FBQ0MsVUFBVSxLQUFLeEIsRUFBRSxDQUFDeUIsSUFBSSxJQUM3QkYsTUFBTSxDQUFDWCxRQUFRLEtBQUtaLEVBQUUsQ0FBQ1ksUUFBUSxFQUUvQlcsTUFBTSxDQUFDVixJQUFJLENBQUNPLE9BQU8sQ0FBQ00sUUFBUSxDQUFDLENBQUMsQ0FBQztVQUNqQztVQUNBO1VBQ0E7VUFDQTtRQUNGLENBQUMsQ0FBQztNQUNKLENBQUMsQ0FBQztJQUNKO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7O0lBRUE7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBOztJQUVBO0lBQ0E7SUFDQTs7SUFFQTFCLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRSxVQUFDa0IsS0FBSyxFQUFLO01BQ3hCQyxPQUFPLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BQ3BCdEIsR0FBRyxDQUFDd0IsTUFBTSxDQUFDVCxPQUFPLEdBQUdPLEtBQUssQ0FBQ1AsT0FBTztNQUNsQ2YsR0FBRyxDQUFDd0IsTUFBTSxDQUFDRixLQUFLLEdBQUdHLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxRQUFRLEtBQUssYUFBYSxHQUFHTCxLQUFLLEdBQUcsQ0FBQyxDQUFDO01BQ3RFdEIsR0FBRyxDQUFDNEIsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNyQixDQUFDLENBQUM7SUFFRmpDLEVBQUUsQ0FBQ1MsRUFBRSxDQUFDLE9BQU8sRUFBRTtNQUFBLE9BQU1tQixPQUFPLENBQUNNLEdBQUcsSUFBQUMsTUFBQSxDQUFJekIsR0FBRyxDQUFDQyxHQUFHLHNCQUFtQixDQUFDO0lBQUEsRUFBQztFQUNsRSxDQUFDLENBQUM7QUFDSixDQUFDIn0=","map":{"version":3,"names":["ws","require","module","exports","server","app","wss","Server","set","on","req","url","location","send","JSON","stringify","get","rooms","startsWith","split","message","clients","forEach","client","readyState","OPEN","toString","error","console","locals","process","env","NODE_ENV","render","log","concat"],"sourceRoot":"C:\\finalProject\\project\\Final_Project\\src\\open-chats\\","sources":["socket.js"],"sourcesContent":["const ws = require(\"ws\");\n\n//모듈을 내보내는 데 사용되는 특수한 객체\n//다른 파일에서 해당 모듈을 가져와 사용 가능(require() 이용)\nmodule.exports = (server, app) => {\n  //ws 모듈의 Server 클래스(WebSocket 서버를 생성하고 관리)를 사용하여 WebSocket 서버를 생성하는 구문\n  const wss = new ws.Server({ server });\n  // for sending a rooms data when a new room is created\n  // used at app.post('newroom') on app.js\n  app.set(\"wss\", wss);\n\n  // Backend에서 socket을 사용할 준비 완료\n  wss.on(\"connection\", (ws, req) => {\n    if (req.url === \"/rooms\") {\n      ws.location = \"index\";\n      // get a data when into index\n      ws.send(JSON.stringify(app.get(\"dummyDb\").rooms));\n    } else if (req.url.startsWith(\"/chat/\")) {\n      ws.location = req.url.split(\"/\")[2];\n      ws.on(\"message\", (message) => {\n        // send message to open sockets in my room without me\n        //현재 반복 중인 클라이언트가 현재 메시지를 보낸 클라이언트(ws)와 같지 않고,\n        //상태가 OPEN인 경우, 그리고 같은 방(location)에 있는 경우에만 조건이 참\n        wss.clients.forEach((client) => {\n          if (\n            client !== ws &&\n            client.readyState === ws.OPEN &&\n            client.location === ws.location\n          )\n            client.send(message.toString());\n          // send message to\n          // open sockets (client.readyState === ws.OPEN)\n          // in my room (client.roomId === ws.roomId)\n          // without me (client !== ws)\n        });\n      });\n    }\n    // else if (req.url.startsWith(\"http://localhost:8080/lawyerConnect/\")) {\n    //   ws.on(\"message\", (message) => {\n    //     // 서버로부터 메시지를 받았을 때의 처리\n    //     console.log(\"Received message from client:\", message);\n\n    //     // 서버에서 클라이언트로 데이터 전송\n    //     const dataToSend = {\n    //       lawyerId: req.url.split(\"/\")[1],\n    //       lawyerName: req.url.split(\"/\")[2],\n    //       authIdx: req.url.split(\"/\")[3],\n    //     };\n\n    //     ws.send(JSON.stringify(dataToSend));\n    //   });\n    // }\n\n    ws.on(\"error\", (error) => {\n      console.error(error);\n      app.locals.message = error.message;\n      app.locals.error = process.env.NODE_ENV !== \" production\" ? error : {};\n      app.render(\"error\");\n    });\n\n    ws.on(\"close\", () => console.log(`${req.url} connection close`));\n  });\n};\n"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAI,CAAC;;AAExB;AACA;AACAC,MAAM,CAACC,OAAO,GAAG,UAACC,MAAM,EAAEC,GAAG,EAAK;EAChC;EACA,IAAMC,GAAG,GAAG,IAAIN,EAAE,CAACO,MAAM,CAAC;IAAEH,MAAM,EAANA;EAAO,CAAC,CAAC;EACrC;EACA;EACAC,GAAG,CAACG,GAAG,CAAC,KAAK,EAAEF,GAAG,CAAC;;EAEnB;EACAA,GAAG,CAACG,EAAE,CAAC,YAAY,EAAE,UAACT,EAAE,EAAEU,GAAG,EAAK;IAChC,IAAIA,GAAG,CAACC,GAAG,KAAK,QAAQ,EAAE;MACxBX,EAAE,CAACY,QAAQ,GAAG,OAAO;MACrB;MACAZ,EAAE,CAACa,IAAI,CAACC,IAAI,CAACC,SAAS,CAACV,GAAG,CAACW,GAAG,CAAC,SAAS,CAAC,CAACC,KAAK,CAAC,CAAC;IACnD,CAAC,MAAM,IAAIP,GAAG,CAACC,GAAG,CAACO,UAAU,CAAC,QAAQ,CAAC,EAAE;MACvClB,EAAE,CAACY,QAAQ,GAAGF,GAAG,CAACC,GAAG,CAACQ,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACnCnB,EAAE,CAACS,EAAE,CAAC,SAAS,EAAE,UAACW,OAAO,EAAK;QAC5B;QACA;QACA;QACAd,GAAG,CAACe,OAAO,CAACC,OAAO,CAAC,UAACC,MAAM,EAAK;UAC9B,IACEA,MAAM,KAAKvB,EAAE,IACbuB,MAAM,CAACC,UAAU,KAAKxB,EAAE,CAACyB,IAAI,IAC7BF,MAAM,CAACX,QAAQ,KAAKZ,EAAE,CAACY,QAAQ,EAE/BW,MAAM,CAACV,IAAI,CAACO,OAAO,CAACM,QAAQ,CAAC,CAAC,CAAC;UACjC;UACA;UACA;UACA;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEA;IACA;IACA;;IAEA1B,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE,UAACkB,KAAK,EAAK;MACxBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBtB,GAAG,CAACwB,MAAM,CAACT,OAAO,GAAGO,KAAK,CAACP,OAAO;MAClCf,GAAG,CAACwB,MAAM,CAACF,KAAK,GAAGG,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GAAGL,KAAK,GAAG,CAAC,CAAC;MACtEtB,GAAG,CAAC4B,MAAM,CAAC,OAAO,CAAC;IACrB,CAAC,CAAC;IAEFjC,EAAE,CAACS,EAAE,CAAC,OAAO,EAAE;MAAA,OAAMmB,OAAO,CAACM,GAAG,IAAAC,MAAA,CAAIzB,GAAG,CAACC,GAAG,sBAAmB,CAAC;IAAA,EAAC;EAClE,CAAC,CAAC;AACJ,CAAC"}},"mtime":1705275696910},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"filename\":\"C:\\\\finalProject\\\\project\\\\Final_Project\\\\src\\\\open-chats\\\\app.cjs\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"C:\\\\finalProject\\\\project\\\\Final_Project\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"MemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.7:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _morgan = _interopRequireDefault(require(\"morgan\"));\nvar _expressSession = _interopRequireDefault(require(\"express-session\"));\nvar _mysql = _interopRequireDefault(require(\"mysql\"));\nvar _http = _interopRequireDefault(require(\"http\"));\nvar _console = require(\"console\");\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n//morgan : 서버에 들어오는 요청과 관련된 정보를 로그를 남길 수 있음(middleware와 유사)\n\nvar conn = _mysql[\"default\"].createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\"\n});\nconn.connect(function (err) {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\nvar app = (0, _express[\"default\"])();\napp.set(\"port\", process.env.PORT || 3000);\napp.set(\"views\", __dirname + \"/views\");\napp.set(\"view engine\", \"pug\");\napp.use((0, _morgan[\"default\"])(\"dev\"));\napp.use(\"/public\", _express[\"default\"][\"static\"](__dirname + \"/public\"));\napp.use(_express[\"default\"].json());\napp.use(_express[\"default\"].urlencoded({\n  extended: false\n}));\napp.use((0, _expressSession[\"default\"])({\n  resave: false,\n  saveUninitialized: false,\n  //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n  //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n  secret: process.env.COOKIE_SECRET || \"secret\",\n  cookie: {\n    //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n    httpOnly: true,\n    //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n    secure: false\n  }\n}));\n\n// DB 연결\n// app.set(\"db\", conn);\napp.set(\"db\", {\n  rooms: new Array(),\n  users: new Array()\n});\nvar lawyerUrl = \"http://localhost:8080/lawyerConnect\";\nvar corsOptions = {\n  origin: \"http://localhost:8080\" // 허용할 도메인 주소\n};\napp.use(\"/lawyerUrl\", (0, _cors[\"default\"])(corsOptions));\n(0, _nodeFetch[\"default\"])(lawyerUrl).then(function (response) {\n  return response.json();\n}).then(function (data) {\n  console.log(data[0]);\n})[\"catch\"](function (error) {\n  console.log(\"error : \" + error);\n});\napp.get(\"/\", function (req, res) {\n  // TODO: add user\n  return res.render(\"index\");\n});\napp.get(\"/newroom\", function (req, res) {\n  return res.render(\"new\");\n});\napp.post(\"/newroom\", function (req, res) {\n  var title = req.body.title;\n  var roomId = req.sessionID + Date.now();\n  var _app$get = app.get(\"db\"),\n    rooms = _app$get.rooms;\n  rooms.push({\n    title: title,\n    roomId: roomId\n  });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach(function (client) {\n    if (client.location === \"index\" && client.readyState === client.OPEN) client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(\"/chat/\".concat(roomId));\n});\napp.get(\"/chat/:roomId\", function (req, res) {\n  var _app$get$rooms$find = app.get(\"db\").rooms.find(function (room) {\n      return room.roomId === req.params.roomId;\n    }),\n    title = _app$get$rooms$find.title;\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\napp.post(\"/\", function (req, res) {\n  if (req.body.deleteRooms === \"true\") {\n    var roomId = req.body.roomId;\n    console.log(roomId);\n    var _app$get2 = app.get(\"db\"),\n      rooms = _app$get2.rooms;\n    var index = rooms.findIndex(function (room) {\n      return room.roomId === roomId;\n    });\n    if (index !== -1) {\n      rooms.splice(index, 1); // 해당 roomId를 가진 방을 삭제합니다.\n    }\n  }\n  return res.redirect(\"/\");\n});\n\n// Error Exeption\napp.use(function (req, res, next) {\n  var notFoundError = new Error(\"\".concat(req.method, \" \").concat(req.url, \" NotFound\"));\n  notFoundError.status = 404;\n  next(notFoundError);\n});\napp.use(function (err, req, res, next) {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\nvar expressServer = app.listen(app.get(\"port\"), function () {\n  return console.log(\"ws module server is running on port \" + app.get(\"port\"));\n});\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3BhdGgiLCJfbW9yZ2FuIiwiX2V4cHJlc3NTZXNzaW9uIiwiX215c3FsIiwiX2h0dHAiLCJfY29uc29sZSIsIl9jb3JzIiwiX25vZGVGZXRjaCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJjb25uIiwibXlzcWwiLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJhcHAiLCJleHByZXNzIiwic2V0IiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJfX2Rpcm5hbWUiLCJ1c2UiLCJtb3JnYW4iLCJqc29uIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic2Vzc2lvbiIsInJlc2F2ZSIsInNhdmVVbmluaXRpYWxpemVkIiwic2VjcmV0IiwiQ09PS0lFX1NFQ1JFVCIsImNvb2tpZSIsImh0dHBPbmx5Iiwic2VjdXJlIiwicm9vbXMiLCJBcnJheSIsInVzZXJzIiwibGF3eWVyVXJsIiwiY29yc09wdGlvbnMiLCJvcmlnaW4iLCJjb3JzIiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiZ2V0IiwicmVxIiwicmVzIiwicmVuZGVyIiwicG9zdCIsInRpdGxlIiwiYm9keSIsInJvb21JZCIsInNlc3Npb25JRCIsIkRhdGUiLCJub3ciLCJfYXBwJGdldCIsInB1c2giLCJjbGllbnRzIiwiZm9yRWFjaCIsImNsaWVudCIsImxvY2F0aW9uIiwicmVhZHlTdGF0ZSIsIk9QRU4iLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsInJlZGlyZWN0IiwiY29uY2F0IiwiX2FwcCRnZXQkcm9vbXMkZmluZCIsImZpbmQiLCJyb29tIiwicGFyYW1zIiwibG9jYWxzIiwiZGVsZXRlUm9vbXMiLCJfYXBwJGdldDIiLCJpbmRleCIsImZpbmRJbmRleCIsInNwbGljZSIsIm5leHQiLCJub3RGb3VuZEVycm9yIiwiRXJyb3IiLCJtZXRob2QiLCJ1cmwiLCJzdGF0dXMiLCJtZXNzYWdlIiwiTk9ERV9FTlYiLCJleHByZXNzU2VydmVyIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcZmluYWxQcm9qZWN0XFxwcm9qZWN0XFxGaW5hbF9Qcm9qZWN0XFxzcmNcXG9wZW4tY2hhdHNcXCIsInNvdXJjZXMiOlsiYXBwLmNqcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuLy9tb3JnYW4gOiDshJzrsoTsl5Ag65Ok7Ja07Jik64qUIOyalOyyreqzvCDqtIDroKjrkJwg7KCV67O066W8IOuhnOq3uOulvCDrgqjquLgg7IiYIOyeiOydjChtaWRkbGV3YXJl7JmAIOycoOyCrClcbmltcG9ydCBtb3JnYW4gZnJvbSBcIm1vcmdhblwiO1xuaW1wb3J0IHNlc3Npb24gZnJvbSBcImV4cHJlc3Mtc2Vzc2lvblwiO1xuXG5pbXBvcnQgbXlzcWwgZnJvbSBcIm15c3FsXCI7XG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xuaW1wb3J0IHsgZXJyb3IgfSBmcm9tIFwiY29uc29sZVwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcblxuaW1wb3J0IGZldGNoIGZyb20gXCJub2RlLWZldGNoXCI7XG5cbmNvbnN0IGNvbm4gPSBteXNxbC5jcmVhdGVDb25uZWN0aW9uKHtcbiAgaG9zdDogXCIxNzUuMTk4LjIwNi4xMzdcIixcbiAgcG9ydDogMzMwNixcbiAgdXNlcjogXCJxXCIsXG4gIHBhc3N3b3JkOiBcInFcIixcbiAgZGF0YWJhc2U6IFwiZm9sbGF3XCIsXG59KTtcblxuY29ubi5jb25uZWN0KChlcnIpID0+IHtcbiAgaWYgKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJNeVNRTCDsl7DqsrAg7Jik66WYXCIpO1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zb2xlLmxvZyhcIk15U1FM7JeQIOyEseqzteyggeycvOuhnCDsl7DqsrDrkJjsl4jsirXri4jri6QuXCIpO1xufSk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbmFwcC5zZXQoXCJwb3J0XCIsIHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMCk7XG5hcHAuc2V0KFwidmlld3NcIiwgX19kaXJuYW1lICsgXCIvdmlld3NcIik7XG5hcHAuc2V0KFwidmlldyBlbmdpbmVcIiwgXCJwdWdcIik7XG5hcHAudXNlKG1vcmdhbihcImRldlwiKSk7XG5hcHAudXNlKFwiL3B1YmxpY1wiLCBleHByZXNzLnN0YXRpYyhfX2Rpcm5hbWUgKyBcIi9wdWJsaWNcIikpO1xuYXBwLnVzZShleHByZXNzLmpzb24oKSk7XG5hcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5hcHAudXNlKFxuICBzZXNzaW9uKHtcbiAgICByZXNhdmU6IGZhbHNlLFxuICAgIHNhdmVVbmluaXRpYWxpemVkOiBmYWxzZSxcbiAgICAvL0NPT0tJRV9TRUNSRVQg7ZmY6rK9IOuzgOyImOqwgCDshKTsoJXrkJjslrQg7J6I64uk66m0IOq3uCDqsJLsnYQg7IKs7Jqp7ZWY6rOgLFxuICAgIC8v7ISk7KCV65CY7Ja0IOyeiOyngCDslYrri6TrqbQgXCJzZWNyZXRcIuydtOudvOuKlCDquLDrs7jqsJLsnYQg7IKs7Jqp7ZWY7JesIOyEuOyFmCDrjbDsnbTthLDrpbwg7JWU7Zi47ZmUXG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5DT09LSUVfU0VDUkVUIHx8IFwic2VjcmV0XCIsXG4gICAgY29va2llOiB7XG4gICAgICAvL2h0dHBPbmx5OiB0cnVl64qUIO2BtOudvOydtOyWuO2KuOyXkOyEnCDshLjshZgg7L+g7YKk7JeQIOygkeq3vO2VoCDrlYwgSmF2YVNjcmlwdOulvCDthrXtlZwg7KCR6re87J2EIOunieuKlCDsmLXshZhcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgLy9zZWN1cmU6IGZhbHNl64qUIOyEuOyFmCDsv6DtgqTrpbwg7JWI7KCE7ZWcIOyXsOqysChIVFRQUynsnYQg7Ya17ZW07ISc66eMIOyghOyGoe2VtOyVvCDtlZjripTsp4Ag7Jes67aA66W8IOyEpOygle2VmOuKlCDsmLXshZhcbiAgICAgIHNlY3VyZTogZmFsc2UsXG4gICAgfSxcbiAgfSlcbik7XG5cbi8vIERCIOyXsOqysFxuLy8gYXBwLnNldChcImRiXCIsIGNvbm4pO1xuYXBwLnNldChcImRiXCIsIHsgcm9vbXM6IG5ldyBBcnJheSgpLCB1c2VyczogbmV3IEFycmF5KCkgfSk7XG5cbmNvbnN0IGxhd3llclVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDo4MDgwL2xhd3llckNvbm5lY3RcIjtcblxuY29uc3QgY29yc09wdGlvbnMgPSB7XG4gIG9yaWdpbjogXCJodHRwOi8vbG9jYWxob3N0OjgwODBcIiwgLy8g7ZeI7Jqp7ZWgIOuPhOuplOyduCDso7zshoxcbn07XG5cbmFwcC51c2UoXCIvbGF3eWVyVXJsXCIsIGNvcnMoY29yc09wdGlvbnMpKTtcblxuZmV0Y2gobGF3eWVyVXJsKVxuICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhkYXRhWzBdKTtcbiAgfSlcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwiZXJyb3IgOiBcIiArIGVycm9yKTtcbiAgfSk7XG5cbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICAvLyBUT0RPOiBhZGQgdXNlclxuICByZXR1cm4gcmVzLnJlbmRlcihcImluZGV4XCIpO1xufSk7XG5cbmFwcC5nZXQoXCIvbmV3cm9vbVwiLCAocmVxLCByZXMpID0+IHJlcy5yZW5kZXIoXCJuZXdcIikpO1xuXG5hcHAucG9zdChcIi9uZXdyb29tXCIsIChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IHRpdGxlIH0gPSByZXEuYm9keTtcbiAgY29uc3Qgcm9vbUlkID0gcmVxLnNlc3Npb25JRCArIERhdGUubm93KCk7XG4gIGNvbnN0IHsgcm9vbXMgfSA9IGFwcC5nZXQoXCJkYlwiKTtcbiAgcm9vbXMucHVzaCh7IHRpdGxlLCByb29tSWQgfSk7XG5cbiAgLy8g7LGE7YyF67CpIOyDiOuhnCDsg53shLHsi5wg7ZmI7JeQIOyeiOuKlCDsgqzrnozrk6Tsl5Dqsowg7IOI66Gc7J2AIOuwqSDrqqnroZ0g7KCE7IahXG4gIC8vIFE/OiDrs7jsnbjsnYAg7JmcIOygnOyZuOuQoOq5jD9cbiAgLy8gQSE6IOuCmOuKlCDtmITsnqwg7Jew6rKw65CcIOyGjOy8k+ydtCDsl4bripTsg4Htg5zsnoQgaG9tZeyXkOyEnCBuZXdyb29tIOycvOuhnCDqsIjrlYwgY29ubmVjdGlvbuydtCDrgYrslrTsp4Dqs6BcbiAgLy8gICAgIHJlZGlyZWN066GcIC9jaGF0Lzpyb29tSWTroZwg67O064K07KC47JW8IGNoYXQuanPsl5DshJwgY29ubmVjdGlvbuydhCDsl7DqsrDtlahcbiAgYXBwLmdldChcIndzc1wiKS5jbGllbnRzLmZvckVhY2goKGNsaWVudCkgPT4ge1xuICAgIGlmIChjbGllbnQubG9jYXRpb24gPT09IFwiaW5kZXhcIiAmJiBjbGllbnQucmVhZHlTdGF0ZSA9PT0gY2xpZW50Lk9QRU4pXG4gICAgICBjbGllbnQuc2VuZChKU09OLnN0cmluZ2lmeShyb29tcykpO1xuICB9KTtcbiAgcmV0dXJuIHJlcy5yZWRpcmVjdChgL2NoYXQvJHtyb29tSWR9YCk7XG59KTtcblxuYXBwLmdldChcIi9jaGF0Lzpyb29tSWRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgdGl0bGUgfSA9IGFwcFxuICAgIC5nZXQoXCJkYlwiKVxuICAgIC5yb29tcy5maW5kKChyb29tKSA9PiByb29tLnJvb21JZCA9PT0gcmVxLnBhcmFtcy5yb29tSWQpO1xuICAvL3Jlcy5sb2NhbHPripQg7J2R64u1IOqwneyytChyZXMp7J2YIOyGjeyEseycvOuhnCwg7ZW064u5IOydkeuLteyXkCDrjIDtlZwg66Gc7LusIOuzgOyImOulvCDshKTsoJXtlZjqs6Ag7IKs7Jqp7ZWgIOyImCDsnojqsowg7ZW07KSMXG4gIHJlcy5sb2NhbHMudGl0bGUgPSB0aXRsZTtcbiAgLy9jaGF0IO2MjOydvOydhCDroIzrjZTrp4HtlZjsl6wg7ZW064u5IO2MjOydvOyXkOyEnCB0aXRsZSDrs4DsiJjrpbwg7IKs7Jqp7ZWgIOyImCDsnojsnYxcbiAgcmVzLnJlbmRlcihcImNoYXRcIik7XG59KTtcblxuYXBwLnBvc3QoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICBpZiAocmVxLmJvZHkuZGVsZXRlUm9vbXMgPT09IFwidHJ1ZVwiKSB7XG4gICAgY29uc3QgeyByb29tSWQgfSA9IHJlcS5ib2R5O1xuICAgIGNvbnNvbGUubG9nKHJvb21JZCk7XG4gICAgY29uc3QgeyByb29tcyB9ID0gYXBwLmdldChcImRiXCIpO1xuICAgIGNvbnN0IGluZGV4ID0gcm9vbXMuZmluZEluZGV4KChyb29tKSA9PiByb29tLnJvb21JZCA9PT0gcm9vbUlkKTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICByb29tcy5zcGxpY2UoaW5kZXgsIDEpOyAvLyDtlbTri7kgcm9vbUlk66W8IOqwgOynhCDrsKnsnYQg7IKt7KCc7ZWp64uI64ukLlxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzLnJlZGlyZWN0KFwiL1wiKTtcbn0pO1xuXG4vLyBFcnJvciBFeGVwdGlvblxuYXBwLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgbm90Rm91bmRFcnJvciA9IG5ldyBFcnJvcihgJHtyZXEubWV0aG9kfSAke3JlcS51cmx9IE5vdEZvdW5kYCk7XG4gIG5vdEZvdW5kRXJyb3Iuc3RhdHVzID0gNDA0O1xuICBuZXh0KG5vdEZvdW5kRXJyb3IpO1xufSk7XG5hcHAudXNlKChlcnIsIHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5sb2NhbHMubWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICByZXMubG9jYWxzLmVycm9yID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwiIHByb2R1Y3Rpb25cIiA/IGVyciA6IHt9O1xuICByZXMuc3RhdHVzKGVyci5zdGF0dXMgfHwgNTAwKS5yZW5kZXIoXCJlcnJvclwiKTtcbn0pO1xuXG5jb25zdCBleHByZXNzU2VydmVyID0gYXBwLmxpc3RlbihhcHAuZ2V0KFwicG9ydFwiKSwgKCkgPT5cbiAgY29uc29sZS5sb2coXCJ3cyBtb2R1bGUgc2VydmVyIGlzIHJ1bm5pbmcgb24gcG9ydCBcIiArIGFwcC5nZXQoXCJwb3J0XCIpKVxuKTtcblxuLy8gc29ja2V0XG5yZXF1aXJlKFwiLi9zb2NrZXRcIikoZXhwcmVzc1NlcnZlciwgYXBwKTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFHQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxlQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBSSxNQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxLQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxRQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxLQUFBLEdBQUFSLHNCQUFBLENBQUFDLE9BQUE7QUFFQSxJQUFBUSxVQUFBLEdBQUFULHNCQUFBLENBQUFDLE9BQUE7QUFBK0IsU0FBQUQsdUJBQUFVLEdBQUEsV0FBQUEsR0FBQSxJQUFBQSxHQUFBLENBQUFDLFVBQUEsR0FBQUQsR0FBQSxnQkFBQUEsR0FBQTtBQVQvQjs7QUFXQSxJQUFNRSxJQUFJLEdBQUdDLGlCQUFLLENBQUNDLGdCQUFnQixDQUFDO0VBQ2xDQyxJQUFJLEVBQUUsaUJBQWlCO0VBQ3ZCQyxJQUFJLEVBQUUsSUFBSTtFQUNWQyxJQUFJLEVBQUUsR0FBRztFQUNUQyxRQUFRLEVBQUUsR0FBRztFQUNiQyxRQUFRLEVBQUU7QUFDWixDQUFDLENBQUM7QUFF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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_path","_morgan","_expressSession","_mysql","_http","_console","_cors","_nodeFetch","obj","__esModule","conn","mysql","createConnection","host","port","user","password","database","connect","err","console","error","log","app","express","set","process","env","PORT","__dirname","use","morgan","json","urlencoded","extended","session","resave","saveUninitialized","secret","COOKIE_SECRET","cookie","httpOnly","secure","rooms","Array","users","lawyerUrl","corsOptions","origin","cors","fetch","then","response","data","get","req","res","render","post","title","body","roomId","sessionID","Date","now","_app$get","push","clients","forEach","client","location","readyState","OPEN","send","JSON","stringify","redirect","concat","_app$get$rooms$find","find","room","params","locals","deleteRooms","_app$get2","index","findIndex","splice","next","notFoundError","Error","method","url","status","message","NODE_ENV","expressServer","listen"],"sourceRoot":"C:\\finalProject\\project\\Final_Project\\src\\open-chats\\","sources":["app.cjs"],"sourcesContent":["import express from \"express\";\nimport path from \"path\";\n\n//morgan : 서버에 들어오는 요청과 관련된 정보를 로그를 남길 수 있음(middleware와 유사)\nimport morgan from \"morgan\";\nimport session from \"express-session\";\n\nimport mysql from \"mysql\";\nimport http from \"http\";\nimport { error } from \"console\";\nimport cors from \"cors\";\n\nimport fetch from \"node-fetch\";\n\nconst conn = mysql.createConnection({\n  host: \"175.198.206.137\",\n  port: 3306,\n  user: \"q\",\n  password: \"q\",\n  database: \"follaw\",\n});\n\nconn.connect((err) => {\n  if (err) {\n    console.error(\"MySQL 연결 오류\");\n    return;\n  }\n  console.log(\"MySQL에 성공적으로 연결되었습니다.\");\n});\n\nconst app = express();\napp.set(\"port\", process.env.PORT || 3000);\napp.set(\"views\", __dirname + \"/views\");\napp.set(\"view engine\", \"pug\");\napp.use(morgan(\"dev\"));\napp.use(\"/public\", express.static(__dirname + \"/public\"));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(\n  session({\n    resave: false,\n    saveUninitialized: false,\n    //COOKIE_SECRET 환경 변수가 설정되어 있다면 그 값을 사용하고,\n    //설정되어 있지 않다면 \"secret\"이라는 기본값을 사용하여 세션 데이터를 암호화\n    secret: process.env.COOKIE_SECRET || \"secret\",\n    cookie: {\n      //httpOnly: true는 클라이언트에서 세션 쿠키에 접근할 때 JavaScript를 통한 접근을 막는 옵션\n      httpOnly: true,\n      //secure: false는 세션 쿠키를 안전한 연결(HTTPS)을 통해서만 전송해야 하는지 여부를 설정하는 옵션\n      secure: false,\n    },\n  })\n);\n\n// DB 연결\n// app.set(\"db\", conn);\napp.set(\"db\", { rooms: new Array(), users: new Array() });\n\nconst lawyerUrl = \"http://localhost:8080/lawyerConnect\";\n\nconst corsOptions = {\n  origin: \"http://localhost:8080\", // 허용할 도메인 주소\n};\n\napp.use(\"/lawyerUrl\", cors(corsOptions));\n\nfetch(lawyerUrl)\n  .then((response) => response.json())\n  .then((data) => {\n    console.log(data[0]);\n  })\n  .catch((error) => {\n    console.log(\"error : \" + error);\n  });\n\napp.get(\"/\", (req, res) => {\n  // TODO: add user\n  return res.render(\"index\");\n});\n\napp.get(\"/newroom\", (req, res) => res.render(\"new\"));\n\napp.post(\"/newroom\", (req, res) => {\n  const { title } = req.body;\n  const roomId = req.sessionID + Date.now();\n  const { rooms } = app.get(\"db\");\n  rooms.push({ title, roomId });\n\n  // 채팅방 새로 생성시 홈에 있는 사람들에게 새로은 방 목록 전송\n  // Q?: 본인은 왜 제외될까?\n  // A!: 나는 현재 연결된 소켓이 없는상태임 home에서 newroom 으로 갈때 connection이 끊어지고\n  //     redirect로 /chat/:roomId로 보내져야 chat.js에서 connection을 연결함\n  app.get(\"wss\").clients.forEach((client) => {\n    if (client.location === \"index\" && client.readyState === client.OPEN)\n      client.send(JSON.stringify(rooms));\n  });\n  return res.redirect(`/chat/${roomId}`);\n});\n\napp.get(\"/chat/:roomId\", (req, res) => {\n  const { title } = app\n    .get(\"db\")\n    .rooms.find((room) => room.roomId === req.params.roomId);\n  //res.locals는 응답 객체(res)의 속성으로, 해당 응답에 대한 로컬 변수를 설정하고 사용할 수 있게 해줌\n  res.locals.title = title;\n  //chat 파일을 렌더링하여 해당 파일에서 title 변수를 사용할 수 있음\n  res.render(\"chat\");\n});\n\napp.post(\"/\", (req, res) => {\n  if (req.body.deleteRooms === \"true\") {\n    const { roomId } = req.body;\n    console.log(roomId);\n    const { rooms } = app.get(\"db\");\n    const index = rooms.findIndex((room) => room.roomId === roomId);\n    if (index !== -1) {\n      rooms.splice(index, 1); // 해당 roomId를 가진 방을 삭제합니다.\n    }\n  }\n  return res.redirect(\"/\");\n});\n\n// Error Exeption\napp.use((req, res, next) => {\n  const notFoundError = new Error(`${req.method} ${req.url} NotFound`);\n  notFoundError.status = 404;\n  next(notFoundError);\n});\napp.use((err, req, res, next) => {\n  res.locals.message = err.message;\n  res.locals.error = process.env.NODE_ENV !== \" production\" ? err : {};\n  res.status(err.status || 500).render(\"error\");\n});\n\nconst expressServer = app.listen(app.get(\"port\"), () =>\n  console.log(\"ws module server is running on port \" + app.get(\"port\"))\n);\n\n// socket\nrequire(\"./socket\")(expressServer, app);\n"],"mappings":"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"}},"mtime":1705041728523}}